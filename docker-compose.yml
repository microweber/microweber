version: '3'
services:
    php-apache:
        image: thecodingmachine/php:8.2-v4-apache-node16
        ports:
            - 80:80
        volumes:
            - html:/var/www/html
        links:
            - 'mariadb'
        environment:
            APACHE_DOCUMENT_ROOT: /var/www/html/public
            COMPOSER_ALLOW_SUPERUSER: 1
            APACHE_EXTENSION_DAV: 0
            PHP_INI_MEMORY_LIMIT: 1g
            PHP_INI_ERROR_REPORTING: E_ALL
            PHP_EXTENSIONS: pgsql gettext imap sockets zip curl dom gd exif intl mbstring bcmath curl dom opcache mbstring soap xml xmlrpc fileinfo intl xml pdo_sqlite pdo_mysql pdo_pgsql
            PECL_EXTENSION: sodium
    mariadb:
        image: mariadb:10.3
        environment:
            MYSQL_ALLOW_EMPTY_PASSWORD: "no"
            MYSQL_ROOT_PASSWORD: "root"
            MYSQL_USER: 'laravel'
            MYSQL_PASSWORD: 'laravel'
            MYSQL_DATABASE: 'laravel'
        ports:
            - 3306:3306
volumes:
    html:
        driver: local
        driver_opts:
            o: bind
            type: none
            device: ./
