//THIS PLUGIN PREVENTS DELETION OF BOOTSTRAP ELEMENTS WHICH HAS DEFINED CLASS
// https://stackoverflow.com/a/29851982/731166
tinymce.PluginManager.add('mwtinymce', function(ed, link) {

    var lastContainer;
    //List of bootstrap elements not to delete
    var bootstrapElements = ["col-sm-2","col-sm-4","col-sm-8","col-sm-10",'edit', "col-sm-2", "col-sm-3", "col-sm-4"]

    if(typeof mw !== 'undefined' && typeof mw.top !== 'undefined' && typeof mw.top().app !== 'undefined' && typeof mw.top().app.liveEdit !== 'undefined' && typeof mw.top().app.liveEdit.getNoElementClasses !== 'undefined'){
        var bootstrapElements = mw.top().app.liveEdit.getNoElementClasses()
    }
    if (
        mw?.top?.app?.liveEdit?.getNoElementClasses !== undefined
    ) {
        var bootstrapElements = mw.top().app.liveEdit.getNoElementClasses();
    }

    console.log(111111111111)
    console.log(bootstrapElements)

    ed.on('keydown', function(evt) {

        var node            = ed.selection.getNode();
        var range           = ed.selection.getRng();
        var startOffset     = range.startOffset;
        var currentWrapper  = range.endContainer.parentElement.className;

        // if delete Keys pressed
        if (evt.keyCode == 8 || evt.keyCode == 46){

            if (startOffset == "0" && bootstrapElements.indexOf(lastContainer)>-1 ){
                evt.preventDefault();
                evt.stopPropagation();
                return false;
            }


        }

        lastContainer = currentWrapper;


    });



});
