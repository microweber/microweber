(()=>{"use strict";var __webpack_modules__={4839:()=>{mw.components={_rangeOnce:!1,range:function(e){var t=this._options(e),i={},n=e;"INPUT"===e.nodeName&&(e._pauseChange=!1,e.type="text",n=document.createElement("div"),$(e).removeClass("mw-range"),$(n).addClass("mw-range"),$(e).after(n),i={slide:function(t,i){e._pauseChange=!0,$(e).val(i.value).trigger("change").trigger("input"),setTimeout((function(){e._pauseChange=!1}),78)}});var o=$.extend({},{range:"min",animate:"fast"},t,i);e.min&&(o.min=parseFloat(e.min)),e.max&&(o.max=parseFloat(e.max)),e.value&&(o.value=parseFloat(e.value)),mw.$(n).slider(o).on("mousedown touchstart",(function(){mw.$(this).addClass("active")})),$(e).on("input",(function(){mw.$(n).slider("value",this.value)})),mw.components._rangeOnce||(mw.components._rangeOnce=!0,mw.$(document.body).on("mouseup touchend",(function(){mw.$(".mw-range.active").removeClass("active")})))},"color-picker":function(e){var t=this._options(e),i=$.extend({},{position:"bottom-center"},t),n=document.createElement("div");n.className="mw-ui-btn-nav mw-color-picker-holder";var o,s=document.createElement("div");s.className="mw-ui-btn",s.innerHTML='<span class="mw-ui-btn-img"></span>',n.appendChild(s),"INPUT"===e.nodeName&&(o=e,mw.$(e).addClass("mw-ui-field").after(n),n.appendChild(e),mw.$(".mw-ui-btn-img",s).css("background-color",e.value),o._time=null);var a=mw.colorPicker({element:o,position:i.position,onchange:function(e){mw.$(".mw-ui-btn-img",s).css("background-color",e),mw.$(o).trigger("change")}});mw.$(s).on("click",(function(){setTimeout((function(){a.toggle()}),10)}))},"file-uploader":function(el){var options=this._options(el),defaults={element:el},settings=$.extend({},defaults,options),ch=mw.$(el).attr("onchange");mw.fileWindow({types:"media",change:function(url){try{eval(ch)}catch(e){}}})},"modules-tabs":function(e){var t=this._options(e);t.breakPoint=100,window.live_edit_sidebar&&(mw.$(e).addClass("mw-accordion-window-height"),t.breakPoint=800);var i=this.accordion(e);new mw.tabAccordion(t,i)},"tab-accordion":function(e){var t=this._options(e),i=this.accordion(e);new mw.tabAccordion(t,i)},accordion:function(e){if(e&&!e._accordion){if($(e).is(":visible")){e._accordion=!0;var t=this._options(e),i=$.extend(t,{element:e}),n=new mw.uiAccordion(i);return $(e).hasClass("mw-accordion-window-height")&&(n._setHeight=function(){var e=mw.$(window).height()-(n.root.offset().top-mw.$(window).scrollTop());n.root.css("height",e);var t=e-n.titles.length*n.titles.eq(0).outerHeight();n.contents.css("height",t)},n._setHeight(),mw.$(window).on("load resize",(function(){n._setHeight()})),window!==top&&mw.$(top).on("load resize",(function(){n._setHeight()}))),$(e).hasClass("mw-accordion-full-height")&&(n._setHeight=function(){var t=Math.min($(e).parent().height(),mw.$(window).height());n.root.css("maxHeight",t);var i=t-n.titles.length*n.titles.eq(0).outerHeight();n.contents.css("maxHeight",i)},n._setHeight(),mw.$(window).on("load resize",(function(){n._setHeight()})),window!==top&&mw.$(top).on("load resize",(function(){n._setHeight()}))),n}setTimeout((function(){mw.components.accordion(e)}),777,e)}},postSearch:function(e){var t={keyword:e.value,limit:4};e._setValue=function(e){mw.tools.ajaxSearch(this._settings,(function(){}))},e=mw.$(e);var i=JSON.parse(e.attr("data-options")||"{}");settings=$.extend({},t,i),e[0]._settings=settings,e.wrap("<div class='mw-component-post-search'></div>"),e.after("<ul></ul>"),e.on("input focus blur",(function(t){if(!e[0].is_searching){if(e.val(),"blur"==t.type)return mw.$(this).next("ul").hide(),!1;if("focus"==t.type)return $(this).next("ul").html()&&mw.$(this).next("ul").show(),!1;e[0].is_searching=!0,this._settings.keyword=this.value,mw.$("ul",e).empty(""),e.parent().addClass("loading"),mw.tools.ajaxSearch(this._settings,(function(){var t=[];for(var i in this){var n=this[i];if("object"==typeof n){var o=document.createElement("li");o._value=n,o.innerHTML=n.title,mw.$(o).on("mousedown touchstart",(function(){e.val(this._value.title),e[0]._value=this._value,e.trigger("postSelected",[this._value]),mw.$(this.parentNode).hide()})),t.push(o)}}e.parent().removeClass("loading"),e.parent().find("ul").empty().append(t).show(),e[0].is_searching=!1}))}})),e.trigger("postSearchReady")},_options:function(e){return mw.tools.elementOptions(e)},_init:function(){mw.$('.mw-field input[type="range"]').addClass("mw-range"),mw.$("[data-mwcomponent], [data-mw-component]").each((function(){var e=this.dataset.mwComponent||this.dataset.mwcomponent;mw.components[e]&&(mw.components[e](this),mw.$(this).removeAttr("data-mwcomponent").removeAttr("data-mw-component"))})),$.each(this,(function(e){-1===e.indexOf("_")&&mw.$(".mw-"+e+", mw-"+e).not(".mw-component-ready").each((function(){mw.$(this).addClass("mw-component-ready"),mw.components[e](this)}))}))}},mw.registerComponent=function(e,t){mw.components[e]?console.warn("Component "+e+" already exists."):mw.components[e]=t}},6877:()=>{window.mw||(window.mw={}),mw.required=[],mw.require=function(e,t,i,n){if(e){var o,s;o=n?" defer ":"   ","boolean"!=typeof t&&void 0!==t||(t=t||!1),"string"==typeof t&&(s=""+t,t=i||!1),"string"==typeof i&&(s=i);var a=e,r=!1;s&&(a=s,r=!0);var l=e.split(".").pop();if(e=e.includes("//")?e:"css"!==l?mw.settings.includes_url+"api/"+e:mw.settings.includes_url+"css/"+e,r||(a=e),!~mw.required.indexOf(a)){if(mw.required.push(a),e=e.includes("?")?e+"&mwv="+mw.version:e+"?mwv="+mw.version,null!==document.querySelector('link[href="'+e+'"],script[src="'+e+'"]'))return;var c=" rel='stylesheet' ";n&&(c=" rel='preload' as='style' onload='this.onload=null;this.rel='stylesheet'' ");var d,m="css"!==l?"<script "+o+"  src='"+e+"'><\/script>":"<link "+c+" href='"+e+"' />";"object"==typeof $.fn?$(mw.head).append(m):"css"!==l?((d=document.createElement("script")).src=e,d.defer=!!o,d.setAttribute("type","text/javascript"),mw.head.appendChild(d)):(d=document.createElement("link"),n?(d.as="style",d.rel="preload",d.addEventListener("load",(e=>d.rel="stylesheet"))):d.rel="stylesheet",d.href=e,mw.head.appendChild(d))}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}var core=__webpack_require__(6877);mw.options={saveOption:function(e,t,i){if("object"!=typeof e)return!1;var n=e.group||e.option_group,o=e.key||e.option_key,s=void 0!==e.value?e.value:e.option_value;if(!n||!o||void 0===s)return!1;var a=!1;void 0!==e.lang&&(a=e.lang);var r=!1;void 0!==e.module&&(r=e.module);var l={option_group:n,option_key:o,option_value:s};return a&&(l.lang=a),r&&(l.module=r),$.ajax({type:"POST",url:mw.settings.site_url+"api/save_option",data:l,success:function(e){"function"==typeof t&&t.call(e)},error:function(e){"function"==typeof i&&i.call(e)}})},save:function(e,t){var i,n;if(e=mw.$(e)){var o=e.attr("data-id");n=i=e.attr("option-group")||e.attr("option_group")||e.attr("data-option-group");var s=null,a=mw.tools.firstParentWithClass(e[0],"module");a&&(s=a.id,s=mw.$(a).attr("for-module-id")||a.id);var r=e.attr("data-reload")||e.attr("data-refresh"),l=e.attr("data-reload")||e.attr("data-also-reload"),c=mw.$(mw.dialog.get(e).container);if(null==m&&void 0!==c)var d=c.attr("data-settings-for-module");if(null==m)var m=e.attr("data-refresh");var h,u,p,f=0,g=void 0!==c?c.attr("data-type"):void 0;if("checkbox"===e[0].type)if(h="",u=e.attr("data-value-unchecked"),p=e.attr("data-value-checked"),u&&p)h=e[0].checked?p:u;else for(var w=document.getElementsByName(e[0].name),v=(f=0,w.length);f<v;f++){var y=w[f].value;h=1==w[f].checked?""===h?y:h+","+y:h}else h=e.val();void 0===i&&void 0===i&&s&&(i=s);var b={option_key:e.attr("name"),option_group:i,option_value:h};void 0===g&&(void 0===g&&void 0!==a&&a&&$(a).attr("data-type")?(g=$(a).attr("data-type").replace("/admin",""),b.module=g):void 0!==a&&a&&$(a).attr("parent-module")&&(b.module=$(a).attr("parent-module"))),void 0!==g&&(b.module=g),void 0!==d&&(b.for_module_id=d),null!=i&&(b.id=C);var _,C=e.attr("data-custom-field-id");null!=C&&(b.id=C),(null!=(_=e.attr("data-option-type"))||null!=(_=e.attr("option-type")))&&(b.option_type=_);var x=e.attr("parent-reload");void 0!==o&&(b.id=o);var k=e.attr("lang");void 0!==k&&(b.lang=k);var S=e.attr("module");void 0!==S&&(b.module=S),$.ajax({type:"POST",url:mw.settings.site_url+"api/save_option",data:b,success:function(e){var i=null;void 0===m?i=n:r&&(i=r),("undefined"!=typeof liveEditSettings&&liveEditSettings||mw.top().win.liveEditSettings)&&!n&&s&&(i=s);var o=!1;mw.admin&&mw.top().win.mweditor&&mw.top().win.mweditor.contentWindow&&setTimeout((function(){mw.top().win.mweditor.contentWindow.mw.reload_module("#"+i)}),777),window.parent.mw&&(self!==top&&setTimeout((function(){var e=window.parent.document.getElementById(i);if(e){var t=window.mw.parent().tools.firstMatchesOnNodeOrParent(e,[".edit:not([itemprop=dateModified])"]);t||(t=window.mw.parent().tools.firstMatchesOnNodeOrParent(e,[".edit[rel=inherit]"])),t&&(window.mw.parent().wysiwyg.change(t),window.mw.parent().askusertostay=!0)}mw.reload_module_parent("#"+i),i!=n&&mw.reload_module_parent("#"+n),"undefined"!=typeof mw&&mw.top().app&&mw.top().app.editor&&mw.top().app.editor.dispatch("onModuleSettingsChanged",{moduleId:i}||{}),o=1}),777),null!=window.mw.parent().reload_module&&(mw.admin?setTimeout((function(){window.mw.parent().reload_module("#"+i),mw.options.___rebindAllFormsAfterReload()}),777):(null!=window.parent.mweditor&&window.parent.mweditor.contentWindow.mw.reload_module("#"+i,(function(){setTimeout((function(){window.mw.parent().exec("mw.admin.editor.set",window.parent.mweditor),mw.options.___rebindAllFormsAfterReload()}),777)})),null!=window.parent.mw&&window.mw.parent().reload_module("#"+i,(function(){setTimeout((function(){window.mw.parent().exec("mw.admin.editor.set",window.parent.mweditor),mw.options.___rebindAllFormsAfterReload()}),777)}))),o=1)),null!=l&&null!=window.mw&&!0!==x&&void 0!==window.mw.reload_module&&(window.mw.reload_module(l,(function(e){mw.options.___rebindAllFormsAfterReload()})),window.mw.reload_module("#"+l,(function(e){mw.options.___rebindAllFormsAfterReload()}))),0==o&&!0!==x&&null!=i&&""!=i&&(i=i.toString(),void 0!==window.mw.reload_module&&mw.reload_module_parent(i,(function(){mw.reload_module_parent("#"+i,(function(){mw.top().app.dispatch("moduleReloaded")}))}))),"function"==typeof t&&t.call(e),setTimeout((function(){mw.options.___rebindAllFormsAfterReload(),mw.top&&mw.top().app&&setTimeout((function(){mw.top().app.dispatch("moduleReloaded")}),300)}),300)}})}},tempOption:function(e,t){var i=[],n=e.getAttribute("data-mw-temp-option-save");n&&(i=JSON.parse(n));var o=t.group,s=t.key,a=i.findIndex((e=>e.group===o&&e.key===s));-1!==a?i[a]={...i[a],...t}:Array.isArray(i)?i.push(t):i=[t],e.setAttribute("data-mw-temp-option-save",JSON.stringify(i))},publishTempOptions:function(e){var t=e.querySelectorAll("[data-mw-temp-option-save]"),i=[];if(t)for(var n=0;n<t.length;n++){var o=t[n],s=o.getAttribute("data-mw-temp-option-save"),a=JSON.parse(s);if(a.length>0)for(var r=0;r<a.length;r++){var l=a[r];i.push(l)}o.removeAttribute("data-mw-temp-option-save")}if(i)for(n=0;n<i.length;n++)l=i[n],this.saveOption(l)}},mw.options._optionSaved=null,mw.options._bindedRootFormsRegistry=[],mw.options.remove_bindings=function(e){var t=mw.$(e)[0];t&&(t._optionsEvents&&(delete t._optionsEvents,t._optionsEventsClearBidings=!0),t.addClass("mw-options-form-force-rebind"),mw.$("input, select, textarea",t).not(".mw-options-form-binded-custom").each((function(){var e=mw.$(this);e&&e[0]&&e[0]._optionsEventsBinded&&delete e[0]._optionsEventsBinded})))},mw.options.form=function(e,t,i){var n=0,o=!1,s=mw.$(e),a=s[0];if(a&&(a&&s.hasClass("mw-options-form-force-rebind")&&(o=!0),a._optionsEvents||mw.$("input, select, textarea",a).not(".mw-options-form-binded-custom").each((function(){var e=mw.$(this);o&&(e[0]._optionsEventsBinded=null),e&&e[0]&&!e[0]._optionsEventsBinded&&e.hasClass("mw_option_field")&&(n++,e[0]._optionsEventsBinded=!0,a._optionsEventsClearBidings&&e.off("change input paste"),e.addClass("mw-options-form-binded"),e.on("change input paste",(function(e){var t=this.name;mw.options.___slowDownEvent(t,this,(function(){"function"==typeof a._optionsEvents.beforepost&&a._optionsEvents.beforepost.call(this),top!==self&&window.mw.parent().drag&&window.mw.parent().drag.save&&window.mw.parent().drag.save(),mw.options.save(this,a._optionsEvents.callback)}))})))})),n>0)){a._optionsEvents=a._optionsEvents||{},a._optionsEvents=$.extend({},a._optionsEvents,{callback:t,beforepost:i});var r={};"function"==typeof a._optionsEvents.beforepost&&(r.beforepost=a._optionsEvents.beforepost),r.callback=a._optionsEvents.callback,r.binded_selector=e;var l=mw.tools.cloneObject(r);mw.options._bindedRootFormsRegistry.filter((function(t){return t.binded_selector===e})).length||mw.options._bindedRootFormsRegistry.push(l)}},mw.options.___slowDownEvents={},mw.options.___slowDownEvent=function(e,t,i){void 0===mw.options.___slowDownEvents[e]&&(mw.options.___slowDownEvents[e]=null),clearTimeout(mw.options.___slowDownEvents[e]),mw.options.___slowDownEvents[e]=setTimeout((function(){i.call(t)}),700)},mw.options.___rebindAllFormsAfterReload=function(){mw.options.___slowDownEvent("___rebindAllFormsAfterReload",this,(function(){for(var e=0,t=mw.options._bindedRootFormsRegistry.length;e<t;e++){var i=mw.options._bindedRootFormsRegistry[e];if(i.binded_selector){var n=mw.$(i.binded_selector)[0];if(n){var o=null,s=null;"function"==typeof i.beforepost&&(o=i.beforepost),"function"==typeof i.callback&&(s=i.callback);var a=!1;mw.$("input, select, textarea",n).not(".mw-options-form-binded-custom").not(".mw-options-form-binded").each((function(){var e=mw.$(this);e.hasClass("mw_option_field")&&(e[0]._optionsEventsBinded||(a=!0,e.attr("autocomplete","off")))})),n._optionsEvents&&a&&s&&(n._optionsEvents=null,n._optionsEventsClearBidings=!0,mw.options.form(i.binded_selector,s,o))}}}}))},mw.pauseSave=!1,mw.askusertostay=!1,window.top===window&&(window.onbeforeunload=function(){if(mw.askusertostay)return mw.notification.warning(mw.lang("You have unsaved changes")),mw.lang("You have unsaved changes")}),window.mwd=document,window.mww=window,mw.doc=document,mw.win=window,mw.head=document.head||document.getElementsByTagName("head")[0],mw.loaded=!1,mw._random=(new Date).getTime(),mw.random=function(){return mw._random++},mw.id=function(e){return(e=e||"mw-")+mw.random()},mw.onLive=function(e){"boolean"==typeof mw.settings.liveEdit&&mw.settings.liveEdit&&e.call(this)},mw.onAdmin=function(e){window.mwAdmin&&e.call(this)},mw.target={},mw.log=function(){mw.settings.debug&&top.console.log(...arguments)},mw.$=function(e,t){if("object"==typeof e||"string"==typeof e&&-1!==e.indexOf("<"))return jQuery(e);if(t=t||document,void 0===document.querySelector)return jQuery(e,t);if("string"!=typeof e)return jQuery(e,t);try{return jQuery(t.querySelectorAll(e))}catch(i){return jQuery(e,t)}},mw.parent=function(){return window===top?window.mw:mw.tools.canAccessWindow(parent)&&parent.mw?parent.mw:window.mw},mw.top=function(){return mw.__top?mw.__top:window===top?(mw.__top=window.mw,window.mw):mw.tools.canAccessWindow(top)&&top.mw?(mw.__top=top.mw,top.mw):window.top!==window.parent?function(){for(var e=window,t=window;t&&mw.tools.canAccessWindow(t)&&(t.mw||t.parent.mw);)e=t,t=t.parent;return mw.__top=t.mw,e.mw}():(mw.__top=window.mw,window.mw)};var _jqxhr=jQuery.ajax;mw.jqxhr=_jqxhr,jQuery.ajax=function(e,t){t=t||{};var i={};return"object"==typeof e?$.extend(i,e):i.url=e,"function"==typeof i.success&&(i._success=i.success,delete i.success,i.success=function(e,t,n){200===n.status&&(e&&(e.form_data_required||e.form_data_module)?mw.extradataForm(i,e):"function"==typeof this._success&&this._success.call(this,e,t,n))}),i=$.extend({},i,t),_jqxhr(i)},$.ajaxSetup({cache:!1,error:function(e,t){422===e.status?mw.errorsHandle(e.responseJSON):200!==e.status&&0!==e.status&&(mw.notification.error("Error "+e.status+" - "+e.statusText+" - \r\n"+e.responseText),setTimeout((function(){mw.tools.loading(!1)}),333))}}),jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)},mw.getScripts=function(e,t){"string"==typeof e&&(e=e.split(","));var i=(e=e.filter((function(e){return!!e.trim()}))).length,n=0;$.each(e,(function(){var e=$("<script>");$(e).on("load",(function(){n++,i===n&&t.call()})),e[0].src=-1!==this.indexOf("//")?this:mw.settings.includes_url+"api/"+this,document.body.appendChild(e[0])}))},mw.moduleCSS=mw.module_css=function(e){if(!~mw.required.indexOf(e)){mw.required.push(e);var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,mw.head.insertBefore(t,mw.head.firstChild)}},mw.moduleJS=mw.module_js=function(e){mw.require(e,!0)},mw.load_module=function(e,t,i,n){return(n=n||{}).module=e,mw._({selector:t,params:n,done:function(){mw.settings.sortables_created=!1,"function"==typeof i&&i.call(this)}})},mw.loadModuleData=function(e,t,i,n){n=n||{},"function"==typeof t&&(i=t),t=document.createElement("div"),n.module=e,mw._({selector:t,params:n},!1,!0).done((function(e){setTimeout((function(){i.call(this,e),$(document).off("focusin.modal")}),50)}))},mw.getModule=function(e,t,i){"function"==typeof t&&(i=t),t=t||{};var n=document.createElement("div");for(var o in t)n.setAttribute(o,t[o]);mw.loadModuleData(e,n,(function(e){i.call(e)}))},mw.reload_module_intervals={},mw.reload_module_interval=function(e,t){t=t||1e3;var i={pause:!1};return mw.reload_module_intervals[e]&&clearInterval(mw.reload_module_intervals[e]),mw.reload_module_intervals[e]=setInterval((function(){i.pause||(i.pause=!0,mw.reload_module(e,(function(){i.pause=!1})))}),t),mw.reload_module_intervals.module_name},mw.reload_module_parent=function(e,t){self!==parent&&parent.mw?(parent.mw.reload_module(e,t),void 0!==top.mweditor&&"object"==typeof top.mweditor&&void 0!==top.mweditor.contentWindow?top.mweditor.contentWindow.mw.reload_module(e,t):void 0!==mw.top().win.iframe_editor_window&&"object"==typeof mw.top().win.iframe_editor_window&&void 0!==mw.top().win.iframe_editor_window.mw&&mw.top().win.iframe_editor_window.mw.reload_module(e,t),void 0!==parent.mw_preview_frame_object&&"object"==typeof parent.mw_preview_frame_object&&void 0!==parent.mw_preview_frame_object.contentWindow&&null!=parent.mw_preview_frame_object.contentWindow&&void 0!==parent.mw_preview_frame_object.contentWindow.mw&&parent.mw_preview_frame_object.contentWindow.mw.reload_module(e,t)):"undefined"!=typeof mweditor&&"object"==typeof mweditor&&void 0!==mweditor.contentWindow&&void 0!==mweditor.contentWindow.mw&&mweditor.contentWindow.mw.reload_module(e,t)},mw.reload_modules=function(e,t,i){if(e.array&&!e.slice&&(t=e.callback||e.done||e.ready,i=e.simultaneously,e=e.array),i=i||!1)for(var n=e.length,o=0,s=0;s<n;s++)mw.reload_module(e[s],(function(){++o===n&&t&&t.call()}));else if(0===e.length)t&&t.call();else{var a=e[0];e.shift(),mw.reload_module(a,(function(){mw.reload_modules(e,t,!1)}))}},mw.reload_module_everywhere=function(e,t){mw.tools.eachWindow((function(){this.mw&&this.mw.reload_module&&this.mw.reload_module(e,(function(){"function"==typeof t&&t.call(this)}))}))},mw.reload_module=function(e,t){if(e.constructor===[].constructor){for(var i=e.length,n=0,o=1;n<i;n++)mw.reload_module(e[n],(function(){++o===i&&"function"==typeof t&&t.call(),$(this).trigger("ModuleReload")}));return!1}var s=t||function(){};if(void 0!==e)if("object"==typeof e)mw._({selector:e,done:s});else{var a=e.toString().split(",");for(n=0;n<a.length;n++)if(void 0!==(e=a[n])){e=e.replace(/##/g,"#");var r=mw.$(".module[data-type='"+e+"']");if(0===r.length)try{r=$(e)}catch(e){}!function(e){for(var t=0,i=0;i<r.length;i++)mw.reload_module(r[i],(function(){++t===r.length&&"function"==typeof e&&e.call(),$(document).trigger("ModuleReload")}))}(t)}}},mw.clear_cache=function(){$.ajax({url:mw.settings.site_url+"api/clearcache",type:"POST",success:function(e){null!=mw.notification&&mw.notification.msg(e)}})},mw.temp_reload_module_queue_holder=[],mw._=function(e,t,i){mw.on&&(mw.on.DOMChangePause=!0);var n=void 0!==e.url?e.url:mw.settings.site_url+"module/",o=void 0!==e.selector?e.selector:"",s=void 0!==e.params?e.params:{};if(void 0===$(e.selector)[0])return mw.pauseSave=!1,mw.on.DOMChangePause=!1,!1;mw.session&&(mw.session.checkPause=!0);var a=$(e.selector),r=a[0],l=r.attributes;if(r.id){if(-1!==mw.temp_reload_module_queue_holder.indexOf(r.id))return;mw.temp_reload_module_queue_holder.push(r.id),setTimeout((function(){var e=mw.temp_reload_module_queue_holder.indexOf(r.id);delete mw.temp_reload_module_queue_holder[e]}),300)}if(t)void 0!==l.class&&(s.class=l.class.nodeValue),void 0!==l["data-module-name"]&&(s["data-module-name"]=l["data-module-name"].nodeValue),void 0!==l["data-type"]&&(s["data-type"]=l["data-type"].nodeValue),void 0!==l.type&&(s.type=l.type.nodeValue),void 0!==l.template&&(s.template=l.template.nodeValue),void 0!==l.ondrop&&(s.ondrop=l.ondrop.nodeValue);else for(var c in l)if(void 0!==l[c]){var d=l[c].name,m=l[c].nodeValue;void 0===s[d]&&(s[d]=m)}var h=!0;for(var u in s)s.hasOwnProperty(u)&&(h=!1);if(h)return mw.tools.removeClass(document.body,"loading"),mw.pauseSave=!1,mw.on.DOMChangePause=!1,!1;var p="true"===a.dataset("storeValues")&&{};return p&&a.find("[name]").each((function(){p[this.name]=$(this).val()})),$.post(n,s,(function(t){if(mw.session&&(mw.session.checkPause=!1),i)return mw.tools.removeClass(document.body,"loading"),mw.pauseSave=!1,mw.on.DOMChangePause=!1,!1;var n=mw.tools.parseHtml(t);p&&mw.$("[name]",n).each((function(){var e=$(this);e.val()||(e.val(p[this.name]||void 0),this.setAttribute("value",p[this.name]||""))}));var a,r="function"==typeof e.done;if(a=void 0!==s.id?s.id:n.body.querySelector(["id"]),mw.$(o).replaceWith($(n.body).html()),r&&setTimeout((function(){e.done.call($(o)[0],t),mw.trigger("moduleLoaded")}),33),!a)return mw.pauseSave=!1,mw.on.DOMChangePause=!1,!1;void 0!==mw.drag&&mw.drag.fix_placeholders(!0);var l=document.getElementById(a);mw.wysiwyg&&$(l).hasClass("module")&&mw.wysiwyg.init_editables(l),mw.on&&!r&&(mw.on.moduleReload(a,"",!0),mw.trigger("moduleLoaded")),$.fn.selectpicker&&$(".selectpicker").selectpicker(),mw.on&&(mw.on.DOMChangePause=!1),mw.tools.removeClass(document.body,"loading")})).fail((function(){mw.pauseSave=!1,"function"==typeof e.fail&&e.fail.call(o)})).always((function(){mw.pauseSave=!1}))},mw.get=function(e,t,i){var n,o=mw.settings.api_url+e,s=typeof t;n="string"===s?mw.serializeFields(t):s.constructor==={}.constructor?t:{},$.post(o,n).success((function(e){return"function"==typeof i?i.call(e):e})).error((function(e){return"function"==typeof i?i.call(e):e}))};class MicroweberBaseClass{#e={};on(e,t){return this.#e[e]?this.#e[e].push(t):this.#e[e]=[t],this}off(e,t){if(!this.#e[e])return this;if("function"==typeof t){const i=this.#e[e].indexOf(t);if(-1===i)return this;this.#e[e].splice(i,1)}else this.#e[e]=[];return this}dispatch(e,t,i){return this.#e[e]&&this.#e[e].forEach((function(e){e.call(this,t)})),this}emit(e,t){return this.dispatch(e,t)}}const base_class=MicroweberBaseClass;class MWUniversalContainer extends base_class{#t={};#i(e,t,i){e&&t&&t[e]&&(e=t[e]).call(t,i)}call(e,t){for(let i in this.#t)this.#t[i][e]&&this.#i(e,this.#t[i],t)}get(e){return this.#t[e]}getModules(){return this.#t}register(e,t){let i;i="function"==typeof t?new t:t,this.#t[e]=i,this[e]=i,this.#i("onRegister",i),this.dispatch("register")}remove(e){let t;if("string"==typeof e&&(t=e,e=this.get(e)),!t)for(let i in this.#t)if(this.#t[i]===e){t=i;break}delete this.#t[t],delete this[t],this.#i("onDestroy",e),this.dispatch("remove")}}for(var x in mw.app||(mw.admin=new MWUniversalContainer,mw.app=mw.admin),mw.widget={},window.json2url=function(e){var t=[];for(var i in e)t.push(i+"="+encodeURIComponent(e[i]));return t.join("&").replace(/undefined/g,"false")},mw.url={hashStart:"",getDomain:function(e){return e.match(/:\/\/(www\.)?(.[^/:]+)/)[2]},removeHash:function(e){return e.replace(/#.*/,"")},getHash:function(e){return-1!=e.indexOf("#")?e.substring(e.indexOf("#"),e.length):""},strip:function(e){return e.replace(/#[^#]*$/,"").replace(/\?[^\?]*$/,"")},getUrlParams:function(e){if((e=mw.url.removeHash(e)).includes("?")){for(var t=e.slice(e.indexOf("?")+1).split("&"),i={},n=0,o=t.length;n<o;n++){var s=t[n].split("=");i[s[0]]=s[1]}return i}return{}},set_param:function(e,t,i){i=i||window.location.href;var n=mw.url.getHash(i),o=mw.url.getUrlParams(i);o[e]=t;var s=json2url(o);return i=mw.url.strip(i),decodeURIComponent(i+"?"+s+n)},remove_param:function(e,t){var i=mw.url.getHash(e),n=mw.url.getUrlParams(e);delete n[t];var o=json2url(n);return e=mw.url.strip(e),decodeURIComponent(e+"?"+o+i)},getHashParams:function(e){var t=new RegExp(mw.url.hashStart,"g");if(""==(e=(e=e.replace(t,"")).replace(/\?/g,""))||"#"==e)return{};for(var i=(e=e.replace(/#/g,"")).split("&"),n={},o=0,s=i.length;o<s;o++){var a=i[o].split("=");n[a[0]]=a[1]}return n},setHashParam:function(e,t,i){i=i||mw.hash();var n=mw.url.getHashParams(i);return n[e]=t,mw.url.hashStart+decodeURIComponent(json2url(n))},windowHashParam:function(e,t){if(void 0===t)return mw.url.getHashParams(mw.hash())[e];mw.hash(mw.url.setHashParam(e,t))},deleteHashParam:function(e,t){var i=mw.url.getHashParams(e);return delete i[t],decodeURIComponent(mw.url.hashStart+json2url(i))},windowDeleteHashParam:function(e){mw.hash(mw.url.deleteHashParam(window.location.hash,e))},whichHashParamsHasBeenRemoved:function(e,t){var i=mw.url.getHashParams(e),n=mw.url.getHashParams(t),o=[];for(var s in n)void 0===i[s]&&o.push(s);return o},hashParamToActiveNode:function(e,t,i){i=i||document.body;var n=mw.url.windowHashParam(e);mw.$("."+t,i).removeClass("active");var o=mw.$("."+t+"-"+n,i);o.length>0?o.addClass("active"):mw.$("."+t+"-none",i).addClass("active")},mwParams:function(e){e=e||window.location.pathname;for(var t=(e=mw.url.removeHash(e)).split("/"),i={},n=0,o=t.length;n<o;n++)if(-1!==t[n].indexOf(":")&&-1===t[n].indexOf("http")){var s=t[n].split(":");i[s[0]]=s[1]}return i},type:function(e){if(e){if("false"===(e=e.toString()))return!1;if(-1!==e.indexOf("/images.unsplash.com/"))return"image";var t=e.split(".").pop();return"jpg,png,gif,jpeg,bmp,webp".includes(t)?"image":"pdf"==t?"pdf":e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("vimeo.com")?"vimeo":"link"}}},mw.slug={max:2048,normalize:function(e){return e?(e=e.substring(0,mw.slug.max)).replace(/[`\/~!@#$%^&№€§*()\=?'"<>\{\}\[\]\\]/g,""):""},removeSpecials:function(e){if(!(e=mw.slug.normalize(e)))return e;for(var t=0;t<29;t++){var i="àáäãâèéëêìíïîòóöôõùúüûñç·=,:;"[t],n="aaaaaeeeeiiiiooooouuuunc------"[t];e=e.replace(new RegExp(i,"g"),n)}return e},create:function(e){return e=e||"",(e=mw.slug.removeSpecials(e)).trim().toLowerCase().replace(/[-\s]+/g,"-")}},mw.on=function(e,t){e=e.trim(),$.each(e.split(" "),(function(){mw.$(mw._on._eventsRegister).on(this.toString(),t)}))},mw.trigger=function(e,t){return mw.$([window,mw._on._eventsRegister]).trigger(e,t)},mw._on={_eventsRegister:{},mouseDownAndUp:function(e,t){var i=mw.$(e);e=i[0],i.on("mousedown touchstart",(function(){this.__downTime=(new Date).getTime(),function(e){setTimeout((function(){e.__downTime=-1}),777)}(this)})),i.on("mouseup touchend",(function(e){t&&t.call(this,(new Date).getTime()-this.__downTime,e)}))},onmodules:{},moduleReload:function(e,t,i){if(i){if(void 0!==mw.on.onmodules[e])for(var n=0,o=mw.on.onmodules[e].length;n<o;n++)mw.on.onmodules[e][n].call(document.getElementById(e));return!1}"function"==typeof t?void 0!==mw.on.onmodules[e]?mw.on.onmodules[e].push(t):mw.on.onmodules[e]=[t]:"off"===t&&void 0!==mw.on.onmodules[e]&&(mw.on.onmodules[e]=[])},_hashrec:{},_hashparams:[],_hashparam_funcs:[],hashParam:function(e,t,i,n){var o;if(n)return o=mw.on._hashparams.indexOf(e),void 0!==mw.on._hashparam_funcs[o]&&mw.on._hashparam_funcs[o].call(!1,!1),!1;if(!0===i){if(-1!==(o=mw.on._hashparams.indexOf(e))){var s=location.hash,a=mw.url.getHashParams(s);if("string"==typeof a[e]&&void 0!==mw.on._hashparam_funcs[o]){var r=decodeURIComponent(a[e]);mw.on._hashparam_funcs[o].call(r,r)}}}else mw.on._hashparams.push(e),mw.on._hashparam_funcs.push(t)},hashParamEventInit:function(){var e=location.hash,t=mw.url.getHashParams(e);if(""===e||"#"===e||"#?"===e)for(var i=mw.on._hashparams.length,n=0;n<i;n++)mw.on.hashParam(mw.on._hashparams[n],"",!0);else for(var o in t)t[o]===mw.on._hashrec[o]&&void 0!==mw.on._hashrec[o]||mw.on.hashParam(o,"",!0);mw.on._hashrec=t},DOMChangePause:!1,DOMChangeTime:1500,DOMChange:function(e,t,i,n){i=i||!1,n=n||!1,e.addEventListener("input",(function(i){mw.on.DOMChangePause||(n?(clearTimeout(e._int),e._int=setTimeout((function(){t.call(e)}),mw.on.DOMChangeTime)):t.call(this))}),!1);var o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if("function"==typeof o){var s={attributes:i,childList:!0,characterData:!0};new o((function(e){e.forEach((function(e){mw.on.DOMChangePause||t.call(e.target)}))})).observe(e,s)}else e.addEventListener("DOMCharacterDataModified",(function(i){mw.on.DOMChangePause||(n?(clearTimeout(e._int),e._int=setTimeout((function(){t.call(e)}),mw.on.DOMChangeTime)):t.call(this))}),!1),e.addEventListener("DOMNodeInserted",(function(i){if(mw.tools.hasClass(i.target,"module")||mw.tools.hasParentsWithClass(i.target,"module"))return!1;mw.on.DOMChangePause||(n?(clearTimeout(e._int),e._int=setTimeout((function(){t.call(e)}),mw.on.DOMChangeTime)):t.call(this))}),!1),i&&e.addEventListener("DOMAttrModified",(function(i){"contenteditable"!==i.attrName&&(mw.on.DOMChangePause||(n?(clearTimeout(e._int),e._int=setTimeout((function(){t.call(e)}),mw.on.DOMChangeTime)):t.call(this)))}),!1)},stopWriting:function(e,t){if(null==e)return!1;e.onstopWriting||(e.onstopWriting=null),clearTimeout(e.onstopWriting),e.onstopWriting=setTimeout((function(){t.call(e)}),400)},scrollBarOnBottom:function(e,t,i){"function"==typeof e&&(i=e,e=window,t=0),"function"==typeof t&&(i=t,t=0),e._pauseCallback=!1,e.pauseScrollCallback=function(){e._pauseCallback=!0},e.continueScrollCallback=function(){e._pauseCallback=!1},mw.$(e).scroll((function(n){(e===window?document.body.scrollHeight:e.scrollHeight)-mw.$(e).scrollTop()-mw.$(e).height()<=t&&!e._pauseCallback&&i.call(e)}))},tripleClick:function(e,t){var i;(e=e||window).addEventListener("dblclick",(function(){i=setTimeout((function(){i=null}),199)})),e.addEventListener("click",(function(n){i&&(clearTimeout(i),i=null,t.call(e,n.target))}))},transitionEnd:function(e,t){mw.$(e).bind("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd otransitionend",(function(){t.call(e)}))},ones:{},one:function(e,t,i,n){if(!0!==i)void 0===mw.on.ones[e]?mw.on.ones[e]=[t]:mw.on.ones[e].push(t);else if(void 0!==mw.on.ones[e])for(var o=0,s=mw.on.ones[e].length;o<s;o++)!0===n?mw.on.ones[e][o].call("ready","ready"):mw.on.ones[e][o].call("start","start")},userIteractionInitRegister:(new Date).getTime(),userIteractionInit:function(){mw.$(document).on("mousemove touchstart click keydown resize ajaxStop",(function(){var e=(new Date).getTime();e-mw._on.userIteractionInitRegister>378&&(mw._on.userIteractionInitRegister=e,mw.trigger("UserInteraction"))}))}},mw._on)mw.on[x]=mw._on[x];mw.hashHistory=[window.location.hash],mw.prevHash=function(){var e=mw.hashHistory[mw.hashHistory.length-2];return void 0!==e?e:""},$(window).on("hashchange load",(function(e){"load"===e.type&&mw._on.userIteractionInit(),mw.on.hashParamEventInit();var t=location.hash;if(0===t.replace(/\#/g,"").indexOf("mw@")){var i=t.replace(/\#/g,"").replace("mw@",""),n=document.getElementById(i);n&&mw.tools.scrollTo(n)}if(t.includes("showpostscat")?mw.$("html").addClass("showpostscat"):mw.$("html").removeClass("showpostscat"),"hashchange"===e.type){mw.hashHistory.push(location.hash);var o=mw.hashHistory.length,s=mw.url.whichHashParamsHasBeenRemoved(mw.hashHistory[o-1],mw.hashHistory[o-2]),a=s.length,r=0;if(a>0)for(;r<a;r++)mw.on.hashParam(s[r],"",!0,!0)}})),mw.event={windowLeave:function(e){document.documentElement.addEventListener("mouseout",(function(t){t.relatedTarget||t.toElement||!e||e.call(document.body,t)}))},cancel:function(e,t){!0===t&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},key:function(e,t){return e.keyCode===parseFloat(t)},page:function(e){return 0!==(e=e.originalEvent||e).type.indexOf("touch")?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}},targetIsField:function(e){var t=(e=e.originalEvent||e).target;return"INPUT"===t.nodeName||"textarea"===t.nodeName||"select"===t.nodeName},get:function(e){return e.originalEvent||e},keyCode:function(e){return(e=mw.event.get(e)).keyCode||e.which},isKeyCode:function(e,t){return this.keyCode(e)===t},is:{comma:function(e){return 188===(e=mw.event.get(e)).keyCode},enter:function(e){return"Enter"===(e=mw.event.get(e)).key||mw.event.isKeyCode(e,13)},escape:function(e){return"Escape"===(e=mw.event.get(e)).key||mw.event.isKeyCode(e,27)},backSpace:function(e){return"Backspace"===(e=mw.event.get(e)).key||mw.event.isKeyCode(e,8)},delete:function(e){return"Delete"===(e=mw.event.get(e)).key||mw.event.isKeyCode(e,46)}}},mw.on("ComponentsLaunch",(function(){mw.components._init()})),mw.on("mwDialogShow",(function(){setTimeout((function(){mw.components._init()}),110)}));class base_class_MicroweberBaseClass{#e={};on(e,t){return this.#e[e]?this.#e[e].push(t):this.#e[e]=[t],this}off(e,t){if(!this.#e[e])return this;if("function"==typeof t){const i=this.#e[e].indexOf(t);if(-1===i)return this;this.#e[e].splice(i,1)}else this.#e[e]=[];return this}dispatch(e,t,i){return this.#e[e]&&this.#e[e].forEach((function(e){e.call(this,t)})),this}emit(e,t){return this.dispatch(e,t)}#n={};css(e,t,i){if(!this.#n[e]||i){this.#n[e]=!0;const i=document.createElement("style");i.appendChild(document.createTextNode(t)),document.head.appendChild(i)}}}const containers_base_class=base_class_MicroweberBaseClass,{TABS,TOOLS}=FilerobotImageEditor,editImage=(e,t,i)=>{const n={source:e,showCanvasOnly:!1,annotationsCommon:{fill:"#ff0000"},Text:{text:"Double click to edit text"},Rotate:{angle:90,componentType:"slider"},translations:{profile:"Profile",coverPhoto:"Cover photo",facebook:"Facebook",socialMedia:"Social Media",fbProfileSize:"180x180px",fbCoverPhotoSize:"820x312px"},Crop:{presetsItems:[{titleKey:"classicTv",descriptionKey:"4:3",ratio:4/3},{titleKey:"cinemascope",descriptionKey:"21:9",ratio:21/9}],presetsFolders:[{titleKey:"socialMedia",groups:[{titleKey:"facebook",items:[{titleKey:"profile",width:180,height:180,descriptionKey:"fbProfileSize"},{titleKey:"coverPhoto",width:820,height:312,descriptionKey:"fbCoverPhotoSize"}]}]}]},tabsIds:[TABS.FINETUNE,TABS.FILTERS,TABS.ADJUST,TABS.ANNOTATE,,TABS.RESIZE],defaultTabId:TABS.FINETUNE,defaultToolId:TOOLS.TEXT},o=new FilerobotImageEditor(t,n);return o.render({}),o};class LiveEditImageDialog extends containers_base_class{constructor(){super()}editImage(e,t){setTimeout((()=>{this.editImageUrl(e).then((e=>{t(e)}))}),300)}async editImageUrl(e){return new Promise((t=>{var i=document.createElement("div");i.style.height="calc(100vh - 300px)",i.style.minHeight="410px";const n=mw.element('\n                        <div class="d-flex justify-content-between w-100">\n                            <button class="btn" data-action="cancel">Cancel</button>\n                            <button class="btn btn-primary" data-action="save">Update</button>\n                        </div>\n                    ');let o;const s=mw.dialog({width:1e3,title:mw.lang("Edit image"),content:i,footer:n.get(0),id:"mw-edit-image--dialog"});n.find('[data-action="cancel"]').on("click",(function(){s.remove(),t()})),n.find('[data-action="save"]').on("click",(function(){mw.top().app&&mw.top().app.registerChange&&mw.top().app.registerChange(this);var e=new Image;const i=o.getCurrentImgData();e.src=i.imageData.imageBase64;const n=i.designState.adjustments,a={crop:!!n.crop.width||!!n.crop.height,isFlippedX:n.isFlippedX,isFlippedY:n.isFlippedY,rotated:0!==n.rotation};let r=!1;for(let e in a)if(!0===a[e]){r=!0;break}mw.top().app.normalizeBase64Image(e,(function(){t({src:this.src,sizeChanged:r,sizeAdjustments:a})})),s.remove()})),$(s).on("remove",(()=>{t(),mw.app.liveEdit.play()})),o=editImage(e,i,s)}))}}const live_edit_image_dialog=LiveEditImageDialog,DomHelpers={loops:{},foreachParents:function(e,t){if(!e)return!1;var i=mw.random();this.loops[i]=!0;var n=e.parentNode,o=-1;if(null!=n)for(var s=n.tagName;"BODY"!==s;){o++;var a=t.call(n,i,o);if(n=n.parentNode,!1===a||null==n||!this.loops[i]){delete this.loops[i];break}s=n.tagName}},classNamespaceDelete:function(e,t,i,n,o){let s,a;if(e.element&&e.namespace?(s=e.element,t=e.namespace,i=e.parent,n=e.namespacePosition,a=e.exceptions||[]):(s=e,a=[]),n=n||"contains",i=i||mwd,"all"!==s){if(s.className&&"function"==typeof s.className.split){for(var r=s.className.split(" "),l=(m=r.length,d=0,[]);d<m;d++)"contains"===n?r[d].includes(t)&&-1===a.indexOf(r[d])||l.push(r[d]):"starts"===n&&0!==r[d].indexOf(t)&&l.push(r[d]);s.className=l.join(" ")}}else for(var c=i.querySelectorAll(".edit *"),d=0,m=c.length;d<m;d++)mw.tools.classNamespaceDelete(c[d],t,i,n)},firstWithBackgroundImage:function(e){if(!e)return!1;if(e.style.backgroundImage)return e;var t=!1;return mw.tools.foreachParents(e,(function(e){this.style.backgroundImage&&(mw.tools.stopLoop(e),t=this)})),t},parentsOrCurrentOrderMatchOrOnlyFirstOrNone:function(e,t){return!mw.tools.hasAnyOfClassesOnNodeOrParent(e,[t[1]])||mw.tools.parentsOrCurrentOrderMatchOrOnlyFirst(e,t)},parentsOrCurrentOrderMatchOrOnlyFirst:function(e,t){for(var i=e;i&&i.classList;){var n=mw.tools.hasClass(i,t[0]),o=mw.tools.hasClass(i,t[1]);if(n&&o)return!1;if(n)return!0;if(o)return!1;i=i.parentNode}return!1},parentsOrCurrentOrderMatchOrOnlyFirstOrNone:function(e,t){for(var i=e;i&&i.classList;){var n=mw.tools.hasClass(i,t[0]),o=mw.tools.hasClass(i,t[1]);if(n&&o)return!1;if(n)return!0;if(o)return!1;i=i.parentNode}return!0},parentsOrCurrentOrderMatch:function(e,t){for(var i=e,n={a:0,b:0},o=1,s=!1;i&&i.classList;){o++;var a=mw.tools.hasClass(i,t[0]),r=mw.tools.hasClass(i,t[1]);if(a&&r)return n.a>0;if(a?(n.a=o,s=!0):r&&(n.b=o),n.b>n.a)return!!s;i=i.parentNode}return!1},parentsOrCurrentOrderMatchOrNone:function(e,t){if(!e)return!1;for(var i=e,n={a:0,b:0},o=1,s=!1;i&&i.classList;){o++;var a=mw.tools.hasClass(i,t[0]),r=mw.tools.hasClass(i,t[1]);if(a&&r)return n.a>0;if(a?(n.a=o,s=!0):r&&(n.b=o),n.b>n.a)return!!s;i=i.parentNode}return 0===n.a&&0===n.b},parentsOrCurrentOrderMatchOrOnlyFirstOrBoth:function(e,t){for(var i=e;i&&i.classList;){var n=mw.tools.hasClass(i,t[0]),o=mw.tools.hasClass(i,t[1]);if(n&&o)return!0;if(n)return!0;if(o)return!1;i=i.parentNode}return!1},matchesAnyOnNodeOrParent:function(e,t){for(var i=e;i&&i.classList;){for(var n=0;n<t.length;n++)if(mw.tools.matches(i,t[n]))return!0;i=i.parentNode}return!1},firstMatchesOnNodeOrParent:function(e,t){if(t){"string"==typeof t&&(t=[t]);for(var i=e;i&&i.classList;){for(var n=0;n<t.length;n++)if(mw.tools.matches(i,t[n]))return i;i=i.parentNode}return!1}},lastMatchesOnNodeOrParent:function(e,t){if(t){"string"==typeof t&&(t=[t]);for(var i,n=e;n&&n.classList;){for(var o=0;o<t.length;o++)mw.tools.matches(n,t[o])&&(i=n);n=n.parentNode}return i}},hasAnyOfClassesOnNodeOrParent:function(e,t){for(var i=e;i&&i.classList;){for(var n=0;n<t.length;n++)if(mw.tools.hasClass(i,t[n]))return!0;i=i.parentNode}return!1},hasClass:function(e,t){return null!==e&&("string"==typeof e?e.split(" ").indexOf(t)>-1:"object"==typeof e&&mw.tools.hasClass(e.className,t))},hasAllClasses:function(e,t){if(e){for(var i=0,n=e.className.trim().split(" ");i<t.length;i++)if(-1===n.indexOf(t[i]))return!1;return!0}},hasAnyOfClasses:function(e,t){if(e){for(var i=0,n=t.length,o=e.className;i<n;i++)if(mw.tools.hasClass(o,t[i]))return!0;return!1}},hasParentsWithClass:function(e,t){if(e){for(var i=e.parentNode;i&&i.classList;){if(mw.tools.hasClass(i,t))return!0;i=i.parentNode}return!1}},hasParentWithId:function(e,t){if(e){for(var i=e.parentNode;i&&i.classList;){if(i.id===t)return!0;i=i.parentNode}return!1}},hasChildrenWithTag:function(e,t){t=t.toLowerCase();var i=!1;return mw.tools.foreachChildren(e,(function(e){this.nodeName.toLowerCase()===t&&(i=!0,mw.tools.stopLoop(e))})),i},hasParentsWithTag:function(e,t){if(e&&t){t=t.toLowerCase();for(var i=e.parentNode;i&&i.classList;){if(i.nodeName.toLowerCase()===t)return!0;i=i.parentNode}return!1}},hasHeadingParent:function(e){if(e){for(var t=/^(h[1-6])$/i,i=e.parentNode;i&&i.classList;){if(t.test(i.nodeName.toLowerCase()))return!0;i=i.parentNode}return!1}},addClass:function(e,t){if(!t||!e)return!1;if((!e.fn||(e=e[0]))&&("string"==typeof t&&(t=t.trim()),e)){var i=t.split(" "),n=0;if(i.length>1)for(;n<i.length;n++)mw.tools.addClass(e,i[n]);else"object"==typeof e&&(e.classList?e.classList.add(t):mw.tools.hasClass(e.className,t)||(e.className+=" "+t)),"string"==typeof e&&(mw.tools.hasClass(e,t)||(e+=" "+t))}},removeClass:function(e,t){if("string"==typeof t&&(t=t.trim()),t&&e){if(null===e)return!1;if(!e.fn||(e=e[0])){if(void 0===e)return!1;if(e.constructor!==[].constructor){if("object"==typeof t)var i=t;else i=t.split(" ");if(n=0,i.length>1)for(;n<i.length;n++)mw.tools.removeClass(e,i[n]);else i.length&&(e.classList&&t?e.classList.remove(t):mw.tools.hasClass(e.className,t)&&(e.className=(e.className+" ").replace(t+" ","").replace(/\s{2,}/g," ").trim()))}else for(var n=0,o=e.length;n<o;n++)mw.tools.removeClass(e[n],t)}}},isEventOnElement:function(e,t){return e.target===t||(mw.tools.foreachParents(e.target,(function(){if(e.target===t)return!0})),!1)},isEventOnElements:function(e,t){for(var i=t.length,n=0;n<i;n++)if(e.target===t[n])return!0;var o=!1;return mw.tools.foreachParents(e.target,(function(){for(var i=t.length,n=0;n<i;n++)e.target===t[n]&&(o=!0)})),o},isEventOnClass:function(e,t){return!(!mw.tools.hasClass(e.target,t)&&!mw.tools.hasParentsWithClass(e.target,t))},firstChildWithClass:function(e,t){var i;return mw.tools.foreachChildren(e,(function(e){1===this.nodeType&&mw.tools.hasClass(this,t)&&(mw.tools.stopLoop(e),i=this)})),i},firstChildWithTag:function(e,t){var i;return t=t.toLowerCase(),mw.tools.foreachChildren(e,(function(e){this.nodeName.toLowerCase()===t&&(i=this,mw.tools.stopLoop(e))})),i},hasChildrenWithClass:function(e,t){var i=!1;return mw.tools.foreachChildren(e,(function(){mw.tools.hasClass(this.className,t)&&(i=!0)})),i},parentsOrder:function(e,t){for(var i=[],n={},o=t.length,s=0,a=-1;s<o;s++)n[t[s]]=-1;if(!e)return n;for(var r=e.parentNode;r&&r.classList;){a++;var l=r.className;for(s=0;s<o;s++)mw.tools.hasClass(l,t[s])&&-1===i.indexOf(t[s])&&(n[t[s]]=a,i.push(t[s]));r=r.parentNode}return n},parentsAndCurrentOrder:function(e,t){for(var i=[],n={},o=t.length,s=0,a=-1;s<o;s++)n[t[s]]=-1;if(!e)return n;for(var r=e;r&&r.classList;){a++;var l=r.className;for(s=0;s<o;s++)mw.tools.hasClass(l,t[s])&&-1===i.indexOf(t[s])&&(n[t[s]]=a,i.push(t[s]));r=r.parentNode}return n},firstParentWithClass:function(e,t){if(!e)return!1;for(var i=e.parentNode;i&&i.classList;){if(i.classList.contains(t))return i;i=i.parentNode}return!1},firstParentOrCurrentWithClass:function(e,t){if(!e)return!1;for(var i=e;i&&i.classList;){if(mw.tools.hasClass(i,t))return i;i=i.parentNode}return!1},firstBlockLikeLevel:function(e){for(var t=["TD","DIV","LI","DD","DT","H1","H2","H3","H4","H5","H6","MAIN","HEADER","P"];e&&e.classList;){if(mw.tools.isBlockLevel(e)||-1!==t.indexOf(e.nodeName))return e;e=e.parentNode}},firstBlockLevel:function(e){for(;e&&e.classList;){if(mw.tools.isBlockLevel(e))return e;e=e.parentNode}},firstNotInlineLevel:function(e){if(1!==e.nodeType&&(e=e.parentNode),e)for(;e&&e.classList;){if(!mw.tools.isInlineLevel(e))return e;e=e.parentNode}},firstParentOrCurrentWithId:function(e,t){if(!e)return!1;for(var i=e;i&&e.classList;){if(i.id===t)return i;i=i.parentNode}return!1},firstParentOrCurrentWithAllClasses:function(e,t){if(!e)return!1;for(var i=e;i&&i.classList;){if(mw.tools.hasAllClasses(i,t))return i;i=i.parentNode}return!1},firstParentOrCurrentWithAnyOfClasses:function(e,t){if(!e)return!1;for(var i=e;i&&i.classList;){if(!i)return!1;if(mw.tools.hasAnyOfClasses(i,t))return i;i=i.parentNode}return!1},lastParentWithClass:function(e,t){if(e){for(var i=!1,n=e.parentNode;n&&n.classList;)mw.tools.hasClass(n,t)&&(i=n),n=n.parentNode;return i}},firstParentWithTag:function(e,t){if(e&&t){t="string"!=typeof t?t:[t];for(var i=e.parentNode;i&&i.classList;){if(-1!==t.indexOf(i.nodeName.toLowerCase()))return i;i=i.parentNode}return!1}},firstParentOrCurrentWithTag:function(e,t){if(e&&t){t="string"!=typeof t?t:[t];for(var i=e;i&&i.classList;){if(-1!==t.indexOf(i.nodeName.toLowerCase()))return i;i=i.parentNode}return!1}},generateSelectorForNode:function(e,t){if(void 0===t&&(t=!0),null===e||3===e.nodeType)return!1;if("BODY"===e.nodeName)return"body";if(mw.tools.hasClass(e,"edit")){var i=e.getAttribute("field"),n=e.getAttribute("rel");if(i&&n)return'.edit[field="'+i+'"][rel="'+n+'"]'}if(t&&!e.id&&e&&e.classList&&!e.classList.contains("edit")&&mw.tools.isEditable(e)&&(e.id=mw.id("mw-element-")),e.id)return"#"+e.id;if(e.className&&"function"==typeof e.className.trim)var o=e.className.trim()?"."+e.className.trim().split(" ").filter((function(e){return"changed"!==e&&"module-over"!==e&&"mw-bg-mask"!==e&&"element-current"!==e})).join("."):e.nodeName.toLocaleLowerCase();else o=e.nodeName.toLocaleLowerCase();return o=o.replace(/\.\./g,"."),mw.tools.foreachParents(e,(function(e){if(this.id)return o="#"+this.id+" > "+o,mw.tools.stopLoop(e),!1;var t;t=this&&this.className&&"function"==typeof this.className.trim?this.nodeName.toLocaleLowerCase()+"."+this.className.trim().split(" ").join("."):this.nodeName.toLocaleLowerCase(),o=t+" > "+o})),o.replace(/.changed/g,"").replace(/.element-current/g,"").replace(/.module-over/g,"")}},iframeAutoHeight=function(e,t){if((t=t||{}).maxHeightWindowScroll=t.maxHeightWindowScroll||null,(e=mw.$(e)[0])&&"false"!==e.dataset.autoHeight){var i=document.createElement("div");i.className="mw-iframe-auto-height-detector",i.id=mw.id();var n=function(){if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.body){var t=e.contentWindow.document.querySelector(".mw-iframe-auto-height-detector");t?t!==e.contentWindow.document.body.lastChild&&e.contentWindow.document.body.appendChild(t):e.contentWindow.document.body.appendChild(i),e.contentWindow.mw&&(e.contentWindow.mw._iframeDetector=i)}};setTimeout((function(){n()}),100),e.style.minHeight="0px",t.maxHeightWindowScroll?(e.style.maxHeight=t.maxHeightWindowScroll,e.style.overflow="auto",e.scrolling="auto"):(e.scrolling="auto",e.style.overflow="hidden"),mw.$(e).on("load resize",(function(){mw.tools.canAccessIFrame(e)?e.contentWindow.document.body&&(e.contentWindow.document.querySelector(".mw-iframe-auto-height-detector")||(n(),t.maxHeightWindowScroll?(e.style.maxHeight=t.maxHeightWindowScroll,e.style.overflow="auto",e.scrolling="auto"):(e.scrolling="auto",e.style.overflow="hidden"))):console.log("Iframe can not be accessed.",e)})),e._intPause=!1,e._int=setInterval((function(){if(!e._intPause&&e.parentNode&&e.contentWindow&&e.contentWindow.document.body){var t=i.getBoundingClientRect().top+i.offsetHeight;if(e._currHeight=e._currHeight||0,t&&t!==e._currHeight){e._currHeight=t,e.style.height=Math.max(t)+"px";var n=Math.max(e.contentWindow.document.documentElement.scrollHeight,e.contentWindow.document.body.scrollHeight);n>e._currHeight&&(e._currHeight=n,e.style.height=n+"px"),mw.$(e).trigger("bodyResize")}}else e.parentElement||clearInterval(e._int)}),77)}};class AdminTools{constructor(e){this._app=e,this.init()}#o=!1;init(){this.#o||(this.#o=!0,this.extend(DomHelpers),this.iframeAutoHeight=iframeAutoHeight)}index(e,t,i){var n;e=mw.$(e)[0],i=i||e.tagName.toLowerCase();for(var o=0,s=(n=(t=t||e.parentNode).constructor===[].constructor?t:mw.$(i,t)).length;o<s;o++)if(e===n[o])return o}extend(e={}){for(let t in e)this[t]=e[t]}}const css=null;class AdminFilamentHelpers extends base_class{constructor(e={}){super()}}const admin_filament_helpers=AdminFilamentHelpers;class AdminFilament extends base_class{helpers=null;constructor(){super(),this.helpers=new admin_filament_helpers,document.addEventListener("livewire:init",(()=>{this.init()}))}init(){this.hookOptionSaved(),this.hookLivewireLoadingState()}hookLivewireLoadingState(){Livewire.hook("commit.prepare",(({component:e,commit:t})=>{this.addLoadingClassToBody()})),Livewire.hook("message.sent",((e,t)=>{this.addLoadingClassToBody()})),Livewire.hook("message.processed",((e,t)=>{this.removeLoadingClassToBody()}))}addLoadingClassToBody(){document.body.classList.add("mw-livewire-loading")}timeout=null;removeLoadingClassToBody(){clearTimeout(this.timeout),this.timeout=setTimeout((function(){document.body.classList.remove("mw-livewire-loading")}),500)}hookOptionSaved(){Livewire.on("mw-option-saved",(function(e){void 0!==e.optionGroup&&self!==top&&void 0!==top.mw&&void 0!==top.mw.top&&void 0!==top.mw.top().app&&void 0!==top.mw.top().app.liveEdit&&top.mw.top().reload_module_everywhere("#"+e.optionGroup)}))}}class AdminModules extends base_class{getModuleSettingsUrl(e,t={}){var i=route("live_edit.module_settings");"undefined"!=typeof mw&&void 0!==mw.settings&&"object"==typeof mw.settings.liveEditModuleSettingsUrls&&mw.settings.liveEditModuleSettingsUrls[e]&&"object"==typeof mw.settings.liveEditModuleSettingsUrls&&mw.settings.liveEditModuleSettingsUrls[e]&&(i=mw.settings.liveEditModuleSettingsUrls[e]);var n=i;return t&&"object"==typeof t&&Object.keys(t).length>0&&(n=i+"?"+json2url(t)),n}}class containers_base_class_MicroweberBaseClass{#e={};on(e,t){return this.#e[e]?this.#e[e].push(t):this.#e[e]=[t],this}off(e,t){if(!this.#e[e])return this;if("function"==typeof t){const i=this.#e[e].indexOf(t);if(-1===i)return this;this.#e[e].splice(i,1)}else this.#e[e]=[];return this}dispatch(e,t,i){return this.#e[e]&&this.#e[e].forEach((function(e){e.call(this,t)})),this}emit(e,t){return this.dispatch(e,t)}}const services_containers_base_class=containers_base_class_MicroweberBaseClass;class SingleFilePickerComponent extends services_containers_base_class{constructor(e={}){super();const t={canEdit:!0,canDelete:!0,element:null,template:null,document,id:mw.id(),accept:"images",templatePrepare:()=>{this.file?(this.root.querySelector(`#js-preview-image-wrapper-${this.id}`).style.display="",this.root.querySelector(`#js-dropzone-image-${this.id}`).style.display="none"):(this.root.querySelector(`#js-preview-image-wrapper-${this.id}`).style.display="none",this.root.querySelector(`#js-dropzone-image-${this.id}`).style.display="")}};this.settings=Object.assign({},t,e),this.document=this.settings.document,this.element=this.settings.element,this.file=this.settings.file,this.id=this.settings.id,"string"==typeof this.element&&(this.element=this.document.querySelector(this.settings.element)),this.window=this.settings.document.defaultView,this.init()}templatePrepare(){this.settings.templatePrepare.call(this),this.makePreview(),this.root.querySelectorAll('[data-fpc-action="edit"]').forEach((e=>{e.disabled=!this.#s(this.file)}))}template(){const e=this.id,t=this.settings.template||`\n            <div class="mw-filepicker-component" id="root-${e}">\n                <div id="js-preview-image-wrapper-${e}" style="display:none">\n                    <div class="d-flex justify-content-between">\n                        <div data-fpc-action="selectFile">\n                             <div data-fpc-action="preview"></div>\n                        </div>\n                        <div class="d-flex gap-2 justify-content-between w-100">\n                            <div class="form-control-live-edit-label-wrapper d-flex align-items-center">\n                                <button type="button" class="mw-liveedit-button-actions-component btn-sm btn-primary js-select-file-${e}" data-fpc-action="selectFile" title="${mw.lang("Change")}">\n\n                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"/></svg>\n\n                                </button>\n                            </div>\n                            ${this.settings.canEdit?`\n                            <div class="form-control-live-edit-label-wrapper d-flex align-items-center">\n                                <button type="button" class="mw-liveedit-button-actions-component"  id="js-edit-image-${e}" title="${mw.lang("Edit")}"  data-fpc-action="edit">\n                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"> <path d="M22.7 14.3L21.7 15.3L19.7 13.3L20.7 12.3C20.8 12.2 20.9 12.1 21.1 12.1C21.2 12.1 21.4 12.2 21.5 12.3L22.8 13.6C22.9 13.8 22.9 14.1 22.7 14.3M13 19.9V22H15.1L21.2 15.9L19.2 13.9L13 19.9M11.21 15.83L9.25 13.47L6.5 17H13.12L15.66 14.55L13.96 12.29L11.21 15.83M11 19.9V19.05L11.05 19H5V5H19V11.31L21 9.38V5C21 3.9 20.11 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H11V19.9Z"></path></svg>\n                                </button>\n                            </div>\n                            `:""}\n                            ${this.settings.canDelete?`\n                                <div class="form-control-live-edit-label-wrapper d-flex align-items-center">\n                                    <button type="button" class="mw-liveedit-button-actions-component js-remove-file-${e}"  data-fpc-action="remove">\n                                        <svg class="text-danger" fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"></path></svg>\n                                    </button>\n                                </div>\n\n                            `:""}\n                        </div>\n                    </div>\n                </div>\n\n\n                <div id="js-dropzone-image-${e}" class="dropzone mw-dropzone js-select-file-${e}" style="display:none" data-fpc-action="selectFile">\n                    <div class="d-flex flex-column align-items-center gap-3">\n                        <div class="d-flex align-items-center justify-content-center" style="background:rgba(0,0,0,0.11);color:#000;width:40px;height:40px; border-radius:100%; font-size:28px;">\n                            <i class="mdi mdi-plus"></i>\n                        </div>\n\n                        <div>\n                            <span>\n                                <b>20MB Max</b>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;return this.element.innerHTML=t,this.launch(),this.templatePrepare(),this}#s(e){return/^https?:\/\/.+\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(e)}#a(e){return/^https?:\/\/.+\.(mp4|ogg|3gp|webm)$/.test(e)}#r(e){return/^https?:\/\/.+\.(mp3)$/.test(e)}previewImage(){return`<img src="${this.file}" class="w-100" style="border-radius:4px;">`}previewVideo(){return`<video width="100px" src="${this.file}" muted loop playsinline style="border-radius:4px;"></video>`}previewAudio(){return`<video width="100px" src="${this.file}" controls playsinline style="border-radius:4px;"></video>`}generatePreview(){return this.#s(this.file)?this.previewImage():this.#a(this.file)?this.previewVideo():this.#r(this.file)?this.previewAudio():""}makePreview(){const e=this.root.querySelectorAll('[data-fpc-action="preview"]');this.file?e.forEach((e=>{const t=this.generatePreview();e.dataset.preview=!!t,e.innerHTML=t})):e.forEach((e=>{e.innerHTML=""}))}setFile(e){this.file=e,this.templatePrepare()}removeFile(){const e=this.root.querySelectorAll('[data-fpc-action="preview"]');this.file=null,this.root.querySelectorAll('[data-fpc-action="preview"]'),e.forEach((e=>{e.innerHTML=""})),this.templatePrepare()}#l={edit:async(e,t,i)=>{var n=await mw.top().app.editImageDialog.editImageUrl(this.file);n&&(this.file=n,this.templatePrepare(),this.dispatch("change"),this.dispatch("edit"))},remove:(e,t,i)=>{this.removeFile(),this.dispatch("change"),this.dispatch("remove")},selectFile:(e,t,i)=>{var n,o=new mw.filePicker({type:this.settings.accept,label:!1,autoSelect:!1,footer:!0,_frameMaxHeight:!0,onResult:e=>{var t=e.src?e.src:e;t&&(t=t.toString(),this.file=t,this.templatePrepare(),n.remove(),this.dispatch("change"),this.dispatch("selectFile"))}});n=mw.top().dialog({id:"mw-file-picker-dialog",content:o.root,title:mw.lang("Select file"),footer:!1,width:860})}};handleEvents(){this.root.querySelectorAll("[data-fpc-action]").forEach((e=>{const t=e.dataset.fpcAction.trim();t&&this.#l[t]&&e.addEventListener("click",(i=>this.#l[t](i,e,this)))}))}launch(){this.root=this.document.getElementById(`root-${this.id}`),this.handleEvents()}init(){if(this.element)return this.template(),this}}function normalizeBase64Image(e,t){var i,n;if(void 0!==e.src&&0===e.src.indexOf("data:image/"))i=e.src.split("/")[1].split(";")[0],n={file:e.src,name:mw.random().toString(36)+"."+i},$.post(mw.settings.api_url+"media/upload",n,(function(i){i=$.parseJSON(i),e.src=i.src,mw.top().app.registerChange?.call(void 0,e),mw.trigger("imageSrcChanged",[e,e.src]),"function"==typeof t&&t.call(e)}));else if(-1!==e.style.backgroundImage.indexOf("data:image/")){var o=e.style.backgroundImage.replace(/url\(/g,"").replace(/\)/g,"");i=o.split("/")[1].split(";")[0],n={file:o,name:mw.random().toString(36)+"."+i},$.post(mw.settings.api_url+"media/upload",n,(function(i){i=$.parseJSON(i),e.style.backgroundImage="url('"+i.src+"')",mw.top().app.registerChange?.call(void 0,e),"function"==typeof t&&t.call(e)}))}}function normalizeBase64Images(e,t){var i=(e=e||document.body).querySelectorAll(".edit img[src*='data:image/'], .edit [style*='data:image/'][style*='background-image'], .mw-editor-area img[src*='data:image/'], .mw-editor-area [style*='data:image/'][style*='background-image']"),n=i.length,o=0,s=0;if(n>0){var a,r=document.getElementById("main-save-btn");for(r&&(a=r.disabled,r.disabled=!0);o<n;o++)mw.tools.addClass(i[o],"element"),mw.wysiwyg.normalizeBase64Image(i[o],(function(){++s===n&&("function"==typeof t&&setTimeout((function(){t.call()}),10),r&&(r.disabled=a))}))}else"function"==typeof t&&setTimeout((function(){t.call()}),10)}mw.lang=function(e){var t=e.trim().replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"");return mw._lang[t]?mw._lang[t]:e},mw.msg=mw._lang={uniqueVisitors:"Unique visitors",allViews:"All views",date:"Date",weekDays:{regular:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},months:{regular:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"]},ok:"OK",category:"Category",published:"Published",unpublished:"Unpublished",contentunpublished:"Content is unpublished",contentpublished:"Content is published",save:"Save",saving:"Saving",saved:"Saved",settings:"Settings",cancel:"Cancel",remove:"Remove",close:"Close",to_delete_comment:"Are you sure you want to delete this comment",del:"Are you sure you want to delete this?",save_and_continue:"Save &amp; Continue",before_leave:"Leave without saving",session_expired:"Your session has expired",login_to_continue:"Please login to continue",more:"More",templateSettingsHidden:"Template settings",less:"Less",product_added:"Your product is added to cart",no_results_for:"No results for",switch_to_modules:"Switch to Modules",switch_to_layouts:"Switch to Layouts",loading:"Loading",edit:"Edit",change:"Change",submit:"Submit",settingsSaved:"Settings are saved",addImage:"Add new image"},mw.object={extend:function(){var e={},t=!1,i=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);for(var o=function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=mw.object.extend(!0,e[n],i[n]):e[n]=i[n])};i<n;i++)o(arguments[i]);return e}},mw.iconResolver=e=>{if(void 0===e)return"";const t={home:"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z'/></svg>",shop:"<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 96 960 960' width='24'><path d='M240 976q-33 0-56.5-23.5T160 896V416q0-33 23.5-56.5T240 336h80q0-66 47-113t113-47q66 0 113 47t47 113h80q33 0 56.5 23.5T800 416v480q0 33-23.5 56.5T720 976H240Zm0-80h480V416h-80v80q0 17-11.5 28.5T600 536q-17 0-28.5-11.5T560 496v-80H400v80q0 17-11.5 28.5T360 536q-17 0-28.5-11.5T320 496v-80h-80v480Zm160-560h160q0-33-23.5-56.5T480 256q-33 0-56.5 23.5T400 336ZM240 896V416v480Z'></path></svg>",page:"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M240 976q-33 0-56.5-23.5T160 896V256q0-33 23.5-56.5T240 176h320l240 240v480q0 33-23.5 56.5T720 976H240Zm280-520V256H240v640h480V456H520ZM240 256v200-200 640-640Z'/></svg>",category:"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M160 896q-33 0-56.5-23.5T80 816V336q0-33 23.5-56.5T160 256h240l80 80h320q33 0 56.5 23.5T880 416v400q0 33-23.5 56.5T800 896H160Zm0-560v480h640V416H447l-80-80H160Zm0 0v480-480Z'/></svg>",dynamic:"<svg xmlns='http://www.w3.org/2000/svg'   fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M200 936q-33 0-56.5-23.5T120 856V296q0-33 23.5-56.5T200 216h440l200 200v440q0 33-23.5 56.5T760 936H200Zm0-80h560V456H600V296H200v560Zm80-80h400v-80H280v80Zm0-320h200v-80H280v80Zm0 160h400v-80H280v80Zm-80-320v160-160 560-560Z'/></svg>",trash:"<svg xmlns='http://www.w3.org/2000/svg' fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M280 936q-33 0-56.5-23.5T200 856V336h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680 936H280Zm400-600H280v520h400V336ZM360 776h80V416h-80v360Zm160 0h80V416h-80v360ZM280 336v520-520Z'/></svg>","add-subpage-icon-tree":"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M440 816h80V696h120v-80H520V496h-80v120H320v80h120v120ZM240 976q-33 0-56.5-23.5T160 896V256q0-33 23.5-56.5T240 176h320l240 240v480q0 33-23.5 56.5T720 976H240Zm280-520V256H240v640h480V456H520ZM240 256v200-200 640-640Z'/></svg>","edit-category-icon-tree":"<svg xmlns='http://www.w3.org/2000/svg' fill='currentColor'  height='24' viewBox='0 96 960 960' width='24'><path d='M200 856h56l345-345-56-56-345 345v56Zm572-403L602 285l56-56q23-23 56.5-23t56.5 23l56 56q23 23 24 55.5T829 396l-57 57Zm-58 59L290 936H120V766l424-424 170 170Zm-141-29-28-28 56 56-28-28Z'/></svg>","delete-category-icon-tree":"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M280 936q-33 0-56.5-23.5T200 856V336h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680 936H280Zm400-600H280v520h400V336ZM360 776h80V416h-80v360Zm160 0h80V416h-80v360ZM280 336v520-520Z'/></svg>","add-subcategory-icon-tree":"<svg xmlns='http://www.w3.org/2000/svg'  fill='currentColor' height='24' viewBox='0 96 960 960' width='24'><path d='M560 736h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80ZM160 896q-33 0-56.5-23.5T80 816V336q0-33 23.5-56.5T160 256h240l80 80h320q33 0 56.5 23.5T880 416v400q0 33-23.5 56.5T800 896H160Zm0-560v480h640V416H447l-80-80H160Zm0 0v480-480Z'/></svg>","add-post-icon-tree":"<svg xmlns='http://www.w3.org/2000/svg' height='24'  fill='currentColor' viewBox='0 96 960 960' width='24'><path d='M200 936q-33 0-56.5-23.5T120 856V296q0-33 23.5-56.5T200 216h360v80H200v560h560V496h80v360q0 33-23.5 56.5T760 936H200Zm120-160v-80h320v80H320Zm0-120v-80h320v80H320Zm0-120v-80h320v80H320Zm360-80v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z'/></svg>",noop:"",settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z" /></svg>'};return t.setting=t.settings,t["add-product-icon-tree"]=t.shop,t[e]||""};const progressDefaults={skin:"mw-ui-progress",action:`${mw.lang("Loading")}...`,progress:0},Progress=function(e){if("string"==typeof e.element&&(e.element=mw.$(e.element)[0]),null===e.element||!e.element)return!1;if(e.element.querySelector(".mw-ui-progress-bar"))return e.element.progressOptions.show(),e.element.progressOptions;(e=$.extend({},progressDefaults,e)).progress>100&&(e.progress=100),e.progress<0&&(e.progress=0);var t=document.createElement("div");t.className=e.skin,t.innerHTML='<div class="mw-ui-progress-bar" style="width: '+e.progress+'%;"></div><div class="mw-ui-progress-info">'+e.action+'</div><span class="mw-ui-progress-percent">'+e.progress+"%</span>",t.progressInfo=e;var i={progress:t,show:function(){this.progress.style.display=""},hide:function(){this.progress.style.display="none"},remove:function(){t.progressInfo.element.progressOptions=void 0,mw.$(this.progress).remove()},set:function(e,i){e>100&&(e=100),e<0&&(e=0),i=i||this.progress.progressInfo.action,mw.$(".mw-ui-progress-bar",this.progress).css("width",e+"%"),mw.$(".mw-ui-progress-percent",this.progress).html(e+"%"),t.progressInfo.element.progressOptions.show()}};return t.progressOptions=e.element.progressOptions=i,e.element.appendChild(t),i},Loading=function(e,t,i){function n(t,i,n){n=n||"normal",mw.tools.removeClass(t,"mw-progress-slow"),mw.tools.removeClass(t,"mw-progress-normal"),mw.tools.removeClass(t,"mw-progress-fast"),mw.tools.addClass(t,"mw-progress-"+n),e.__loadingTime=setTimeout((function(){t.querySelector(".mw-progress-index").style.width=i+"%"}),10)}if("boolean"==typeof e&&(t=!!e,e=document.body),"number"==typeof e&&(t=e,e=document.body),e!==document&&e!==document.documentElement||(e=document.body),null===(e=mw.$(e)[0])||!e)return!1;e.__loadingTime&&clearTimeout(e.__loadingTime),mw.tools.hasClass(e,"mw-loading");var o=e.querySelector(".mw-progress");o||((o=document.createElement("div")).className="mw-progress",o.innerHTML='<div class="mw-progress-index"></div>',e===document.body&&(o.style.position="fixed"),e.appendChild(o)),"hide"!==t?("static"===getComputedStyle(e).position&&(e.style.position="relative"),t?!0===t?n(o,95,i||"slow"):"number"==typeof t&&n(o,t=(t=t<=100?t:100)>=0?t:0,i):(o&&n(o,100,i||"fast"),e.__loadingTime=setTimeout((function(){mw.$(e).removeClass("mw-loading-defaults mw-loading"),mw.$(o).remove()}),700))):o.remove()},Helpers={fragment:function(){return this._fragment||(this._fragment=document.createElement("div"),this._fragment.style.visibility="hidden",this._fragment.style.position="absolute",this._fragment.style.width="1px",this._fragment.style.height="1px",document.body.appendChild(this._fragment)),this._fragment},_isBlockCache:{},isBlockLevel:function(e){return!(!e||3===e.nodeType)&&-1!==["flex","block","grid","table","list-item","table-row","table-cell","table-row-group","table-header-group","table-footer-group","table-column-group","table-column","table-caption","table-cell","table-row","inline-block","inline-table","inline-flex","inline-grid","flow-root","grid","grid-item","grid-line","grid-row","grid-column","grid-area","grid-auto-rows","grid-auto-columns","grid-template-rows","grid-template-columns","grid-template-areas","grid-template","grid-auto-flow","grid-row-gap","grid-column-gap","grid-gap","grid-row-start","grid-row-end","grid-column-start","grid-column-end","grid-area"].indexOf(getComputedStyle(e).display)},_isInlineCache:{},isInlineLevel:function(e){if(3===e.nodeType)return!1;var t=e.nodeName;if(void 0!==this._isInlineCache[t])return this._isInlineCache[t];var i=document.createElement(t);return this.fragment().appendChild(i),this._isInlineCache[t]="inline"===getComputedStyle(i).display&&"BR"!==e.nodeName,this.fragment().removeChild(i),this._isInlineCache[t]},elementOptions:function(e){var t=(e.dataset.options||"").trim().split(","),i={};return t[0]?($.each(t,(function(){var e=this.split(":"),t=e[1].trim();t&&("true"===t||"false"===t?t="true"===t:/\D/.test(t)||(t=parseInt(t,10))),i[e[0].trim()]=t})),i):i},createAutoHeight:function(){window.thismodal&&thismodal.iframe?mw.tools.iframeAutoHeight(thismodal.iframe,"now"):mw.top().win.frameElement&&mw.top().win.frameElement.contentWindow===window?mw.tools.iframeAutoHeight(mw.top().win.frameElement,"now"):window.top!==window&&mw.top().$("iframe").each((function(){try{this.contentWindow===window&&mw.tools.iframeAutoHeight(this,"now")}catch(e){}}))},collision:function(e,t){if(e&&t){e=mw.$(e),t=mw.$(t);var i=e.offset(),n=t.offset();return i.width=e.width(),i.height=e.height(),n.width=t.width(),n.height=t.height(),i.left<n.left+n.width&&i.left+i.width>n.left&&i.top<n.top+n.height&&i.top+i.height>n.top}},distance:function(e,t,i,n){var o=e-i,s=t-n;return Math.floor(Math.sqrt(o*o+s*s))},copy:function(e){var t=document.createElement("textarea");t.style="position: absolute; left: -1000px; top: -1000px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),mw.notification.success(mw.lang("Copied")+': "'+e+'"')},cloneObject:function(e){return jQuery.extend(!0,{},e)},constructions:function(){mw.$(".mw-image-holder").each((function(){var e=this.querySelector("img");e&&e.src&&mw.$(this).css("backgroundImage","url("+e.src+")")}))},isRtl:function(e){return e=e||document.documentElement,"rtl"===document.documentElement.dir},isEditable:function(e){var t=e;return e.type&&e.target&&(t=e.target),mw.tools.parentsOrCurrentOrderMatchOrOnlyFirst(t,["edit","module"])&&mw.tools.parentsOrCurrentOrderMatchOrOnlyFirst(t,["edit","noedit"])},eachIframe:function(e,t,i){i=i||[];for(var n=(t=t||document).querySelectorAll("iframe"),o=0;o<n.length;o++)mw.tools.canAccessIFrame(n[o])&&-1===i.indexOf(n[o])&&(e.call(n[o].contentWindow,n[o].contentWindow),this.eachIframe(e,n[o].contentWindow.document))},eachWindow:function(e,t){t=t||{};var i=window;for(e.call(i,i);i!==top;)i.parent&&i.parent.document&&(this.eachIframe((function(t){e.call(t,t)}),i.parent.document,[i]),i=i.parent,e.call(i,i));this.eachIframe((function(t){e.call(t,t)})),null!==window.opener&&mw.tools.canAccessWindow(opener)&&(e.call(window.opener,window.opener),this.eachIframe((function(t){e.call(t,t)}),window.opener.document))},canAccessWindow:function(e){var t=!1;try{t=!!e.document.body}catch(e){}return t},canAccessIFrame:function(e){var t=!1;try{var i=e.contentDocument||e.contentWindow.document;t=!!i.body&&!!i.documentElement}catch(e){}return t},createStyle:function(e,t,i){i=i||document.getElementsByTagName("head")[0];var n=mw.$(e)[0];return n||(n=document.createElement("style"),i.appendChild(n)),n.innerHTML=t,n},cssNumber:function(e){return"number"==typeof e||"string"==typeof e&&parseFloat(e).toString()===e?e+"px":isNaN(parseFloat(e))?"0px":e},isField:function(e){var t=e.nodeName.toLowerCase();return/^(input|textarea|select)$/i.test(t)},toggleCheckbox:function(e){return null!=e&&(e.checked=!e.checked,e.checked)},jQueryFields:function(e){return"string"==typeof e&&(e=document.querySelector(e)),null!=e&&mw.$("textarea, select, input[type='checkbox']:checked, input[type='color'], input[type='date'], input[type='datetime'], input[type='datetime-local'], input[type='email'], input[type='file'], input[type='hidden'], input[type='month'], input[type='number'], input[type='password'], input[type='radio']:checked, input[type='range'], input[type='search'], input[type='tel'], input[type='text'], input[type='time'], input[type='url'], input[type='week']",fields).not(":disabled")},toggle:function(e,t,i){(e=mw.$(e)).toggle(),e.toggleClass("toggle-active"),mw.$(t).toggleClass("toggler-active"),mw.is.func(i)&&i.call(e)},_confirm:function(e,t){var i=confirm(e);return i&&"function"==typeof t&&t.call(window),i},el_switch:function(e,t){"semi"===t?mw.$(e).each((function(){var e=mw.$(this);e.hasClass("semi_hidden")?e.removeClass("semi_hidden"):e.addClass("semi_hidden")})):mw.$(e).each((function(){var e=mw.$(this);"none"===e.css("display")?e.show():e.hide()}))},focus_on:function(e){$(e).hasClass("mw-focus")||(mw.$(".mw-focus").each((function(){this!==e&&mw.$(this).removeClass("mw-focus")})),mw.$(e).addClass("mw-focus"))},scrollTo:function(e,t,i){if(i=i||0,0===$(e).length)return!1;"number"==typeof t&&(i=t),mw.$("html,body").stop().animate({scrollTop:mw.$(e).offset().top-i},(function(){"function"==typeof t&&t.call(e)}))},accordion:function(e,t){var i=e.querySelector(".mw-accordion-content");if(null===i)return!1;var n="none"===getComputedStyle(i).display;$(i).is(":animated")||(n?mw.$(i).slideDown(200,(function(){mw.$(e).addClass("active"),"function"==typeof t&&t.call(e,"visible")})):mw.$(i).slideUp(200,(function(){mw.$(e).removeClass("active"),"function"==typeof t&&t.call(e,"hidden")})))},index:function(e,t,i){var n;e=mw.$(e)[0],i=i||e.tagName.toLowerCase();for(var o=0,s=(n=(t=t||e.parentNode).constructor===[].constructor?t:mw.$(i,t)).length;o<s;o++)if(e===n[o])return o},highlight:function(e,t,i,n){if(!e)return!1;mw.$(e).stop(),t=t||"#48AD79",i=i||777,n=n||777;var o=window.getComputedStyle(e,null).backgroundColor;"transparent"===o&&(o="#ffffff"),mw.$(e).animate({backgroundColor:t},i,(function(){mw.$(e).animate({backgroundColor:o},n,(function(){mw.$(e).css("backgroundColor","")}))}))},highlightStop:function(e){mw.$(e).stop(),mw.$(e).css("backgroundColor","")},toCamelCase:function(e){return e.replace(/(\-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")}))},multihover:function(){for(var e=arguments.length,t=1,i=arguments[0].type,n="mouseover"===i||"mouseenter"===i;t<e;t++)n?mw.$(arguments[t]).addClass("hovered"):mw.$(arguments[t]).removeClass("hovered")},listSearch:function(e,t){(e=e.trim().toLowerCase())?this.search(e,"li",(function(e){e?$(this).show():$(this).hide()}),t):$("li",t).show()},search:function(e,t,i,n){if(n=n?$(n)[0]:mwd){var o;if(e=e.toLowerCase(),"object"==typeof t)o=t;else{if("string"!=typeof t)return!1;o=n.querySelectorAll(t)}for(var s=0,a=o.length;s<a;s++)o[s].textContent.toLowerCase().contains(e)?i.call(o[s],!0):i.call(o[s],!1)}},ajaxIsSearching:!1,ajaxSearcSetting:{limit:10,keyword:"",order_by:"updated_at desc",search_in_fields:"title"},ajaxSearch:function(e,t){if(!mw.tools.ajaxIsSearching){var i=$.extend({},mw.tools.ajaxSearcSetting,e);mw.tools.ajaxIsSearching=$.post(mw.settings.site_url+"api/get_content_admin",i,(function(e){"function"==typeof t&&t.call(e,e)})).always((function(){mw.tools.ajaxIsSearching=!1}))}return mw.tools.ajaxIsSearching},getPostById:function(e,t){var i={limit:10,keyword:"",order_by:"updated_at desc",search_in_fields:"id",id:e};return this.ajaxSearch(i,t)},iframeLinksToParent:function(e){mw.$(e).contents().find("a").each((function(){this.href.contains(mw.settings.site_url)&&(this.target="_parent")}))},get_filename:function(e){if(e.contains(".")){var t=e.lastIndexOf(".");return e.substring(e.lastIndexOf("/")+1,t<0?e.length:t)}},is_field:function(e){if(null==e||3===e.nodeType)return!1;if(!e.nodeName)return!1;var t=e.nodeName.toLowerCase();return"input"===t||"textarea"===t||"select"===t},getAttrs:function(e){var t=e.attributes,i={};for(var n in t)t[n].nodeName&&(i[t[n].nodeName]=t[n].nodeValue);return i},copyAttributes:function(e,t,i){i=i||[];var n=mw.tools.getAttrs(e);for(var o in mw.tools.is_field(e)&&mw.tools.is_field(t)&&(t.value=e.value),n)-1==$.inArray(o,i)&&"undefined"!=o&&t.setAttribute(o,n[o])},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getFirstEqualFromTwoArrays:function(e,t){for(var i=0,n=0,o=e.length,s=t.length;i<o;i++)for(var a=e[i];n<s;n++)if(t[n]==a)return a},has:function(e,t){return null!==e.querySelector(t)},html_info:function(e){return void 0===mw._html_info&&(mw._html_info=document.createElement("div"),mw._html_info.id="mw-html-info",document.body.appendChild(mw._html_info)),mw.$(mw._html_info).html(e),mw._html_info},image_info:function(e,t){var i=document.createElement("img");i.className="semi_hidden",i.src=e.src,document.body.appendChild(i),i.onload=function(){t.call({width:mw.$(i).width(),height:mw.$(i).height()}),mw.$(i).remove()}},refresh_image:function(e){return e.src=mw.url.set_param("refresh_image",mw.random(),e.src),e},refresh:function(e,t){if(null==e)return!1;e.src?(e.src=mw.url.set_param("mwrefresh",mw.random(),e.src),t&&jQuery.get(e.getAttribute("src"),(function(i){t.call(e,i)}))):e.href&&(e.href=mw.url.set_param("mwrefresh",mw.random(),e.href),t&&jQuery.get(e.getAttribute("href"),(function(i){t.call(e,i)})))},getDiff:function(e,t){var i,n,o={};for(i in e)(!i in t||t[i]!=e[i])&&(o[i]=e[i]);for(n in t)void 0===e[n]&&(o[n]="");return o},parseHtml:function(e){var t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t},isEmpty:function(e){return 0===e.innerHTML.trim().length},isJSON:function(e){if("object"==typeof e)return e.constructor==={}.constructor;if("string"==typeof e){try{JSON.parse(e)}catch(e){return!1}return!0}return!1},toJSON:function(e){if("object"==typeof e&&mw.tools.isJSON(e))return e;if("string"==typeof e){try{var t=JSON.parse(e)}catch(i){t={0:e}}return t}if("object"==typeof e&&e.constructor===[].constructor){for(var i={},n=0,o=e.length;n<o;n++)i[n]=e[n];return i}},mwattr:function(e,t,i){if(!i&&e){var n=mw.$(e).dataset(t);if($(e)[0].attributes)var o=mw.$(e)[0].attributes[t];return""!==n?n:!!o&&o.value}mw.$(e).dataset(t,i)},disable:function(e,t,i){t=t||mw.msg.loading+"...",i=i||!1;var n=mw.$(e);return!!n.length&&(n.hasClass("disabled")||(n.addClass("disabled"),"INPUT"!==n[0].tagName?(n.dataset("text",n.html()),n.html(t)):(n.dataset("text",n.val()),n.val(t)),i&&mw.$(document.body).addClass("loading")),e)},enable:function(e){var t=mw.$(e);if(!t.length)return!1;var i=t.dataset("text");return t.removeClass("disabled"),"INPUT"!==t[0].tagName?t.html(i):t.val(i),mw.$(document.body).removeClass("loading"),e},prependClass:function(e,t){e.className=(t+" "+e.className).trim()},inview:function(e){var t=mw.$(e);if(0===t.length)return!1;var i=mw.$(window).scrollTop(),n=i+mw.$(window).height(),o=t.offset().top;return o<=n&&!(i>t.height()+o)},wholeinview:function(e){var t=mw.$(e),i=mw.$(window).scrollTop(),n=i+mw.$(window).height(),o=t.offset().top;return o+mw.$(e).height()<=n&&o>=i},preload:function(e,t){var i=new Image;"function"==typeof t&&(i.onload=function(){t.call(e,i)}),i.src=e},mapNodeValues:function(e,t){if(!e||!t)return!1;var i=e.type&&"BUTTON"!==e.nodeName||"TEXTAREA"===e.nodeName?"value":"textContent",n=t.type&&"BUTTON"!==t.nodeName||"TEXTAREA"===t.nodeName?"value":"textContent",o="keyup paste";mw.$(e).bind(o,(function(){t[n]=e[i],mw.$(t).trigger("change")})),mw.$(t).bind(o,(function(){e[i]=t[n],mw.$(e).trigger("change")}))},copyEvents:function(e,t){if(void 0===$._data(e,"events"))return!1;$.each($._data(e,"events"),(function(){$.each(this,(function(){mw.$(t).bind(this.type,this.handler)}))}))},setTag:function(e,t){var i=document.createElement(t);for(mw.tools.copyAttributes(e,i);e.firstChild;)i.appendChild(e.firstChild);return mw.tools.copyEvents(e,i),mw.$(e).replaceWith(i),i},module_settings:function(e,t,i){var n={};return void 0===i&&(n.liveedit=!0),n.view=t||"admin",mw.live_edit.showSettings(e,n)},fav:function(e){var t=document.createElement("canvas");t.width=16,t.height=16;var i=t.getContext("2d");i.fillStyle="#EF3D25",i.fillRect(0,0,16,16),i.font="normal 10px Arial",i.textAlign="center",i.textBaseline="middle",i.fillStyle="white",i.fillText(e,8,8);var n=t.toDataURL(),o=document.createElement("link");o.className="mwfav",o.setAttribute("rel","icon"),o.setAttribute("type","image/png"),o.href=n,mw.$(".mwfav").remove(),document.getElementsByTagName("head")[0].appendChild(o)},px2pt:function(e){var t=parseInt(e,10);return!isNaN(t)&&Math.round(3/4*t)},matches:function(e,t){if("init"!==e){if(null===e)return!1;if(void 0===e)return!1;if(1!==e.nodeType)return!1;if(mw.tools.matchesMethod)return e[mw.tools.matchesMethod](t);var i=document.implementation.createHTMLDocument("");e=e.cloneNode(!0),i.body.appendChild(e);for(var n=i.body.querySelectorAll(t),o=n.length,s=0;s<o;s++)if(n[s]===e)return!0;return!1}document.documentElement.matches?mw.tools.matchesMethod="matches":document.documentElement.matchesSelector?mw.tools.matchesMethod="matchesSelector":document.documentElement.mozMatchesSelector?mw.tools.matchesMethod="mozMatchesSelector":document.documentElement.webkitMatchesSelector?mw.tools.matchesMethod="webkitMatchesSelector":document.documentElement.msMatchesSelector?mw.tools.matchesMethod="msMatchesSelector":document.documentElement.oMatchesSelector?mw.tools.matchesMethod="oMatchesSelector":mw.tools.matchesMethod=void 0}};var MWElement,IconLoader;mw.storage={init:function(){try{if(0===window.location.href.indexOf("data:")||!("localStorage"in window)||void 0===window.localStorage)return!1;var e=localStorage.getItem("mw");return null==e&&(e=localStorage.setItem("mw","{}")),this.change("INIT"),e}catch(e){console.log(e)}},identity:function(){return mw._storageIdentity||(mw._storageIdentity="mw-"+Date.now()),mw._storageIdentity},rootIdentity:function(){return mw.top()._storageIdentity||(mw.top()._storageIdentity="mw-"+Date.now()),mw.top()._storageIdentity},set:function(e,t){try{if(!("localStorage"in window))return!1;var i=JSON.parse(localStorage.getItem("mw"));i[e]=t;var n=localStorage.setItem("mw",JSON.stringify(i));return mw.storage.change("CALL",e,t),n}catch(e){console.log(e)}},get:function(e){try{return"localStorage"in window&&JSON.parse(localStorage.getItem("mw"))[e]}catch(e){console.log(e)}},_keys:{},change:function(e,t,i){if(!("localStorage"in window))return!1;if("INIT"===e&&"addEventListener"in document)addEventListener("storage",(function(e){if("mw"===e.key){var t=JSON.parse(e.newValue||{}),i=JSON.parse(e.oldValue||{}),n=mw.tools.getDiff(t,i);for(var o in n)if(o in mw.storage._keys)for(var s=0,a=mw.storage._keys[o].length;s<a;s++)mw.storage._keys[o][s].call(void 0,n[o])}}),!1);else if("CALL"===e){if(!document.hidden&&void 0!==mw.storage._keys[t])for(var n=0,o=mw.storage._keys[t].length;n<o;n++)mw.storage._keys[t][n].call(i)}else e in mw.storage._keys?mw.storage._keys[e].push(t):mw.storage._keys[e]=[t]}},mw.storage.init(),MWElement=function(e,t){var i=this;this.toggle=function(){this.css("display","none"===this.css("display")?"block":"none")},this._active=function(){return this.nodes[this.nodes.length-1]},this.getDocument=function(){return this._active().ownerDocument},this.getWindow=function(){return this.getDocument().defaultView},this.get=function(e,t){this.nodes=(t||document).querySelectorAll(e)},this.each=function(e){if(this.nodes)for(var t=0;t<this.nodes.length;t++)e.call(this.nodes[t],t);else this.node&&e.call(this.node,0);return this},this.scrollTop=function(e){return void 0===e?this._active().scrollTop:this.each((function(){this.scrollTop=e}))},this.encapsulate=function(){},this.create=function(){var e={};this.settings.is&&(e.is=this.settings.is);var t=this.document.createElement(this.settings.tag,e);this.node=t,this.nodes=[t],this.settings.content&&(Array.isArray(this.settings.content)?this.settings.content.forEach((function(e){Object.getPrototypeOf(e)===Object.prototype?i.append(new MWElement(e)):i.append(e)})):this.settings.content instanceof MWElement?this.append(this.settings.content):"object"==typeof this.settings.content?this.append(new MWElement(this.settings.content)):"string"==typeof this.settings.content&&(this.get(0).innerHTML=this.settings.content)),this.$node=$(t)},this._specialProps=function(e,t){if("tooltip"===e)return this.node.dataset[e]=t,!0},this.setProps=function(){for(var e in this.settings.props)if("dataset"===e)for(var t in this.settings.props[e])this.node.dataset[t]=this.settings.props[e][t];else if("style"===e)for(var i in this.settings.props[e])this.node.style[i]=this.settings.props[e][i];else{var n=this.settings.props[e];this._specialProps(e,n)||(this.node[e]=n)}},this.__={cssNumber:["animationIterationCount","columnCount","fillOpacity","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","order","orphans","widows","zIndex","zoom"]},this._normalizeCSSValue=function(e,t){return"number"==typeof t&&-1===this.__.cssNumber.indexOf(e)&&(t+="px"),t},this.css=function(e,t){if("string"==typeof e){if(void 0===t)return this.document.defaultView.getComputedStyle(this.node)[e];var n=this._normalizeCSSValue(e,t);this.each((function(){this.style[e]=n}))}if("object"==typeof e)for(var o in e)this.each((function(){this.style[o]=i._normalizeCSSValue(o,e[o])}));return this},this.dataset=function(e,t){return void 0===t?this._active()[e]:(this.each((function(){this.dataset[e]=t})),this)},this.attr=function(e,t){return void 0===t?this._active()[e]:(this.each((function(){this.setAttribute(e,t)})),this)},this.focus=function(){return this._active().focus(),this},this.val=function(e){return void 0===e?this._active().value:(this.each((function(){this.value=e})),this)},this.prop=function(e,t){var i=this._active();if(i)return void 0===t?i[e]:(i[e]!==t&&(i[e]=t,this.trigger("propChange",[e,t])),this)},this.hide=function(){return this.each((function(){this.style.display="none"}))},this.show=function(){return this.each((function(){this.style.display=""}))},this.find=function(e){var t=mw.element("#r"+(new Date).getTime());return this.each((function(){for(var i=this.querySelectorAll(e),n=0;n<i.length;n++)-1===t.nodes.indexOf(i[n])&&t.nodes.push(i[n])})),t};var n=function(){var e=[];return Array.from(arguments).forEach((function(t){Array.from(t).forEach((function(t){(Array.isArray(t)?t:t.split(" ")).forEach((function(t){(t=t.trim())&&e.push(t)}))}))})),e};this.hasClass=function(e){var t=this._active();return!!t&&t.classList.contains(e)},this.addClass=function(){var e=n(arguments);return this.each((function(){var t=this;e.forEach((function(e){t.classList.add(e)}))}))},this.toggleClass=function(){var e=n(arguments);return this.each((function(){var t=this;e.forEach((function(e){t.classList.toggle(e)}))}))},this.removeClass=function(){var e=n(arguments);return this.each((function(){var t=this;e.forEach((function(e){t.classList.remove(e)}))}))},this.remove=function(){return this.each((function(){this.remove()}))},this.empty=function(){return this.html("")},this.html=function(e){return void 0===e?this._active().innerHTML:this.each((function(){this.innerHTML=e}))},this.text=function(e,t){return void 0===e?this.node.textContent:(void 0===t&&(t=!0),t&&(e=this.document.createRange().createContextualFragment(e).textContent),this.each((function(){this.textContent=e})))},this._asdom=function(e){return"string"==typeof e?this.document.createRange().createContextualFragment(e):e.node?e.node:e.nodes?e.nodes[e.nodes.length-1]:e},this.offset=function(){if(this._active()){var e=this.getWindow(),t=this._active().getBoundingClientRect();return t.offsetTop=t.top+e.pageYOffset,t.offsetBottom=t.bottom+e.pageYOffset,t.offsetLeft=t.left+e.pageXOffset,t}},this.width=function(e){return e?this.css("width",e):this._active().offsetWidth},this.height=function(e){return e?this.css("height",e):this._active().offsetHeight},this.parent=function(){return mw.element(this._active().parentNode)},this.next=function(){return mw.element(this._active().nextElementSibling)},this.prev=function(){return mw.element(this._active().previousElementSibling)},this.parents=function(e){e=e||"*";var t=this._active().parentElement,i=mw.element();for(i.nodes=[];t;)t.matches(e)&&i.nodes.push(t),t=t.parentElement;return i},this.append=function(e){return e&&this.each((function(){this.append(i._asdom(e))})),this},this.before=function(e){return e&&this.each((function(){this.parentNode&&this.parentNode.insertBefore(i._asdom(e),this)})),this},this.after=function(e){e&&this.each((function(){this.parentNode&&this.parentNode.insertBefore(i._asdom(e),this.nextSibling)}))},this.prepend=function(e){return e&&this.each((function(){this.prepend(i._asdom(e))})),this},this._disabled=!1,Object.defineProperty(this,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,this.node.disabled=this._disabled,this.node.dataset.disabled=this._disabled}}),this.trigger=function(e,t){return t=t||{},this.each((function(){this.dispatchEvent(new CustomEvent(e,{detail:t,cancelable:!0,bubbles:!0})),i._on[e]&&i._on[e].forEach((function(i){i.call(this,e,t)}))})),this},this.get=function(e){return this.nodes[e]},this._on={},this.on=function(e,t){return(e=e.trim().split(" ")).forEach((function(e){i._on[e]||(i._on[e]=[]),i._on[e].push(t),i.each((function(){this.addEventListener(e,t,!1)}))})),this},this.init=function(){this.nodes=[];var i=t||document;if(i.get&&(i=i.get(0)),this.root=i,this._asElement=!1,this.document=this.root.body?this.root:this.root.ownerDocument,(e=e||{}).nodeName&&e.nodeType)this.nodes.push(e),this.node=e,e={},this._asElement=!0;else if("string"==typeof e)if(-1===e.indexOf("<"))this.nodes=Array.prototype.slice.call(this.root.querySelectorAll(e)),e={},this._asElement=!0;else{var n=this._asdom(e);this.nodes=[].slice.call(n.children),this._asElement=!0}e=e||{},this.settings=$.extend({},{tag:"div",props:{}},e),this._asElement||(this.create(),this.setProps())},this.init()},mw.element=function(e,t){return new MWElement(e,t)},mw.element.module=function(e,t){MWElement.prototype[e]=t},mw.cookie={get:function(e){for(var t=document.cookie.split(";"),i=0,n=t.length;i<n;i++){var o=t[i].substr(0,t[i].indexOf("=")),s=t[i].substr(t[i].indexOf("=")+1);if((o=o.replace(/^\s+|\s+$/g,""))===e)return unescape(s)}},delete:function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},set:function(e,t,i,n,o,s){var a=new Date;i=i||365,a.setTime(a.getTime()),i&&(i=1e3*i*60*60*24);var r=new Date(a.getTime()+i);document.cookie=e+"="+escape(t)+(i?";expires="+r.toGMTString():"")+(n?";path="+n:";path=/")+(o?";domain="+o:"")+(s?";secure":"")},setEncoded:function(e,t,i,n,o,s){return t=mw.tools.base64.encode(t),this.set(e,t,i,n,o,s)},getEncoded:function(e){var t=this.get(e);return mw.tools.base64.decode(t)},ui:function(e,t){var i=mw.cookie.getEncoded("mwui");try{i=i&&""!==i?$.parseJSON(i):{}}catch(e){return!1}if(void 0===e)return i;if(void 0===t)return void 0!==i[e]?i[e]:"";i[e]=t;var n=JSON.stringify(i);if(mw.cookie.setEncoded("mwui",n,!1,"/"),void 0!==mw.cookie.uievents[e])for(var o=mw.cookie.uievents[e].length,s=0;s<o;s++)mw.cookie.uievents[e][s].call(t.toString())},uievents:{},changeInterval:null,uiCurr:null,onchange:function(e,t){void 0===mw.cookie.uievents[e]?mw.cookie.uievents[e]=[t]:mw.cookie.uievents[e].push(t)}},mw._intervals={},mw.interval=function(e,t){e&&t&&!mw._intervals[e]&&(mw._intervals[e]=t)},mw.removeInterval=function(e){delete mw._intervals[e]},setInterval((function(){for(var e in mw._intervals)mw._intervals[e].call()}),99),mw.controllers={},mw.external_tool=function(e){return e.includes("/")?e:mw.settings.site_url+"editor_tools/"+e},mw.postMsg=function(e,t){e.postMessage(JSON.stringify(t),window.location.href)},mw.uploader=function(e){return mw.require("files.js"),mw.files.uploader(e)},mw.fileWindow=function(e){(e=e||{}).mode=e.mode||"dialog";var t,i={types:e.types,title:e.title};url=mw.settings.site_url+"editor_tools/rte_image_editor?"+$.param(i)+"#fileWindow";var n={dialog:null,root:null,iframe:null};if("dialog"===e.mode){var o=mw.dialogIframe({url,name:"mw_rte_image",width:530,height:"auto",autoHeight:!0,overlay:!0,title:mw.lang("Select image")}),s=mw.$("iframe",o.main);t=s[0].contentWindow,n.dialog=o,n.root=s.parent()[0],n.iframe=s[0],t.onload=function(){t.$("body").on("Result",(function(t,i,n){e.change&&(e.change.call(void 0,i),o.remove())})),$(o).on("Result",(function(t,i,n){e.change&&(e.change.call(void 0,i),o.remove())}))}}else if("inline"===e.mode){var a=document.createElement("iframe");if(a.src=url,a.frameBorder=0,a.className="mw-file-window-frame",n.iframe=a,mw.tools.iframeAutoHeight(a),e.element){var r=$(e.element);r.length&&(n.root=r[0]),r.append(a)}a.onload=function(){this.contentWindow.$("body").on("change",(function(t,i,n){e.change&&e.change.call(void 0,i)}))}}return n},mw.accordion=function(e,t){return mw.tools.accordion(mw.$(e)[0],t)},mw.tabs=function(e,t,i){t=t||document.body,(i=void 0===i||i)&&(i={set:function(t){"number"==typeof t&&($(e.nav).eq(t).hasClass(n)||(mw.$(e.nav).removeClass(n),mw.$(e.nav).eq(t).addClass(n),mw.$(e.tabs).hide().eq(t).show()))},setLastClicked:function(){void 0!==e.lastClickedTabIndex&&null!==e.lastClickedTabIndex&&this.set(e.lastClickedTabIndex)},unset:function(t){"number"==typeof t&&$(e.nav).eq(t).hasClass(n)&&(mw.$(e.nav).eq(t).removeClass(n),mw.$(e.tabs).hide().eq(t).hide())},toggle:function(t){"number"==typeof t&&($(e.nav).eq(t).hasClass(n)?this.unset(t):this.set(t))}});var n=e.activeNav||e.activeClass||"active active-info",o=0;return e.lastClickedTabIndex=null,e.linkable&&("link"===e.linkable||"string"==typeof e.linkable&&($(window).on("load hashchange",(function(){var t=mw.url.windowHashParam(e.linkable);t&&$("[data-"+e.linkable+'="'+t+'"]')})),$(e.nav).each((function(t){this.dataset.linkable=e.linkable+"-"+t,function(e,t){this.onclick=function(){mw.url.windowHashParam(e,t)}}(e.linkable,t)})))),mw.$(e.nav).on("click",(function(i){if(e.linkable)e.linkable;else if($(this).hasClass(n))!0===e.toggle&&(mw.$(this).removeClass(n),mw.$(e.tabs).hide(),"function"==typeof e.onclick)&&(o=mw.tools.index(this,t,e.nav),e.onclick.call(this,mw.$(e.tabs).eq(o)[0],i,o));else{var o=mw.tools.index(this,mw.$(e.nav).get(),mw.$(e.nav)[0].nodeName);mw.$(e.nav).removeClass(n),mw.$(this).addClass(n),mw.$(e.tabs).hide().eq(o).show(),e.lastClickedTabIndex=o,"function"==typeof e.onclick&&e.onclick.call(this,mw.$(e.tabs).eq(o)[0],i,o)}return!1})).each((function(e){mw.tools.hasClass(this,n)&&(o=e)})),i.set(o),i},mw.Spinner=function(e){if(e&&e.element&&(this.$element=$(e.element),this.$element.length)){if(this.element=this.$element[0],this.element._mwSpinner)return this.element._mwSpinner;this.element._mwSpinner=this,this.options=e,this.options.size=this.options.size||20,this.options.color=this.options.color||"#4592ff",this.options.insertMode=this.options.insertMode||"append",this.color=function(e){if(!e)return this.options.color;this.options.color=e,this.$spinner.find("circle").css({stroke:this.options.color})},this.size=function(e){if(!e)return this.options.size;this.options.size=parseFloat(e),this.$spinner.css({width:this.options.size,height:this.options.size})},this.setState=function(e){mw.tools.classNamespaceDelete(this.$spinner[0],"mw-spinner-state-"),mw.tools.addClass(this.$spinner[0],"mw-spinner-state-"+e)},this.create=function(){return this.$spinner=$('<div class="mw-spinner mw-spinner-mode-'+this.options.insertMode+'" style="display: none;"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle><path class="mw-spinner-checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg></div>'),this.size(this.options.size),this.color(this.options.color),this.$element[this.options.insertMode](this.$spinner),this.show(),this},this.show=function(){return this.$spinner.show(),this.$element.addClass("has-mw-spinner"),this.options.decorate&&this.$element.addClass("mw-spinner-decorate"),this},this.hide=function(){return this.$spinner.hide(),this.$element.removeClass("has-mw-spinner"),this.options.decorate&&this.$element.removeClass("mw-spinner-decorate"),this},this.remove=function(){this.hide(),this.$spinner.remove(),delete this.element._mwSpinner},this.create().show()}},mw.spinner=function(e){return new mw.Spinner(e)},IconLoader=function(e){var t=this,i={fontAwesome:{cssSelector:".fa",detect:function(e){return e.classList.includes("fa")},render:function(e,t){t.classList.add("fa"),t.classList.add(e)},remove:function(e){e.classList.remove("fa"),mw.tools.classNamespaceDelete(e,"fa-",void 0,void 0,["fa-lg","fa-2x","fa-3x","fa-4x","fa-5x","fa-fw","fa-spin","fa-pule","fa-rotate-90","fa-rotate-180","fa-rotate-270","fa-flip-horizontal","fa-flip-vertical"])},icons:function(){return new Promise((function(e){$.get(mw.settings.modules_url+"microweber/api/fa.icons.js",(function(t){e(JSON.parse(t))}))}))},name:"Font Awesome",load:mw.settings.libs_url+"fontawesome-4.7.0/css/font-awesome.min.css",unload:function(){document.querySelector('link[href*="fontawesome-4.7.0"]').remove()},version:"4.7.0"},materialIcons:{cssSelector:".material-icons",detect:function(e){return e.classList.contains("material-icons")},render:function(e,t){t.classList.add("material-icons"),t.innerHTML=e},remove:function(e){mw.tools.removeClass(e,"material-icons"),e.innerHTML=""},icons:function(){return new Promise((function(e){$.get(mw.settings.modules_url+"microweber/api/material.icons.js",(function(t){e(JSON.parse(t))}))}))},name:"Material Icons",load:mw.settings.libs_url+"material_icons/material_icons.css",unload:function(){top.document.querySelector('link[href*="material_icons.css"]').remove()},version:"mw"},iconsMindLine:{cssSelector:'[class*="mw-micon-"]:not([class*="mw-micon-solid-"])',detect:function(e){return e.className.includes("mw-micon-")&&!e.className.includes("mw-micon-solid-")},render:function(e,t){t.classList.add(e)},remove:function(e){mw.tools.classNamespaceDelete(e,"mw-micon-",void 0,void 0,[])},icons:function(){var e=this;return new Promise((function(t){var i,n;i=function(e){t(function(e){if(e.sheet){for(var t=e.sheet.cssRules,i=t.length,n=0,o=[];n<i;n++){var s=t[n].selectorText;if(s&&0===s.indexOf(".mw-micon-")){var a=s.replace(".","").split(":")[0];o.push(a)}}return o}}(e))},(n=mw.top().win.document.querySelector('link[href*="mw-icons-mind/line"]'))?i.call(void 0,n):$.get(e.load,(function(t){(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e.load,$(document.head).append(n),i.call(void 0,n)}))}))},name:"Icons Mind Line",load:mw.settings.modules_url+"microweber/api/libs/mw-icons-mind/line/style.css",unload:function(){document.querySelector('link[href*="mw-icons-mind/line/style"]').remove()},version:"mw_local"},iconsMindSolid:{cssSelector:'[class*="mw-micon-solid-"]',detect:function(e){return e.className.includes("mw-micon-solid-")},render:function(e,t){t.classList.add(e)},remove:function(e){mw.tools.classNamespaceDelete(e,"mw-micon-solid-",void 0,void 0,[])},icons:function(){var e=this;return new Promise((function(t){var i,n;i=function(e){t(function(e){if(e.sheet){for(var t=e.sheet.cssRules,i=t.length,n=0,o=[];n<i;n++){var s=t[n].selectorText;if(s&&0===s.indexOf(".mw-micon-solid-")){var a=s.replace(".","").split(":")[0];o.push(a)}}return o}}(e))},(n=mw.top().win.document.querySelector('link[href*="mw-icons-mind/solid"]'))?i.call(void 0,n):$.get(e.load,(function(t){(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e.load,$(document.head).append(n),i.call(void 0,n)}))}))},name:"Icons Mind Solid",load:mw.settings.modules_url+"microweber/api/libs/mw-icons-mind/solid/style.css",unload:function(){document.querySelector('link[href*="mw-icons-mind/solid/style"]').remove()},version:"mw_local"},materialDesignIcons:{cssSelector:".mdi",detect:function(e){return e.classList.includes("mdi")},render:function(e,t){t.classList.add("mdi"),t.classList.add(e)},remove:function(e){mw.tools.classNamespaceDelete(e,"mdi-",void 0,void 0,[]),e.classList.remove("mdi")},icons:function(){var e=this;return new Promise((function(t){var i,n;i=function(e){if(e&&e.sheet){for(var i=e.sheet.cssRules,n=i.length,o=0,s=[];o<n;o++){var a=i[o].selectorText;if(a&&0===a.indexOf(".mdi-")){var r=a.replace(".","").split(":")[0];s.push(r)}}t(s)}else t([])},(n=mw.top().win.document.querySelector('link[href*="materialdesignicons"]'))?i.call(void 0,n):$.get(e.load,(function(t){(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e.load,$(document.head).append(n),i.call(void 0,n)}))}))},name:"Material Design Icons",load:mw.settings.modules_url+"microweber/css/fonts/materialdesignicons/css/materialdesignicons.min.css",unload:function(){document.querySelector('link[href*="materialdesignicons"]').remove()},version:"mw_local"},mwIcons:{cssSelector:'[class*="mw-icon-"]',detect:function(e){return e.className.includes("mw-icon-")},render:function(e,t){t.classList.add(e)},remove:function(e){mw.tools.classNamespaceDelete(e,"mw-icon-",void 0,void 0,[])},icons:function(){return new Promise((function(e){$.get(mw.settings.modules_url+"microweber/api/microweber.icons.js",(function(t){e(JSON.parse(t))}))}))},name:"Microweber Icons",load:mw.settings.modules_url+"microweber/css/fonts/materialdesignicons/css/materialdesignicons.min.css",unload:function(){document.querySelector('link[href*="materialdesignicons"]').remove()},version:"mw_local"},SVGIcons:{cssSelector:"svg[viewBox]",detect:function(e){return"SVG"===e.nodeName},render:function(e,t){t.innerHTML=e.source;var i=t.querySelector("svg");i&&(i.setAttribute("width","1em"),i.setAttribute("fill","currentColor"),i.setAttribute("height","1em"),i.style.width="1em",i.style.height="1em",i.style.fill="currentColor")},remove:function(e){e.innerHTML=""},icons:function(){return new Promise((function(e){window.TemplateVectorIcons?e(TemplateVectorIcons):$.getScript(mw.settings.template_url+"template_icons.js",(function(){e(TemplateVectorIcons)}))}))},name:"Vector Icons",load:null,unload:function(){},version:"mw_local"}},n=function(){return mw.top().__IconStorage||(mw.top().__IconStorage=[]),mw.top().__IconStorage};this.storage=e||n;var o=function(e){return e.name+e.version};this.addIconSet=function(e){return function(e){if("string"==typeof e){if(!i[e])return void console.warn(e+" is not defined.");e=i[e]}var t;e&&(e.type=e.type||"font","font"===e.type&&((t=e).version=t.version||"-1",function(e){!n().find((function(t){return o(e)===o(t)}))&&n().push(e)}(t),"string"==typeof t.load?mw.require(t.load):"function"==typeof t.load&&t.load()))}(e),this},this.removeIconSet=function(e,t){var i=n(),o=i.find((function(i){return i.name===e&&(!t||i.version===t)}));o&&(o.unload&&o.unload(),i.splice(i.indexOf(o),1))},this.init=function(){n().forEach((function(e){t.addIconSet(e)}))}},mw.iconLoader=function(e){return new IconLoader(e)},function(){var e=function(e){e=e||{};var t=mw.iconLoader();this.settings=mw.object.extend(!0,{},{iconsPerPage:40,iconOptions:{size:!0,color:!0,reset:!1}},e);var i=this,n={};this.on=function(e,t){n[e]?n[e].push(t):n[e]=[t]},this.dispatch=function(e,t){n[e]&&n[e].forEach((function(e){e.call(this,t)}))};var o={},s=function(e){e=e||{},e=mw.object.extend({},{set:i.selectField.get(0).options[i.selectField.get(0).selectedIndex]._value,term:i.searchField.get(0).value},e),i.ui.iconsHolder.empty().append(a(e))},a=function(e){var n=function(e){if((e=e||{}).set=e.set||t.storage()[0],e.page=e.page||1,e.term=(e.term||"").trim().toLowerCase(),e.set._iconsLists){var n=e.set._iconsLists.filter((function(t){return-1!==(t.name||t).toLowerCase().indexOf(e.term)})),o=i.settings.iconsPerPage*(e.page-1),s=o+Math.min(n.length-o,i.settings.iconsPerPage);return mw.object.extend({},e,{data:n.slice(o,s),all:n,off:o})}}(e);if(n){var o=function(e,t){t=t||1;var n=Math.min(Math.ceil(e/i.settings.iconsPerPage),999),o=document.createElement("ul");if(o.className="pagination mw-live-edit-pagination-tabler d-flex flex-wrap mx-auto mt-3",i.settings.iconsPerPage>=e)return o;for(var a=!1,r=1;r<=n;r++){var l=document.createElement("a");l.innerHTML=r,l._value=r,t===r&&(l.className="active",a=r),l.classList.add("page-link"),l.onclick=function(){s({page:this._value})};var c=document.createElement("li");c.className="page-item",c.appendChild(l),o.appendChild(c)}var d=o.querySelectorAll("li");for(r=a-3;r<a+2;r++)d[r]&&(d[r].className+=" mw-paging-visible-range");if(a<n){var m=document.createElement("a");m.innerHTML="&raquo;",m._value=a+1,m.className="mw-paging-visible-range mw-paging-next",m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 6l6 6l-6 6"></path></svg>',$(o).append(m),m.onclick=function(){s({page:this._value})}}if(a>1){var h=document.createElement("a");h.className="mw-paging-visible-range mw-paging-prev",h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 6l-6 6l6 6"></path></svg>',h._value=a-1,$(o).prepend(h),h.onclick=function(){s({page:this._value})}}return o}(n.all.length,n.page),a=mw.element();return n.data.length||a.append(mw.element(`<div class="alert" role="alert"><h5 class="text-secondary fw-normal">No results for <strong>${e.term}</strong></h5></div>`)),n.data.forEach((function(e){var o=mw.element({tag:"span",props:{className:"mwiconlist-icon",onclick:function(o){i.dispatch("select",{icon:e,renderer:n.set.render,render:function(){return t.storage().forEach((function(e){e.remove(i.target)})),n.set.render(e,i.target)}}),setTimeout((function(){mw.trigger("iconInserted")}))}}});a.append(o),n.set.render(e,o.get(0))})),a.append(o),a}};this.create=function(){var e,n,a,r,l,c,d,m,h,u,p;this.ui=(p=mw.element({props:{className:"mw-icon-selector-root mx-auto w-100 my-3"}}),i.settings.iconOptions?(h=[{title:"Icons"},{title:"Options"}],u={root:mw.element('<div class="mw-tab-accordion" data-options="tabsSize: medium, tabsColor: tab" />'),items:[]},h.forEach((function(e){var t=mw.element('<div class="mw-accordion-item px-3" />'),i=mw.element('<div class="mw-accordion-content px-1">'+(e.content||"")+"</div>"),n=mw.element('<div class="mw-ui-box-header mw-accordion-title">'+e.title+"</div>");t.append(n),t.append(i),i.css({overflowX:"hidden"}),u.root.append(t),u.items.push({title:n,content:i,root:t})})),setTimeout((function(){mw.components&&mw.components._init()}),10),l=(c=u).items[0].content,d=c.items[1].content,p.append(c.root)):(l=mw.element().addClass("px-3"),p.append(l)),m=mw.element().addClass("mw-icon-picker-icons-holder"),l.append(m),{root:p,tabs:c,iconsBlockHolder:l,iconsHolder:m,optionsHolder:d}),function(e){if(e&&i.settings.iconOptions){if(i.settings.iconOptions.size){var t=mw.element(`\n                        <div class="mw-icon-selector-flex my-2">\n                            <label class="mw-icon-selector-control-label live-edit-label px-0">${mw.lang("Size")}</label>\n                        </div>\n                    `),n=20;i.settings.target&&(n=parseFloat(getComputedStyle(i.settings.target).fontSize));var s=mw.element('<div class="mwiconlist-settings-section-block-item input-group input-group-flat" style="width: 230px;"><span class="input-group-text"><kbd>px</kbd></span></div>'),a=mw.element(`<input class="form-control" value="${n}" type="number" min="8" max="200">`),r=mw.element(`<input class="mw-icon-selector-form-control-range" value="${n}" type="range" min="8" max="200">`);o.size=a,a.on("input",(function(){i.dispatch("sizeChange",a.get(0).value),r.val(a.get(0).value)})),r.on("input",(function(){a.val(r.get(0).value),i.dispatch("sizeChange",a.get(0).value)})),e.append(t),s.prepend(r),s.prepend(a),e.append(s)}if(i.settings.iconOptions.color){var l=mw.element('<div class="mwiconlist-settings-section-block-item"><label class="mw-icon-selector-control-label live-edit-label px-0 mb-2 ps-2">Choose color</label></div>'),c=mw.element('<input class="mw-icon-selector-form-control mw-icon-selector-2-column" type="color">');o.color=c,c.on("input",(function(){i.dispatch("colorChange",c.get(0).value)}));var d=mw.element();setTimeout((function(){var e={element:d.get(0),position:"bottom-center",onchange:function(e){i.dispatch("colorChange",e)}};i.settings.target&&(e.value=getComputedStyle(i.settings.target).color),mw.colorPicker(e)}),100),l.append(d),e.append(l)}if(i.settings.iconOptions.imageReplace){var m=mw.element(`\n                    <div class="my-3">\n                        <label class="mw-icon-selector-control-label live-edit-label px-0 mb-2 ps-2">${mw.lang("Replace with image")}</label>\n                    </div>`);(h=mw.element(`\n                        <button type="button" style="min-width: 150px" class="btn btn-light border-0 go-live-edit-href-set admin-toolbar-buttons">\n                        ${mw.lang("Choose")}\n                        </button>\n                    `)).on("click",(function(){mw.filePickerDialog((e=>{i.dispatch("iconReplaced",{type:"image",url:e})}))})),m.append(h),e.append(m)}var h;i.settings.iconOptions.reset&&(m=mw.element(`\n                    <div class="my-3">\n                        <label class="mw-icon-selector-control-label live-edit-label px-0 mb-2 ps-2">${mw.lang("Reset icon options")}</label>\n                    </div>`),(h=mw.element(`\n                        <button type="button" style="min-width: 150px" class="btn btn-outline-secondary ">\n                        ${mw.lang("Reset")}\n                        </button>\n                    `)).on("click",(function(){i.dispatch("reset",h.get(0).value)})),m.append(h),e.append(m))}}(this.ui.optionsHolder),this.ui.iconsBlockHolder.prepend(function(){var e=null;i.searchField=mw.element({tag:"input",props:{className:"form-control-live-edit-input",placeholder:"Search",oninput:function(){clearTimeout(e),e=setTimeout((function(){s()}),123)}}});var t=mw.element('<div class="form-control-live-edit-label-wrapper m-0 mt-2"></div>'),n=mw.element('<span class="form-control-live-edit-bottom-effect"></span>');return t.append(i.searchField),t.append(n),t}()),this.ui.iconsBlockHolder.prepend(function(){var e=mw.element('<select class="form-select form-control-live-edit-input" />');i.selectField=e,t.storage().forEach((function(t){var i=document.createElement("option");i._value=t,i.innerHTML=t.name,e.append(i)})),e.on("change",(function(){s()}));var n=mw.element('<div class="form-control-live-edit-label-wrapper m-0 mt-2"></div>');return n.append(e),n}()),mw.spinner({element:i.ui.iconsHolder.get(0),size:30}).show(),e=function(){s(),mw.spinner({element:i.ui.iconsHolder.get(0)}).hide()},n=t.storage(),a=n.length,r=0,n.forEach((function(t){var i;t._iconsLists?++r===a&&e.call(n,n):(i=t).icons().then((function(t){i._iconsLists=t,++r===a&&e.call(n,n)}))}))},this.get=function(){return this.ui.root.get(0)},this.dialog=function(e){if("hide"!==e)return this._dialog||(this._dialog=mw.top().dialog({content:this.get(),title:"Select icon",closeButtonAction:"hide",width:450,overlayClose:!0}),this._dialog.dialogContainer.style.padding="0px",this._dialog.overlay.style.backgroundColor="transparent",mw.components._init()),this._dialog.show(),this._dialog;this._dialog.hide()},this.destroy=function(){this.get().remove(),this._dialog&&this._dialog.remove(),this._tooltip&&this._tooltip.remove()},this.target=null,this.tooltip=function(e){if(this.target=e,"hide"===e&&this._tooltip)this._tooltip.style.display="none";else if(this._tooltip?mw.tools.tooltip.setPosition(this._tooltip,e,"bottom-center"):this._tooltip=mw.tooltip({content:this.get(),element:e,position:"bottom-center"}),this._tooltip.style.display="block",1===e.nodeType){var t=getComputedStyle(e);$('[type="number"],[type="range"]',this._tooltip).val(parseFloat(t.fontSize)),$('[type="color"]',this._tooltip).val(mw.color.rgbOrRgbaToHex(t.color))}return mw.components._init(),this._tooltip},this.init=function(){this.create()},this.promise=function(){return new Promise((function(e){i.on("select",(function(t){e(t)}))}))},this.init()};mw.iconPicker=function(t){return new e(t)}}(),mw.tree=function(e){var t=this;this.config=function(e){window.mwtree=(void 0===window.mwtree?0:window.mwtree)+1,e.id||void 0!==typeof e.saveState||(e.saveState=!1);var t={data:[],openedClass:"opened",selectedClass:"selected",skin:"default",multiPageSelect:!0,saveState:!0,stateStorage:{get:function(e){return mw.storage.get(e)},set:function(e,t){mw.storage.set(e,t)}},sortable:!1,resizable:!1,resizableOn:"tree",nestedSortable:!1,singleSelect:!1,clickSelect:!1,selectedData:[],openSelectedDataItems:!0,skip:[],contextMenu:!1,append:!1,prepend:!1,selectable:!1,selectableNodes:!1,disableSelectTypes:[],filter:!1,cantSelectTypes:[],document,_tempRender:!0,filterRemoteURL:null,filterRemoteKey:"keyword",toggleSelect:!0,contextMenuMode:"inline"},i=$.extend({},t,e);i.element=mw.$(i.element)[0],i.data=i.data||[],this.options=i,this.document=i.document,this._selectionChangeDisable=!1,this.stateStorage=this.options.stateStorage,this.options.selectedData?this.selectedData=this.options.selectedData:this.selectedData=[]},this.filterLocal=function(e,i){if(i=i||"title",e=(e||"").toLowerCase().trim()){var n=!1;t.options.data.forEach((function(o){-1===o[i].toLowerCase().indexOf(e)?t.hide(o):(t.show(o),n=!0)})),this.dispatch(n?"searchResults":"searchNoResults"),mw.$(t.options.element)[n?"removeClass":"addClass"]("mw-tree-no-results")}else this.dispatch("searchResults"),t.showAll()},this._filterRemoteTime=null,this.filterRemote=function(e,i){clearTimeout(this._filterRemoteTime),this._filterRemoteTime=setTimeout((function(){i=i||"title",e=(e||"").toLowerCase().trim();var n={};n[t.options.filterRemoteKey]=e,$.get(t.options.filterRemoteURL,n,(function(e){t.setData(e)}))}),777)},this.filter=function(e,t){this.options.filterRemoteURL&&this.options.filterRemoteKey?this.filterRemote(e,t):this.filterLocal(e,t)};var i={};this.on=function(e,t){i[e]?i[e].push(t):i[e]=[t]},this.dispatch=function(e,t){i[e]&&i[e].forEach((function(e){e.call(this,t)}))},this.search=function(){if(!0===this.options.searchInput){const t=mw.element(`\n                <div>\n                    <label class="live-edit-label">${mw.lang("Search for page or category")}</label>\n                    <div class="form-control-live-edit-label-wrapper">\n                        <input type="text" class="form-control-live-edit-input">\n                        <span class="form-control-live-edit-bottom-effect"></span>\n                    </div>\n                </div>\n\n                `);this.options.searchInput=t.find("input").get(0),this.options.searchInputClassName&&(this.options.searchInput.className=this.options.searchInputClassName),this.options.searchInput.placeholder=this.options.searchInputPlaceholder||mw.lang("Search"),this.options.searchInputSticky&&minputTemplate.css({position:"sticky",top:"20px",zIndex:"1",margin:"9px 15px 15px 0",width:"100%",maxWidth:"100%"}),this.options.searchInput.addEventListener("input",(function(){e.search()})),setTimeout((function(){mw.$(e.options.element).before(t.get(0))}),200)}if(this._seachInput=mw.$(this.options.searchInput),this._seachInput[0]&&!this._seachInput[0]._tree){this._seachInput[0]._tree=this;var e=this;this._seachInput.on("input",(function(){e.filter(this.value)}))}},this.skip=function(e){if(this.options.skip&&this.options.skip.length>0){for(var i=0;i<t.options.skip.length;i++){var n=t.options.skip[i],o=n.id==e.id&&n.type==e.type,s=0!=e.parent_id&&e.parent_id==n.id&&n.type==e.type;if(o||s)return!0}return!1}},this.prepareData=function(){if("object"==typeof this.options.filter){var e=[],t=this;for(var i in this.options.filter)$.each(this.options.data,(function(){this[i]&&this[i]==t.options.filter[i]&&e.push(this)}));this.options.data=e}},this._postCreated=[],this.json2ul=function(){this.list=t.document.createElement("ul"),this.list._tree=this,this.options.id=this.options.id||"mw-tree-"+window.mwtree,this.list.id=this.options.id,this.list.className="mw-defaults mw-tree-nav mw-tree-nav-skin-"+this.options.skin,this.list._id=0,this.options.data.forEach((function(e){var i=t.getParent(e);if(i){var n=t.createItem(e);n&&i.appendChild(n)}else void 0===i&&t._postCreated.push(e)})),this.options._tempRender&&this.tempRend()},this._tempPrepare=function(){for(var e=0;e<this._postCreated.length;e++){var t=this._postCreated[e];0!==t.parent_id&&(this.options.data.find((function(e){return e.id==t.parent_id}))||(t.parent_id=0,t.parent_type="page"))}},this.tempRend=function(){this._tempPrepare();for(var e=t._postCreated[0],i=0;t._postCreated.length&&i<1e4;){i++;var n=t._postCreated.indexOf(e),o="#"+t.options.id+"-"+e.type+"-"+e.id,s=o.charAt(o.length-1);if("."!==s&&"#"!==s||(o=o.substring(0,o.length-1)),mw.$(o)[0])t._postCreated.splice(n,1),e=t._postCreated[0];else{var a=t.getParent(e);if(a&&!$(o)[0]){var r=t.createItem(e);r&&a.appendChild(r),t._postCreated.splice(n,1),e=t._postCreated[0]}else void 0===a&&(e=t._postCreated[n+1]||t._postCreated[0])}}},this._triggerChange=function(){this._selectionChangeDisable||(mw.$(t).trigger("selectionChange",[t.selectedData]),t.dispatch("selectionChange",t.selectedData))},this.setData=function(e){this.options.data=e,this._postCreated=[],this._ids=[],this.init()},this.saveState=function(){if(this.options.saveState){var e=[];mw.$("li."+this.options.openedClass,this.list).each((function(){this._data&&e.push({type:this._data.type,id:this._data.id})})),this.stateStorage.set(this.options.id,e)}},this.restoreState=function(e){if(this.options.saveState&&(e||(e=this.stateStorage.get(this.options.id)),e))try{$.each(e,(function(){"string"==typeof this.id&&(this.id=parseInt(this.id,10)),t.open(this.id,this.type)}))}catch(e){}},this.manageUnselected=function(){mw.$("input:not(:checked)",this.list).each((function(){var e=t.parentLi(this);mw.$(e).removeClass(t.options.selectedClass)}))},this.analizeLi=function(e){if("string"==typeof e){if(e=decodeURIComponent(e).trim(),!/^\d+$/.test(e))return mw.$(e)[0];e=parseInt(e,10)}return e},this.select=function(e,i,n){if(void 0===n&&(n=!0),Array.isArray(e))$.each(e,(function(){t.select(this,i,n)}));else{if((e=this.get(e,i))&&e.dataset&&-1===this.options.cantSelectTypes.indexOf(e.dataset.type)){e.classList.add(this.options.selectedClass);var o=e.querySelector("input");o&&(o.checked=!0)}this.manageUnselected(),this.getSelected(),n&&this._triggerChange()}},this.unselect=function(e,i,n){if(void 0===n&&(n=!0),Array.isArray(e))$.each(e,(function(){t.unselect(this,i,n)}));else{if(e=this.get(e,i)){e.classList.remove(this.options.selectedClass);var o=e.querySelector("input");o&&(o.checked=!1)}this.manageUnselected(),this.getSelected(),n&&this._triggerChange()}},this.get=function(e,t){if(void 0===e)return!1;if(null===e)return!1;if(e.nodeType)return e;if("object"==typeof(e=this.analizeLi(e))&&void 0!==e.id)return this.get(e.id,e.type);if("object"==typeof e&&e.constructor===Number&&(e=parseInt(e)),"number"==typeof e){if(!t)return;return this.list.querySelector('li[data-type="'+t+'"][data-id="'+e+'"]')}if("string"==typeof e&&/^\d+$/.test(e)){if(!t)return;return this.list.querySelector('li[data-type="'+t+'"][data-id="'+e+'"]')}return e},this.isSelected=function(e,t){if(e=this.get(e,t)){var i=e.querySelector("input");return!!i&&!0===i.checked}},this.toggleSelect=function(e,t){this.isSelected(e,t)?this.unselect(e,t):this.select(e,t)},this.selectAll=function(e){void 0===e&&(e=!0),this._selectionChangeDisable=!0,this.select(this.options.data),this._selectionChangeDisable=!1,e&&this._triggerChange()},this.unselectAll=function(e){void 0===e&&(e=!0),this._selectionChangeDisable=!0,this.unselect(this.selectedData),this._selectionChangeDisable=!1,e&&this._triggerChange()},this.open=function(e,i,n){Array.isArray(e)?$.each(e,(function(){t.open(this)})):(e=this.get(e,i))&&(e.classList.add(this.options.openedClass),n||this.saveState())},this.show=function(e,i){Array.isArray(e)?$.each(e,(function(){t.show(this)})):(e=this.get(e,i))&&(e.classList.remove("mw-tree-item-hidden"),mw.$(e).parents("li").each((function(){t.show(this),t.open(this)})),setTimeout((function(e){e.classList.remove("mw-tree-item-hidden")}),10,e))},this.showAll=function(){mw.$(this.list.querySelectorAll("li")).removeClass("mw-tree-item-hidden")},this.hide=function(e,i){Array.isArray(e)?$.each(e,(function(){t.hide(this)})):(e=this.get(e,i))&&e.classList.add("mw-tree-item-hidden")},this.hideAll=function(){mw.$(this.list.querySelectorAll("li")).addClass("mw-tree-item-hidden")},this.close=function(e,i,n){Array.isArray(e)?$.each(e,(function(){t.close(this)})):(e=this.get(e,i))&&(e.classList.remove(this.options.openedClass),n||this.saveState())},this.toggle=function(e,t){(e=this.get(e,t))&&(e.classList.toggle(this.options.openedClass),this.saveState())},this.openAll=function(){var e=this.list.querySelectorAll("li");mw.$(e).each((function(){t.open(this,void 0,!0)})),this.saveState()},this.closeAll=function(){var e=this.list.querySelectorAll("li."+this.options.openedClass);mw.$(e).each((function(){t.close(this,void 0,!0)})),this.saveState()},this.button=function(){var e=t.document.createElement("mwbutton");return e.className="mw-tree-toggler",e.onclick=function(){t.toggle(mw.tools.firstParentWithTag(this,"li"))},e},this.addButtons=function(){for(var e=this.list.querySelectorAll("li ul.pre-init"),t=0;t<e.length;t++){var i=e[t];i.classList.remove("pre-init"),mw.$(i).parent().children(".mw-tree-item-content-root").prepend(this.button())}},this.checkBox=function(e){if(-1!==this.options.cantSelectTypes.indexOf(e.dataset.type))return t.document.createTextNode("");var i="radio";this.options.singleSelect||(this.options.multiPageSelect||"page"!==e._data.type)&&(i="checkbox");var n=t.document.createElement("tree-label"),o=t.document.createElement("input"),s=t.document.createElement("span");return o.type=i,o._data=e._data,o.value=e._data.id,o.name=this.list.id,o.className="form-check-input",n.className="form-check",n.appendChild(o),n.appendChild(s),n},this.parentLi=function(e){if(e){if("LI"===e.nodeName)return e;for(;e.parentNode;)if("LI"===(e=e.parentNode).nodeName)return e}},this.getSelected=function(){var e=[],t=this.list.querySelectorAll("li.selected");return mw.$(t).each((function(){this._data&&e.push(this._data)})),this.selectedData=e,this.options.selectedData=e,e},this.decorate=function(e){var t=this.options.selectable&&-1===this.options.disableSelectTypes.indexOf(e._data.type);if(t)mw.$(e.querySelector(".mw-tree-item-content")).prepend(this.checkBox(e));else if(!this.options.selectableNodes){var i=mw.$(e.querySelector(".mw-tree-item-content"));i.css("pointerEvents","none"),setTimeout((e=>{e.children().css("pointerEvents","all")}),10,i)}var n=e.querySelector(".mw-tree-item-content");n.classList.add("item-selectable-"+t),n.appendChild(this.contextMenu(e)),this.sortable(),this.nestedSortable()},this.resizable=function(){var e;this.options.resizable&&("tree"===this.options.resizableOn?e=mw.$(this.list):"treeParent"===this.options.resizableOn&&(e=mw.$(this.options.element)),setTimeout((function(){e.resizable({maxWidth:650,minWidth:200,handles:"e",resize:function(){e[0].id&&t.stateStorage.set("size-"+e[0].id,e[0].style.width)}}),e[0].id&&t.stateStorage.get("size-"+e[0].id)&&(e[0].style.width=t.stateStorage.get("size-"+e[0].id))}),300))};var n=function(e,i){setTimeout((function(){var e=$.extend({},i.item[0]._data),n=i.item[0]._data,o=i.item[0].parentNode.parentNode._data;i.item[0].dataset.parent_id=o?o.id:0,n.parent_id=o?o.id:0,n.parent_type=o?o.id:"page";var s=[];mw.$("li",t.list).each((function(){this._data&&s.push(this._data)})),t.options.data=s;var a=[];mw.$(i.item[0].parentNode).children("li").each((function(){this._data&&a.push(this._data.id)})),mw.$(t).trigger("orderChange",[n,t.options.data,e,a]),t.dispatch("orderChange",[n,t.options.data,e,a])}),110)};this.sortable=function(){if(this.options.sortable){var e=".type-category, .type-page";"string"==typeof this.options.sortable&&(e=this.options.sortable);var i=mw.$(this.list);mw.$("ul",this.list).each((function(){i.push(this)})),this.options.createSortableHandle&&this.options.createSortableHandle(this.list),$.fn.sortable?i.sortable({items:e,start:function(){t._disableClick=!0},stop:function(){setTimeout((()=>{t._disableClick=!1}),78)},axis:"y",listType:"ul",handle:t.options.sortableHandle||".mw-tree-item-title",update:function(e,t){n(0,t)}}):console.log("$.fn.sortable is not defined")}},this.getSameLevelObjects=function(e){var t=this.get(e).parentElement;return Array.from(t.children).map((function(e){return e._data}))},this.getChildObjects=function(e){return Array.from(this.get(e).children).map((function(e){return e._data}))},this.nestedSortable=function(){"string"==typeof this.options.nestedSortable?mw.$(this.options.nestedSortable,this.list).each((function(){$(this).nestedSortable({items:".type-category",listType:"ul",handle:t.options.nestedSortableHandle||".mw-tree-item-title",update:function(e,t){n(0,t)},start:function(){t._disableClick=!0},stop:function(){setTimeout((()=>{t._disableClick=!1}),78)}})})):!0===this.options.nestedSortable&&mw.$("ul",this.list).nestedSortable({items:".type-category",listType:"ul",handle:".mw-tree-item-title",start:function(){t._disableClick=!0},stop:function(){setTimeout((()=>{t._disableClick=!1}),78)},update:function(e,t){n(0,t)}})};var o=null;this.contextMenu=function(e){var i=t.document.createElement("span");if(i.className="mw-tree-context-menu",this.options.contextMenu){var n=t.document.createElement("span"),a=t.document.createElement("span");n.className="mw-tree-context-menu-content-button",n.innerHTML=" ",n.addEventListener("click",(function(i){if(i.stopImmediatePropagation(),Array.from(t.document.querySelectorAll(".context-menu-active")).forEach((function(t){t!==e&&t.classList.remove("context-menu-active")})),e.classList.toggle("context-menu-active"),"dropdown"===t.options.contextMenuMode)if(t.document.querySelectorAll(".mw-tree-context-menu-content-active").forEach((function(e){e.classList.remove("mw-tree-context-menu-content-active")})),e.classList.contains("context-menu-active")){var o=mw.element(n).offset();n.$$menuContent.style.top=o.offsetTop+"px",n.$$menuContent.style.left=o.offsetLeft+"px",n.$$menuContent.style.display="block",n.$$menuContent.classList.add("mw-tree-context-menu-content-active")}else n.$$menuContent.style.display="none",n.$$menuContent.classList.remove("mw-tree-context-menu-content-active")})),a.className="mw-tree-context-menu-content mw-tree-context-menu-content-"+this.options.skin+" mw-tree-context-menu-content-mode-"+this.options.contextMenuMode,i.appendChild(n),n.$$menuContent=a,a.$$menuButton=n,"inline"===this.options.contextMenuMode?i.appendChild(a):"dropdown"===this.options.contextMenuMode&&t.document.body.appendChild(a),$.each(this.options.contextMenu,(function(){if(!this.filter||this.filter(e._data,e)){var i=t.document.createElement("span"),n=t.document.createElement("span");i.title=this.title,i.innerHTML=s(this)+this.title,i.className=((this.className||"")+" mw-tree-context-menu-item ").trim(),-1===this.icon.indexOf("<")?n.className="mw-tree-context-menu-icon "+this.icon:(n.className="mw-tree-context-menu-icon",n.innerHTML=this.icon),i.prepend(n),a.appendChild(i),function(e,t,i){e.onclick=function(n){n.stopImmediatePropagation(),i.action&&i.action.call(t,t,t._data,e)}}(i,e,this)}})),o||(o=!0,t.document.defaultView&&t.document.defaultView.addEventListener("scroll",(function(e){Array.from(t.document.querySelectorAll(".mw-tree-context-menu-content-active")).forEach((function(e){var t=mw.element(e.$$menuButton).offset();e.style.top=t.offsetTop+"px",e.style.left=t.offsetLeft+"px"}))})),t.document.body.addEventListener("click",(function(e){var i=Array.from(t.document.querySelectorAll(".context-menu-active,.mw-tree-context-menu-content-active"));if(i.length)if(t.list.contains(e.target)){var n=mw.tools.firstParentOrCurrentWithTag(e.target,"li");n&&i.forEach((function(e){n.contains(e)||e.classList.remove("context-menu-active","mw-tree-context-menu-content-active")}))}else i.forEach((function(e){e.classList.remove("context-menu-active","mw-tree-context-menu-content-active")}))})))}return i},this.rend=function(){if(this.options.element){var e=mw.$(this.options.element);0!==e.length&&e.empty().append(this.list)}},this._ids=[];var s=function(e){return mw.iconResolver?mw.iconResolver(e.icon)||mw.iconResolver(e.subtype)||mw.iconResolver(e.type):""};this.createItem=function(e){var i="#"+t.options.id+"-"+e.type+"-"+e.id;if(-1!==this._ids.indexOf(i))return!1;this._ids.push(i);var n=t.document.createElement("li");n.dataset.type=e.type,n.dataset.id=e.id,n.dataset.parent_id=e.parent_id;var o=this.skip(e);n.className="type-"+e.type+" subtype-"+(e.icon||e.subtype)+" skip-"+(o||"none")+" tree-item-active-"+(0!==e.is_active);var a=t.document.createElement("span");a.className="mw-tree-item-content";var r=document.createElement("span");return r.className="form-check-label mw-tree-item-title",r.innerHTML=s(e)+e.title,e.is_active||(r.title=mw.lang("Category is hidden")),a.addEventListener("click",(function(i){i.target!==a&&i.target!==r||t.dispatch("itemClick",e)})),a.appendChild(r),n._data=e,n.id=t.options.id+"-"+e.type+"-"+e.id,n.appendChild(a),$(a).wrap('<span class="mw-tree-item-content-root"></span>'),o||(a.onclick=function(e){if(!t._disableClick){var i=e.target,o=!0;!1===t.options.rowSelect&&"TREE-LABEL"!==i.nodeName&&(o=!1),o&&(t.options.selectable||t.options.selectableNodes)&&("singleSelect"!==t.options.selectableNodes&&"singleSelectToggle"!==t.options.selectableNodes||t.unselect(t.selectedData.filter((function(e){return n._data.id!==e.id||n._data.type!==e.type})),void 0,!1),t.options.toggleSelect||"toggle"===t.options.selectableNodes?t.toggleSelect(n):t.select(n))}},this.decorate(n)),n},this.additional=function(e){var i=t.document.createElement("li");i.className="mw-tree-additional-item";var n=t.document.createElement("span"),o=t.document.createElement("span");n.className="mw-tree-item-content",o.className="mw-tree-item-title",n.appendChild(o),i.appendChild(n),$(n).wrap('<span class="mw-tree-item-content-root"></span>'),mw.$(o).append(s(e));var a=t.document.createElement("span");return a.innerHTML=e.title,a.alt=e.title,o.appendChild(a),i.onclick=function(t){e.action&&e.action.call(this,e)},i},this.createList=function(e){var i=t.document.createElement("ul");return i.dataset.type=e.parent_type,i.dataset.id=e.parent_id,i.className="pre-init",i},this.getParent=function(e,t){if(!e.parent_id)return this.list;var i=this.list.querySelector('ul[data-type="'+e.parent_type+'"][data-id="'+e.parent_id+'"]'),n=this.list.querySelector('li[data-type="'+e.parent_type+'"][data-id="'+e.parent_id+'"]');if(i)return i;if(n){var o=this.createItem(e);if(!o)return!1;var s=this.createList(e);return s.appendChild(o),n.appendChild(s),!1}},this.append=function(){this.options.append&&$.each(this.options.append,(function(){t.list.appendChild(t.additional(this))}))},this.prepend=function(){this.options.prepend&&$.each(this.options.append,(function(){mw.$(t.list).prepend(t.additional(this))}))},this.addHelperClasses=function(e,i){i=(i||0)+1,e=e||this.list,mw.$(e.children).addClass("level-"+i).each((function(){var e=this.querySelector("ul");e&&(mw.$(this).addClass("has-children"),t.addHelperClasses(e,i))}))},this.loadSelected=function(){this.selectedData&&(t.select(this.selectedData,void 0,!1),this.options.openSelectedDataItems&&this.selectedData.forEach((e=>{jQuery(this.get(e)).parents("li").each((function(){t.open(this)}))})))},this.init=function(){this.prepareData(),this.json2ul(),this.addButtons(),this.rend(),this.append(),this.prepend(),this.addHelperClasses(),this.restoreState(),this.search(),this.resizable(),setTimeout((()=>{this.loadSelected(),mw.$(this).trigger("ready")}),78)},this.config(e),this.init()},mw.tree.get=function(e){if(e=mw.$(e)[0]){if(mw.tools.hasClass(e,"mw-tree-nav"))return e._tree;var t=e.querySelector(".mw-tree-nav");if(t)return t._tree;var i=mw.tools.firstParentWithClass(e,"mw-tree-nav");return i?i._tree:void 0}},mw.tags=mw.chips=function(e){e.element=mw.$(e.element)[0],e.size=e.size||"sm",this.options=e,this.options.map=this.options.map||{title:"title",value:"id",image:"image",icon:"icon"},this.map=this.options.map;var t=this,i={};this.on=function(e,t){i[e]?i[e].push(t):i[e]=[t]},this.dispatch=function(e,t){i[e]&&i[e].forEach((function(e){e.call(this,t)}))},this.refresh=function(){mw.$(t.options.element).empty(),this.rend()},this.setData=function(e){this.options.data=e,this.refresh()},this.rend=function(){t.options.element.classList.add("mw-tags--container","d-flex","flex-wrap","gap-3"),$.each(this.options.data,(function(e){var i=$.extend({index:e},this);t.options.element.appendChild(t.tag(i))})),this.options.inputField&&t.options.element.appendChild(this.addInputField())},this.addInputField=function(){return this._field=document.createElement("input"),this._field.className="mw-ui-invisible-field mw-ui-field-"+this.options.size,this._field.onkeydown=function(e){var i=t._field.value.trim();if(mw.event.is.enter(e)||mw.event.is.comma(e))e.preventDefault(),i&&t.addTag({title:i});else if(mw.event.is.backSpace(e)&&!i){var n=t.options.data[t.options.data.length-1];t.removeTag(t.options.data.length-1),t._field.value=t.dataTitle(n)+" ",t._field.focus()}t.handleAutocomplete(i,e)},this._field},this.handleAutocomplete=function(e,t){this.options.autocomplete},this.dataValue=function(e){return"string"==typeof e?e:e[this.map.value]},this.dataImage=function(e){if(e[this.map.image]){var t=document.createElement("span");return t.className="mw-ui-btn-img",t.style.backgroundImage="url("+e.image+")",t}},this.dataTitle=function(e){return"string"==typeof e?e:e[this.map.title]},this.dataIcon=function(e){return"string"==typeof e?void 0:e[this.map.icon]},this.createImage=function(e){var t=this.dataImage(e);if(t)return t},this.createIcon=function(e){var t,i=this.dataIcon(e);return!i&&e.type&&(i=mw.iconResolver(e.type)),t="string"==typeof i&&-1===i.indexOf("<")?document.createElement("i"):i,mw.element(t).get(0)},this.removeTag=function(e){var i=this.options.data[e];this.options.data.splice(e,1),this.refresh(),mw.$(t).trigger("tagRemoved",[i,this.options.data]),mw.$(t).trigger("change",[i,this.options.data])},this.unique=function(){var e=this.options.data[0];if(e){var t=this.options.map.value;e[t]||(t=this.options.map.title);for(var i=0,n=e,o=function(e){return(isNaN(e[t])?e[t].toLowerCase():e[t])==(isNaN(n[t])?n[t].toLowerCase():n[t])};n;)this.options.data.findIndex(o)===i?i++:this.options.data.splice(i,1),n=this.options.data[i]}},this.addTag=function(e,i){i="number"==typeof i?i:this.options.data.length,this.options.data.splice(i,0,e),this.unique(),this.refresh(),this._field&&this._field.focus(),mw.$(t).trigger("tagAdded",[e,this.options.data]),mw.$(t).trigger("change",[e,this.options.data])},this.tag=function(e){var i={close:!0,tagBtnClass:"btn btn-"+this.options.size};$.extend(i,e),i.tagBtnClass+="  btn",this.options.outline&&(i.tagBtnClass+="-outline"),this.options.color&&(i.tagBtnClass+="-"+this.options.color),this.options.rounded&&(i.tagBtnClass+=" btn-rounded");var n=document.createElement("span"),o=document.createElement("span");o._index=i.index,n._index=i.index,n._config=i,n.dataset.index=i.index,n.className="btn-group",e.image,n.innerHTML='<span class="'+i.tagBtnClass+'">'+this.dataTitle(i)+"</span>","function"==typeof this.options.disableItem&&this.options.disableItem(i)&&(n.className+=" disabled"),"function"==typeof this.options.hideItem&&this.options.hideItem(i)&&(n.className+=" hidden");var s=this.createIcon(i),a=this.createImage(i);return a&&mw.$(":first-child",n).prepend(a),s&&mw.$(":first-child",n).prepend(s),n.onclick=function(e){e.target!==o&&(mw.$(t).trigger("tagClick",[this._config,this._index,this]),t.dispatch("tagClick",[this._config,this._index,this]))},o.className=i.tagBtnClass+" btn-icon",o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n            <path d="M4 7l16 0"></path>\n            <path d="M10 11l0 6"></path>\n            <path d="M14 11l0 6"></path>\n            <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>\n            <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>\n         </svg>',i.close&&(o.onclick=function(){t.removeTag(this._index)}),n.appendChild(o),n},this.init=function(){this.rend(),$(this.options.element).on("click",(function(e){e.target===t.options.element&&$("input",this).focus()}))},this.init()},mw.treeTags=mw.treeChips=function(e){this.options=e,this.options.on=this.options.on||{};var t=this,i=e.tagsHolder||mw.$('<div class="mw-tree-tag-tags-holder"></div>'),n=e.treeHolder||mw.$('<div class="mw-tree-tag-tree-holder"></div>'),o=$.extend({},this.options,{element:n});this.tree=new mw.tree(o);var s=$.extend({},this.options,{element:i,data:(()=>(this.options.selectedData||[]).map((e=>Object.assign({},e,t.tree.get(e)._data))))(this.options.selectedData)});this.tags=new mw.tags(s),mw.$(this.options.element).append(i),mw.$(this.options.element).append(n),mw.$(this.tags).on("tagClick",(function(e,i){var n=t.tree.get(i);n&&t.tree.show(i),n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})),mw.$(this.tags).on("tagRemoved",(function(e,i){t.tree.unselect(i)})),mw.$(this.tree).on("selectionChange",(function(e,i){t.tags.setData(i),t.options.on.selectionChange&&t.options.on.selectionChange(i)}))},mw.uiAccordion=function(e){if(e){e.element=e.element||".mw-accordion";var t=this;this.getContents=function(){this.contents=this.root.children(this.options.contentSelector),this.contents.length||(this.contents=mw.$(),this.root.children(this.options.itemSelector).each((function(){var e=mw.$(this).children(t.options.contentSelector)[0];e&&t.contents.push(e)})))},this.getTitles=function(){this.titles=this.root.children(this.options.titleSelector),this.titles.length||(this.titles=mw.$(),this.root.children(this.options.itemSelector).each((function(){var e=mw.$(this).children(t.options.titleSelector)[0];e&&t.titles.push(e)})))},this.prepare=function(e){this.options=$.extend({},{multiple:!1,itemSelector:".mw-accordion-item,mw-accordion-item",titleSelector:".mw-accordion-title,mw-accordion-title",contentSelector:".mw-accordion-content,mw-accordion-content",openFirst:!0,toggle:!0},e),this.root=mw.$(this.options.element).not(".mw-accordion-ready").eq(0),this.root.length&&(this.root.addClass("mw-accordion-ready"),this.root[0].uiAccordion=this,this.getTitles(),this.getContents())},this.getItem=function(e){return"number"==typeof e?this.contents.eq(e):mw.$(e)},this.set=function(e){var t=this.getItem(e);this.options.multiple||this.contents.not(t).slideUp().removeClass("active").prev().removeClass("active").parents(".mw-accordion-item").eq(0).removeClass("active"),t.stop().slideDown().addClass("active").prev().addClass("active").parents(".mw-accordion-item").eq(0).addClass("active"),mw.$(this).trigger("accordionSet",[t])},this.unset=function(e){if(void 0!==e){var t=this.getItem(e);t.stop().slideUp().removeClass("active").prev().removeClass("active").parents(".mw-accordion-item").eq(0).removeClass("active"),mw.$(this).trigger("accordionUnset",[t])}},this.toggle=function(e){var t=this.getItem(e);t.hasClass("active")?this.options.toggle&&this.unset(t):this.set(t)},this.init=function(e){this.prepare(e),void 0!==this.contents&&this.contents.hide(),this.options.openFirst&&(void 0!==this.contents&&this.contents.eq(0).show().addClass("active"),void 0!==this.titles&&this.titles.eq(0).addClass("active").parent(".mw-accordion-item").addClass("active")),void 0!==this.titles&&this.titles.on("click",(function(){t.toggle(t.titles.index(this))}))},this.init(e)}},mw.tabAccordion=function(e,t){if(e){var i=this;this.options=e,this.options.breakPoint=this.options.breakPoint||800,this.options.activeClass=this.options.activeClass||"active",this.buildAccordion=function(){this.accordion=t||new mw.uiAccordion(this.options)},this.breakPoint=function(){matchMedia("(max-width: "+this.options.breakPoint+"px)").matches?(mw.$(this.nav).hide(),mw.$(this.accordion.titles).show()):(mw.$(this.nav).show(),mw.$(this.accordion.titles).hide())},this.createTabButton=function(e,t){this.buttons=this.buttons||mw.$();var n=document.createElement("span");this.buttons.push(n),this.options.tabsSize&&this.options.tabsSize,this.options.tabsColor&&this.options.tabsColor;var o=0===t?" "+this.options.activeClass:"";return n.className=o+" mw-admin-action-links mw-adm-liveedit-tabs mx-1",n.innerHTML=e,n.onclick=function(){i.buttons.removeClass(i.options.activeClass).eq(t).addClass(i.options.activeClass),i.accordion.set(t)},n},this.createTabs=function(){this.nav=document.createElement("div"),this.nav.className="mx-3 mb-3",mw.$(this.accordion.titles).each((function(e){i.nav.appendChild(i.createTabButton($(this).html(),e))})).hide(),mw.$(this.accordion.root).before(this.nav)},this.init=function(){this.buildAccordion(),this.createTabs(),this.breakPoint(),mw.$(window).on("load resize orientationchange",(function(){i.breakPoint()}))},this.init()}},function(e){e.dialog=function(t){return new e.Dialog(t)},e.dialogIframe=function(t,i){t.pauseInit=!0,t.autoHeight&&(t.height="auto"),t.content='<iframe src="'+e.external_tool(t.url.trim())+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; display-capture" allowfullscreen></iframe>',t.className=("mw-dialog-iframe mw-dialog-iframe-loading "+(t.className||"")).trim(),t.className+=t.autoHeight?" mw-dialog-iframe-autoheight":"";var n=new e.Dialog(t,i);n.iframe=n.dialogContainer.querySelector("iframe"),e.tools.loading(n.dialogContainer,90),n.dialogContainer.style.minHeight="100px",e.spinner({element:n.dialogContainer,size:32,decorate:!0}).show(),t&&t.id&&(n.iframe.id=t.id+"-content-window");var o="calc(100vh - 140px)";return setTimeout((function(){var i=n.dialogContainer.querySelector("iframe");i.style.minHeight=0,i.loading="lazy",t.autoHeight?e.tools.iframeAutoHeight(i,{dialog:n,maxHeightWindowScroll:o}):($(i).height(t.height-60),i.style.position="relative",i.style.maxHeight=o),e.$(i).on("load",(function(){e.tools.loading(n.dialogContainer,!1),e.spinner({element:n.dialogContainer,size:32,decorate:!0}).remove(),setTimeout((function(){n.center(),e.$(i).on("bodyResize",(function(){n.center()})),n.dialogMain.classList.remove("mw-dialog-iframe-loading"),e.tools.canAccessIFrame(i)&&i&&i.contentWindow&&i.contentWindow.thismodal&&(i.contentWindow.thismodal=n,t.autoHeight&&e.tools.iframeAutoHeight(i,{dialog:n,maxHeightWindowScroll:o}))}),78),e.tools.canAccessIFrame(i)&&e.$(i.contentWindow.document).on("keydown",(function(t){if(e.event.is.escape(t)&&!e.event.targetIsField(t))if(e.top().__dialogs&&e.top().__dialogs.length){var i=e.top().__dialogs;i[i.length-1]._doCloseButton(),$(i[i.length-1]).trigger("closedByUser")}else n.options.closeOnEscape&&(n._doCloseButton(),$(n).trigger("closedByUser"))})),"function"==typeof t.onload&&t.onload.call(n)}))}),12),n},e.modal=e.dialog,e.modalFrame=e.dialogIframe,e.dialog.remove=function(t){var i=e.dialog.get(t);i&&i.remove()},e.dialog.get=function(t){t=t||".mw-dialog";var i=e.$(t),n=i[0];if(!n)return!1;if(n._dialog)return n._dialog;var o=n.querySelector(".mw-dialog-holder"),s=i.parents(".mw-dialog-holder:first");return o?o._dialog:0!==s.length?s[0]._dialog:window.thismodal?thismodal:(o=n.querySelector(".mw_modal"),s=i.parents(".mw_modal:first"),o?o.modal:0!==s.length&&s[0].modal)},e.Dialog=function(t,i){var n=this;(t=t||{}).content=t.content||t.html||"",t.height||void 0!==t.autoHeight||(t.height="auto",t.autoHeight=!0);var o={skin:"default",overlay:!0,overlayClose:!1,autoCenter:!0,root:document,id:t.name||t.id||e.id("mw-dialog-"),content:"",closeOnEscape:!0,closeButton:!0,closeButtonAppendTo:".mw-dialog-header",closeButtonAction:"remove",draggable:!0,scrollMode:"inside",centerMode:"intuitive",containment:"window",overflowMode:"auto",disableTextSelection:!1};this.options=$.extend({},o,t,{}),this.id=this.options.id;var s=document.getElementById(this.id);return s?s._dialog:(this.hasBeenCreated=function(){return null!==this.options.root.getElementById(this.id)},this.hasBeenCreated()?this.options.root.getElementById(this.id)._dialog:(e.top().__dialogs||(e.top().__dialogs=[]),e.top().__dialogsData||(e.top().__dialogsData={}),e.top().__dialogsData._esc||(e.top().__dialogsData._esc=!0,e.$(document).on("keydown",(function(t){if(e.event.is.escape(t)){var i=e.top().__dialogs[e.top().__dialogs.length-1];i&&i.options&&i.options.closeOnEscape&&i._doCloseButton()}}))),e.top().__dialogs.push(this),this.draggable=function(){if(this.options.draggable&&$.fn.draggable){var t=e.$(this.dialogHolder);t.draggable({handle:this.options.draggableHandle||".mw-dialog-header",start:function(){t.addClass("mw-dialog-drag-start"),n._dragged=!0},stop:function(){t.removeClass("mw-dialog-drag-start")},containment:n.options.containment,scroll:!1,iframeFix:!0})}},this.header=function(){this.dialogHeader=this.options.root.createElement("div"),this.dialogHeader.className="mw-dialog-header",(this.options.title||this.options.header)&&(this.dialogHeader.innerHTML='<div class="modal-title settings-title-inside">'+(this.options.title||this.options.header)+"</div>")},this.footer=function(e){this.dialogFooter=this.options.root.createElement("div"),this.dialogFooter.className="mw-dialog-footer",this.options.footer&&$(this.dialogFooter).append(this.options.footer)},this.title=function(t){var i=e.$(".mw-dialog-title",this.dialogHeader);if(void 0===t)return i.html();i[0]?i.html(t):e.$(this.dialogHeader).prepend('<div class="modal-title settings-title-inside">'+t+"</div>")},this.build=function(){this.dialogMain=this.options.root.createElement("div"),this.options.disableTextSelection&&(this.dialogMain.style.userSelect="none"),this.dialogMain.id=this.id;var t="mw-dialog mw-dialog-scroll-mode-"+this.options.scrollMode+" mw-dialog-skin-"+this.options.skin+" mw-dialog-overflowMode-"+this.options.overflowMode;t+=this.options.className?" "+this.options.className:"",this.dialogMain.className=t,this.dialogMain._dialog=this,this.dialogHolder=this.options.root.createElement("div"),this.dialogHolder.id="mw-dialog-holder-"+this.id,this.dialogHolder._dialog=this,this.header(),this.footer(),this.draggable(),this.dialogContainer=this.options.root.createElement("div"),this.dialogContainer._dialog=this,this.container=this.dialogContainer,this.dialogContainer.className="mw-dialog-container",this.dialogHolder.className="mw-dialog-holder";var i=this.options.content;return this.options.shadow?(this.shadow=this.dialogContainer.attachShadow({mode:"open"}),"string"==typeof i?this.shadow.innerHTML=i:this.shadow.appendChild(i)):e.$(this.dialogContainer).append(i),this.options.encapsulate&&(this.iframe=i,this.iframe.style.display=""),this.dialogHolder.appendChild(this.dialogHeader),this.dialogHolder.appendChild(this.dialogContainer),this.dialogHolder.appendChild(this.dialogFooter),this.closeButton=this.options.root.createElement("div"),this.closeButton.className="mw-dialog-close",this.closeButton.$scope=this,this.closeButton.onclick=function(e){e.preventDefault(),this.$scope[this.$scope.options.closeButtonAction](),$(this.$scope).trigger("closedByUser")},this.main=e.$(this.dialogContainer),this.main.width=this.width,this.width(this.options.width||600),this.height(this.options.height||320),this.options.root.body.appendChild(this.dialogMain),this.dialogMain.appendChild(this.dialogHolder),this.options.closeButtonAppendTo?!1!==this.options.closeButton&&e.$(this.options.closeButtonAppendTo,this.dialogMain).append(this.closeButton):!1!==this.options.closeButton&&this.dialogHolder.appendChild(this.closeButton),this.dialogOverlay(),this},this._doCloseButton=function(){this[this.options.closeButtonAction]()},this.containmentManage=function(){if("window"===n.options.containment&&"inside"===n.options.scrollMode){var t=this.dialogHolder.getBoundingClientRect(),i=e.$(window),o=i.scrollTop(),s=i.height();(t.top<o||o+s>t.top+t.height)&&this.center()}},this.dialogOverlay=function(){return this.overlay=this.options.root.createElement("div"),this.overlay.className="mw-dialog-overlay",this.overlay.$scope=this,!0!==this.options.overlay&&"string"!=typeof this.options.overlay||(this.dialogMain.appendChild(this.overlay),"string"==typeof this.options.overlay&&(this.overlay.style.backgroundColor=this.options.overlay)),e.$(this.overlay).on("click",(function(){"function"==typeof this.$scope.options.overlayClose?!0===this.$scope.options.overlayClose()&&(this.$scope._doCloseButton(),$(this.$scope).trigger("closedByUser")):!0===this.$scope.options.overlayClose&&(this.$scope._doCloseButton(),$(this.$scope).trigger("closedByUser"))})),this},this._afterSize=function(){if(e._iframeDetector){e._iframeDetector.pause=!0;var t=window.frameElement;if(t&&parent!==top){var i=this.dialogContainer.scrollHeight+this.dialogHeader.scrollHeight;$(t).height()<i&&(t.style.height=i+100-this.dialogHeader.offsetHeight-this.dialogFooter.offsetHeight+"px",window.thismodal&&thismodal.height(i+100))}}},this.show=function(){return e.$(this.dialogMain).find("iframe").each((function(){this._intPause=!1})),e.$(this.dialogMain).addClass("active"),this.center(),this._afterSize(),e.$(this).trigger("Show"),e.trigger("mwDialogShow",this),this},this._hideStart=!1,this.hide=function(){return this._hideStart||(this._hideStart=!0,e.$(this.dialogMain).find("iframe").each((function(){this._intPause=!0})),setTimeout((function(){n._hideStart=!1}),300),e.$(this.dialogMain).removeClass("active"),e._iframeDetector&&(e._iframeDetector.pause=!1),e.$(this).trigger("Hide"),e.trigger("mwDialogHide",this)),this},this.forceRemove=function(){e.$(this.dialogMain).remove();for(var t=0;t<e.top().__dialogs.length;t++)if(e.top().__dialogs[t]===this){e.top().__dialogs.splice(t,1);break}return clearInterval(this._observe.interval),this},this.remove=function(){e.$(this).trigger("BeforeRemove"),"function"==typeof this.options.beforeRemove&&!1===this.options.beforeRemove(this)||(this.hide(),e.removeInterval("iframe-"+this.id),this.options.onremove&&this.options.onremove(),e.$(this).trigger("Remove"),e.trigger("mwDialogRemove",this),this.forceRemove())},this.destroy=this.remove,this._prevHeight=-1,this._dragged=!1,this.center=function(t,i){var o,s=e.$(this.dialogHolder),a=e.$(window),r=i||s.outerHeight(),l=t||s.outerWidth(),c={};return("intuitive"===this.options.centerMode&&this._prevHeight<r||"center"===this.options.centerMode)&&(o=a.height()/2-r/2),n._dragged?c.left=parseFloat(s.css("left")):c.left=a.outerWidth()/2-l/2,c.left+l>a.width()&&(c.left=c.left-(c.left+l-a.width())),o&&(c.top=o>0?o:0),s.css(c),this._prevHeight=r,this._afterSize(),e.$(this).trigger("dialogCenter"),this},this.width=function(t){if(!t)return e.$(this.dialogHolder).outerWidth();e.$(this.dialogHolder).width(t),this._afterSize()},this.height=function(t){if(!t)return e.$(this.dialogHolder).outerHeight();e.$(this.dialogHolder).height(t),this._afterSize()},this.resize=function(e,t){void 0!==e&&this.width(e),void 0!==t&&this.height(t),this.center(e,t)},this.content=function(e){return this.options.content=e||"",$(this.dialogContainer).empty().append(this.options.content),this},this.result=function(e,t){this.value=e,this.options.onResult&&this.options.onResult.call(this,e),i&&i.call(this,e),$(this).trigger("Result",[e]),t&&this._doCloseButton()},this.contentMaxHeight=function(){var t=this;"inside"===this.options.scrollMode&&e.interval("iframe-"+this.id,(function(){var i=e.$(window).height()-t.dialogHeader.clientHeight-t.dialogFooter.clientHeight-40;t.dialogContainer.style.maxHeight=i+"px",t.dialogContainer.style.maxHeight="calc(100vh - 100px)",t.containmentManage()}))},this._observe={},this.observeDimensions=function(e){this._observe.interval||(this._observe.interval=setInterval((function(){var t=function(){var e=getComputedStyle(n.dialogMain);return n._observe.data?(n._observe.data,n._observe.data={width:e.width,height:e.height},{width:e.width,height:e.height}):(n._observe.data={width:e.width,height:e.height},{width:e.width,height:e.height})}();t&&e.call(n,t)}),333))},this.position=function(e,t){if(e)return n._dragged=!0,"object"==typeof e&&(t=e.y,e=e.x),void 0===t&&(t=e),"number"==typeof e&&(e+="px"),"number"==typeof t&&(t+="px"),this.dialogHolder.style.left=e,this.dialogHolder.style.top=t,this},this.positionToElement=function(t){if(!t)return;var i=$(t)[0],n=i.ownerDocument.defaultView;let o=e.element(i).offset();if(n.frameElement){var s=e.top().element(n.frameElement).offset();o.offsetTop+=s.offsetTop,o.offsetLeft+=s.offsetLeft}this.position(o.offsetLeft,o.offsetTop+o.height),setTimeout((()=>{const t=e.element(this.dialogHolder).offset();t.offsetTop+t.height>e.top().win.innerHeight&&this.position(o.offsetLeft-t.width,e.top().win.innerHeight-t.height)}),10)},this.calculateDialogPositionXY=function(e){var t;let i=(t=self!==top?this.getElementPositionInFrames(e):this.getElementPositionOnScreen(e)).x,n=t.y,o=e.getBoundingClientRect(),s=(this.dialogMain.getBoundingClientRect(),this.positionDialogWithoutOverlap(this.dialogMain,e));s&&(i=s.x,n=s.y),i<0&&(i=0),n<0&&(n=0),console.log("innerWidth",o.width),console.log("innerHeight",o.height),console.log("newPositionX",i),console.log("newPositionY",n),this.options.position={x:i,y:n},this.position(i,n)},this.positionDialogWithoutOverlap=function(e,t){for(var i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=i.width,s=i.height,a=n.left,r=n.top,l=n.width,c=n.height,d=window;d!==top;){var m=d.frameElement.getBoundingClientRect();a+=m.left,r+=m.top,d=d.parent}var h,u,p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-r-c;return p-a-l>=o?(h=a+l,u=Math.max(r+(c-s)/2,0)):f>=s?(h=a+(l-o)/2,u=r+c):(h=a+l,u=Math.max(r+(c-s)/2,0)),{x:h,y:u}},this.getElementPositionInFrames=function(e){for(var t=0,i=0,n=window;n!==top;){var o=n.frameElement.getBoundingClientRect(),s=e.getBoundingClientRect();t+=o.left+s.left,i+=o.top+s.top,n=n.parent}return{x:t,y:i}},this.getElementPositionOnScreen=function(e){var t=e.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,o=t.left+i,s=t.top+n,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{x:o=Math.min(Math.max(o,0),a-e.offsetWidth),y:s=Math.min(Math.max(s,0),r-e.offsetHeight)}},this.init=function(){return this.build(),this.contentMaxHeight(),this.options.position||this.center(),this.show(),this.options.autoCenter&&function(t){e.$(window).on("resize orientationchange load",(function(){t.contentMaxHeight(),t.center()}))}(this),this.options.pauseInit||e.$(this).trigger("Init"),this.observeDimensions((function(){n.center()})),this.options.position&&this.position(this.options.position),this},void this.init()))},e.Dialog.elementIsInDialog=function(t){return e.tools.firstParentWithClass(t,"mw-dialog")}}(window.mw),function(){function e(){var e=document.querySelectorAll("style[scoped]"),t=0;try{for(;t<e.length;t++){var i=e[t].parentNode;i.id=i.id||mw.id("scoped-id-");for(var n="#"+i.id+" ",o=e[t].sheet.rules,s=0;s<o.length;s++){var a=n+o[s].cssText;e[t].sheet.deleteRule(s),e[t].sheet.insertRule(a,s)}e[t].removeAttribute("scoped")}}catch(e){}}e(),$(window).on("load",(function(){e()}))}();const Alert=function(e){var t='<div class="mw_alert"><div class="mw-alert-holder">'+e+'</div><div class="mw-alert-footer !p-0"><span class="btn btn-primary mb-2" onclick="mw.dialog.remove(this);"><b>'+mw.msg.ok+"</b></span></div></div>";return 0===mw.$("#mw_alert").length?mw.dialog({html:t,width:400,height:"auto",overlay:!1,name:"mw_alert",template:"mw_modal_basic"}):(mw.$("#mw_alert .mw-alert-holder").html(e),mw.$("#mw_alert")[0].modal)},Prompt=function(e,t,i){if(e){var n=document.createElement("input");n.className="form-control-live-edit-input";var o=document.createElement("span");o.className="form-control-live-edit-bottom-effect";var s=mw.$('<div class="form-control-live-edit-label-wrapper"><label class="live-edit-label">'+e+"</label> </div>");s.append(n,o);var a=mw.$('<div class="mw-dialog-footer">'),r=mw.$('<button type="button" disabled class="btn btn-primary">'+mw.lang("OK")+"</button>"),l=mw.$('<span class="btn">'+mw.lang("Cancel")+"</span>");a.append(l),a.append(r),console.log(mw.top());var c,d=mw.top().dialog({content:s,title:e,footer:a}),m=new Promise((e=>{c=e}));return r.on("click",(function(){t&&t.call(window,n.value),c(n.value),d.remove()})),l.on("click",(function(){c(!1),d.remove()})),i&&(n.value=i.trim()),setTimeout((function(){n.focus()}),50),n.oninput=function(){var e=this.value.trim();r[0].disabled=!e},n.onkeydown=function(e){mw.event.is.enter(e)&&this.value.trim()&&(t&&t.call(window,n.value),c(n.value),d.remove())},{dialog:d,promise:()=>m}}},Confirm=function(e,t,i){"function"==typeof e&&(t=e,e="Are you sure?");var n,o,s='<div class="mw_alert"><div class="mw-alert-holder">'+(e=e||"Are you sure?")+"</div></div>",a=mw.top().$('<span tabindex="99999" class="btn btn-primary mb-3">'+mw.msg.ok+"</span>"),r=mw.top().$('<span class="btn btn-link ">'+mw.msg.cancel+"</span>"),l=new Promise((e=>{o=e}));if(0===mw.$("#mw_confirm_modal").length?n=mw.top().dialog({content:s,width:400,height:"auto",autoHeight:!0,overlay:!0,name:"mw_confirm_modal",footer:[r,a],title:mw.lang("Confirm")}):(mw.$("#mw_confirm_modal .mw-alert-holder").html(e),n=mw.$("#mw_confirm_modal")[0]._dialog),a.on("keydown",(function(e){13!==e.keyCode&&32!==e.keyCode||(t&&t.call(window),n.remove(),o(!0),e.preventDefault())})),n.dialogHeader){var c=n.dialogHeader.querySelector(".mw-dialog-close");c&&c.addEventListener("click",(function(){o(!1),i&&i.call()}))}return r.on("click",(function(){i&&i.call(),o(!1),n.remove()})),a.on("click",(function(){t&&t.call(window),o(!0),setTimeout((function(){n.remove()}),78)})),setTimeout((function(){mw.$(a).focus()}),120),{dialog:n,promise:()=>l}};class FieldBaseClass extends containers_base_class{constructor(){super()}#c=null;$setValue(e,t=!0){return e===this.#c||(this.#c=e,this.dispatch("$change",this.#c),t&&this.dispatch("change",this.#c)),this}getValue(){return this.#c}}class Select extends FieldBaseClass{constructor(e={}){super();const t={id:mw.id("field-"),name:mw.id("field-name-"),value:"",label:"",placeholder:"",options:[]};this.settings=Object.assign({},t,e)}setValue(e,t){this.select.value=e,this.$setValue(e,t)}onRendered(){this.select.addEventListener("input",(e=>{this.$setValue(this.select.value)}))}render(){return`\n        <div>\n            <label class="form-label" for="${this.settings.id}">${this.settings.label}</label>\n            <select\n                ref="select"\n                type="text"\n                class="form-select"\n                id="${this.settings.id}"\n                name="${this.settings.name}"\n                ${this.settings.placeholder?` placeholder="${this.settings.placeholder}" `:""}\n                ${this.settings.required?"  required ":""}\n                >\n                ${this.settings.placeholder?` <option selected disabled>${this.settings.placeholder} `:""}\n\n                ${this.settings.options.map((e=>`<option ${e.value==this.settings.value?" selected ":""} value="${e.value}">${e.title}</option>`)).join("")}\n            </select>\n        </div>\n        `}}class Checkbox extends FieldBaseClass{constructor(e={}){super();const t={id:mw.id("field-"),name:mw.id("field-name-"),value:[1,2],label:"",options:[]};this.settings=Object.assign({},t,e)}setValue(e,t){const i=this.checkboxList.querySelectorAll("input");for(let t=0;t<e.length;t++)for(let n=0;n<i.length;n++)i[t].checked=i[t].value==e[t];this.$setValue(e,t)}syncValue(){const e=[],t=this.checkboxList.querySelectorAll("input");for(let i=0;i<t.length;i++)t[i].checked&&e.push(t[i].value);this.$setValue(e,!0)}onRendered(){this.checkboxList.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(e=>{this.syncValue()}))}))}render(){return`\n        <div>\n            <label class="form-label">${this.settings.label}</label>\n            <div ref="checkboxList">\n                ${this.settings.options.map((e=>{const t=mw.id("field-");return`\n                        <div class="form-check">\n                            <input\n                                class="form-check-input"\n                                type="checkbox"\n                                value="${e.value}"\n                                id="${t}"\n                                ${e.value==this.settings.value?" checked ":""}>\n                            <label class="form-check-label" for="${t}" >\n                                ${e.title}\n                            </label>\n                        </div>`})).join("")}\n            </div>\n        </div>\n        `}}class Text extends FieldBaseClass{constructor(e={}){super();const t={id:mw.id("field-"),name:mw.id("field-name-"),value:"",label:"",placeholder:""};this.settings=Object.assign({},t,e)}setValue(e,t){this.field.value=e,this.$setValue(e,t)}onRendered(){this.field.addEventListener("input",(e=>{this.$setValue(this.field.value)}))}render(){return`\n        <div>\n            <label class="form-label" for="${this.settings.id}">${this.settings.label}</label>\n            <input\n                type="text"\n                ref="field"\n                class="form-control"\n                id="${this.settings.id}"\n                name="${this.settings.name}"\n                ${this.settings.placeholder?` placeholder="${this.settings.placeholder}" `:""}\n                ${this.settings.required?"  required ":""}\n                >\n        </div>`}}class Email extends FieldBaseClass{constructor(e={}){super();const t={id:mw.id("field-"),name:mw.id("field-name-"),value:"",label:"",placeholder:""};this.settings=Object.assign({},t,e)}setValue(e,t){this.field.value=e,this.$setValue(e,t)}onRendered(){this.field.addEventListener("input",(e=>{this.$setValue(this.field.value)}))}render(){return`\n            <div>\n                <label class="form-label" for="${this.settings.id}">${this.settings.label}</label>\n                <input\n                    ref="field"\n                    type="email"\n                    class="form-control"\n                    id="${this.settings.id}"\n                    name="${this.settings.name}"\n                    ${this.settings.placeholder?` placeholder="${this.settings.placeholder}" `:""}\n                    ${this.settings.value?` value="${this.settings.value}" `:""}\n                    ${this.settings.required?"  required ":""}\n                >\n            </div>\n        `}}const types={text:Text,email:Email,select:Select,checkbox:Checkbox};class SchemaForm extends containers_base_class{constructor(e={}){super(),this.settings=Object.assign({},{data:[],target:null},e),this.fields=[],this.root=document.createElement("div"),this.render()}getValue(){return this.fields.map((e=>({name:e.name,value:e.getValue()})))}setValue(e,t){for(let i=0;i<e.length;i++){const n=this.getFieldByName(e[i].name);n&&n.setValue(e[i].value,t)}}getFieldByName(e){return this.fields.find((t=>t.name===e))}renderSingle(e){const t=new types[e.type](e);t.name=e.name;const i=mw.element(t.render());this.root.appendChild(i.get(0));const n=i.get(0).querySelectorAll("[ref]");for(let e=0;e<n.length;e++)t[n[e].getAttribute("ref")]=n[e];t.onRendered&&t.onRendered(),t.on("change",(e=>{this.dispatch("change",this.getValue())})),this.fields.push(t)}render(){this.root.innerHTML="",this.fields=[];for(let e=0;e<this.settings.data.length;e++){const t=this.settings.data[e];t.type&&types.hasOwnProperty(t.type)&&this.renderSingle(t)}"string"==typeof this.settings.target&&(this.settings.target=document.querySelector(this.settings.target)),this.settings.target&&this.settings.target.appendChild(this.root),this.setValue(this.settings.data,!1),this.dispatch("ready",this.getValue())}}const control_box_css="\n    .mw-control-box.active {\n        z-index: 100;\n    }\n    .mw-control-box {\n        position: fixed;\n        padding: 20px;\n        z-index: 99;\n    }\n    .mw-control-box-default {\n        padding: 0;\n        transition: all .5s;\n        background: white;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n    }\n    .mw-control-box-default.mw-control-box-right {\n        transform: translateX(100%);\n    }\n    .mw-control-box-default.mw-control-box-right.active {\n        transform: translateX(0);\n    }\n    .mw-control-box-default.mw-control-box-left {\n        transform: translateX(-100%);\n    }\n    .mw-control-box-default.mw-control-box-left.active {\n        transform: translateX(0);\n    }\n    .mw-control-box-top {\n        top: 0;\n        left: 0;\n        width: 100%;\n    }\n    .mw-control-box-bottom {\n        bottom: 0;\n        left: 0;\n        width: 100%;\n    }\n    .mw-control-box-right {\n        top: 0;\n        right: 0;\n        height: 100%;\n    }\n    .mw-control-box-left {\n        top: 0;\n        left: 0;\n        height: 100%;\n    }\n    .mw-control-box {\n        position: fixed;\n        z-index: 12;\n    }\n    .mw-control-box-default .mw-control-boxclose:after {\n        content: '';\n    }\n    .mw-control-box-default .mw-control-boxclose {\n        position: absolute;\n        z-index: 10;\n        width: 20px;\n        height: 20px;\n        text-align: center;\n        top: 10px;\n        right: 10px;\n    }\n";class ControlBox extends containers_base_class{constructor(e){super(e),this.config(e),this.init()}config(e){this.options=e,this.defaults={position:"bottom",content:"",skin:"default",id:this.options.id||"mw-control-box-"+mw.random(),closeButton:!0},this.id=this.options.id,this.settings=Object.assign({},this.defaults,this.options),this.active=!1,this.css("mwControlBox",control_box_css,!1)}build(){this.box=document.createElement("div"),this.box.className="mw-control-box mw-control-box-"+this.settings.position+" mw-control-box-"+this.settings.skin,this.box.id=this.id,this.boxContent=document.createElement("div"),this.boxContent.className="mw-control-boxcontent",this.box.appendChild(this.boxContent),this.createCloseButton(),document.body.appendChild(this.box)}position(e){return void 0===e||(this.box.classList.remove("mw-control-box-"+this.settings.position),this.settings.position=e,this.box.classList.add("mw-control-box-"+this.settings.position)),this.settings.position}createCloseButton(){this.options.closeButton&&(this.closeButton=document.createElement("span"),this.closeButton.className="mw-control-boxclose",this.closeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>',this.box.appendChild(this.closeButton),this.closeButton.addEventListener("click",(e=>this.hide())))}setContentByUrl(){const e=this.settings.content.trim();return $.get(e,(e=>{this.boxContent.innerHTML=e,this.settings.content=e}))}setContent(e){const t=e||this.settings.content.trim();if(this.settings.content=t,0===t.indexOf("http://")||0===t.indexOf("https://"))return this.setContentByUrl();this.boxContent.innerHTML=t}show(){this.active=!0,mw.$(this.box).addClass("active"),mw.$(this).trigger("ControlBoxShow")}init(){this.build(),this.setContent()}hide(){this.active=!1,mw.$(this.box).removeClass("active"),mw.$(this).trigger("ControlBoxHide")}remove(){this.hide(),mw.$(this.box).remove(),mw.$(this).trigger("ControlBoxRemove")}toggle(){this[this.active?"hide":"show"]()}}const SystemDialogsService={moduleFrame:function(e,t,i){if(void 0===i&&(i=!0),t=t||{},e){var n=document.createElement("iframe");return n.className="mw-editor-frame",n.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",n.allowFullscreen=!0,n.scrolling="auto",n.width="100%",n.frameBorder="0",n.src=route("live_edit.module_settings")+"?type="+e+"&params="+$.param(t).split("&").join(","),i&&mw.tools.iframeAutoHeight(n),n}},confirm_reset_module_by_id:function(e,t,i){var n='<div class=""><h4 class="">'+mw.lang("Are you sure you want to reset this module ?")+'</h4><div class=""><br>'+mw.lang("You will delete all settings of the module !")+"<br>"+mw.lang("This operation cannot be undone !")+"</div></div>";i&&(n=i),mw.confirm(n,(function(){var i=mw.$("#"+e).attr("data-module-original-id"),n=mw.$("#"+e).attr("data-module-original-attrs");if(i){var o=JSON.parse(window.atob(n));o&&(mw.$("#"+e).removeAttr("data-module-original-id"),mw.$("#"+e).removeAttr("data-module-original-attrs"),mw.$("#"+e).removeAttr("data-module-original-attrs"),mw.$("#"+e).attr(o).reload_module(),mw.top().win.module_settings_modal_reference_preset_editor_thismodal&&mw.top().win.module_settings_modal_reference_preset_editor_thismodal.remove())}else{mw.$("#"+e).removeAttr("data-module-id-from-preset");var s={};s.modules_ids=[e];var a=[];mw.$("#"+e).andSelf().find(".edit").each((function(e){var t={};mw.tools.removeClass(this,"changed"),t.rel=mw.$(this).attr("rel"),t.field=mw.$(this).attr("field"),a.push(t)})),mw.$("#"+e).andSelf().find(".module").each((function(e){var t=mw.$(this).attr("id");s.modules_ids.push(t)})),window.mw.on.DOMChangePause=!0;var r=0,l=1;a.length&&(l++,$.ajax({type:"POST",url:mw.settings.api_url+"content/reset_edit",data:{reset:a}}).always((function(){++r===l&&t&&t.call()}))),$.ajax({type:"POST",url:mw.settings.api_url+"content/reset_modules_settings",data:s,success:function(){setTimeout((function(){mw.$("#"+e).removeAttr("data-module-original-id"),mw.reload_module("#"+e),window.mw.on.DOMChangePause=!1}),1e3),++r===l&&t&&t.call()}})}}))},open_reset_content_editor:function(e){var t={live_edit:!0,module_settings:!0,id:"mw_global_reset_content_editor",type:"editor/reset_content",iframe:!0};t.from_url=mw.app.canvas.getWindow().location.href;var i=route("live_edit.module_settings")+"?"+json2url(t);void 0!==e&&(i=i+"&root_element_id="+e),mw.dialogIframe({url:i,name:"mw-reset-content-editor-front",title:"Reset content",template:"default",center:!1,resize:!0,autosize:!0,autoHeight:!0,draggable:!0})},open_global_module_settings_modal:function(e,t,i,n){var o={};o.id=t,o.live_edit=!0,o.iframe=!0,o.module_settings=!0,o.type=e,o.autosize=!1;var s=$.extend({},o,n);i=i||{};var a={url:route("live_edit.module_settings")+"?"+json2url(s),height:"auto",autoHeight:!0,name:"mw-module-settings-editor-front",title:"Settings",template:"default",center:!1,resize:!0,draggable:!0},r=$.extend({},a,i);return mw.top().dialogIframe(r)},open_module_modal:function(e,t,i){var n=mw.id("module-modal-"),o=n+"-content";i=i||{};var s=!1;if(void 0!==(l=$.extend({},{content:'<div class="module-modal-content" id="'+o+'"></div>',id:n},i,{skin:"default"})).iframe&&l.iframe&&(s=!0),s){var a={};a.type=e;var r=$.extend({},t,a),l={url:route("live_edit.module_settings")+"?"+json2url(r),name:"mw-module-settings-editor-front",title:"Settings",center:!1,resize:!0,draggable:!0,height:"auto",autoHeight:!0};return mw.top().dialogIframe(l)}delete l.skin,delete l.template,l.height||(l.height="auto",l.autoHeight=!0),l.encapsulate=!1;var c=mw.dialog(l);return{xhr:mw.load_module(e,"#"+o,(function(){setTimeout((function(){c.center()}),333)}),t),modal:c}}},template_preview_service_css="\n\n\n    .mw-preview-iframe {\n        width: 200%;\n        transform: scale(.5);\n        top: 0;\n        position: absolute;\n        left: 0;\n        transform-origin: 0 0;\n        border: 1px solid silver;\n        transition: .3s;\n    }\n    .mw-template-preview-container{\n        width: 100%;\n        position: relative;\n    }\n    .mw-template-preview-container.preview-in-self {\n        height: calc(80vh - 80px);\n    }\n    .mw-template-preview-container.preview-in-self .mw-preview-iframe{\n        height: calc(160vh - 160px) !important;\n    }\n\n    .mw-template-preview-container.preview-in-iframe {\n        height: 800px;\n    }\n    .mw-template-preview-container.preview-in-iframe iframe {\n        height: 1600px !important;\n    }\n\n    .mw-template-preview-container.has-mw-spinner iframe{\n        opacity: 0;\n    }\n\n\n";class TemplatePreview extends containers_base_class{constructor(e={}){super();const t={element:null,document,id:mw.id(),className:"mw-preview-iframe"};this.settings=Object.assign({},t,e),"string"==typeof this.settings.element?this.element=document.querySelector(this.settings.element):this.element=this.settings.element,this.css("TemplatePreview",template_preview_service_css)}createFrame(){var e=document.createElement("iframe");return this.frame=e,e.src=this.url,e.className=this.settings.className,e.id=this.settings.id,e.tabIndex=-1,e.frameborder=0,e.addEventListener("load",(()=>{this.afterLoad(),this.frame.contentWindow.document.documentElement.className="mw-template-document-preview"})),e}set(){this.frame.contentWindow.scrollTo(0,0)}afterLoad(){this.set(),mw.spinner({element:this.element}).remove(),this.dispatch("iframeLoaded",{url:this.url})}rend(e){this.url=e;const t=this.element.querySelector("iframe");t&&t.remove(),self!==top?this.element.classList.add("preview-in-iframe"):this.element.classList.add("preview-in-self"),mw.spinner({element:this.element,size:32}).show();const i=this.createFrame(this.url);return this.element.classList.add("mw-template-preview-container"),this.element.append(i),i}}var UIFormControllers,Uploader,FileManager;mw.autoComplete=function(e){var t=this;this.prepare=function(e){((e=e||{}).data||e.ajaxConfig)&&(this.options=$.extend({},{size:"normal",multiple:!1,map:{title:"title",value:"id"},titleDecorator:function(e,t){return e}},e),this.options.element=mw.$(this.options.element)[0],this.options.element&&(this.element=this.options.element,this.data=this.options.data,this.searchTime=null,this.searchTimeout=this.options.data?0:500,this.results=[],this.map=this.options.map,this.selected=this.options.selected||[]))},this.createValueHolder=function(){return this.valueHolder=document.createElement("div"),this.valueHolder.className="mw-autocomplete-value",this.valueHolder},this.createListHolder=function(){return this.listHolder=document.createElement("ul"),this.listHolder.className="mw-ui-box mw-ui-navigation mw-autocomplete-list",this.listHolder.style.display="none",this.listHolder},this.createWrapper=function(){return this.wrapper=document.createElement("div"),this.wrapper.className="form-select ps-4 mw-live-edit-search-dropdown mw-autocomplete mw-autocomplete-multiple-"+this.options.multiple,this.wrapper},this.createField=function(){return this.inputField=document.createElement("input"),this.inputField.className="mw-ui-invisible-field mw-autocomplete-field mw-ui-field-"+this.options.size,this.inputField.name=this.options.name||"search",this.inputField.autocomplete="off",this.options.placeholder&&(this.inputField.placeholder=this.options.placeholder),mw.$(this.inputField).on("input focus",(function(e){var i="focus"===e.type?"":this.value;t.search(i)})),this.inputField},this.buildUI=function(){this.createWrapper(),this.wrapper.appendChild(this.createValueHolder()),this.wrapper.appendChild(this.createField()),this.wrapper.appendChild(this.createListHolder()),this.element.appendChild(this.wrapper)},this.createListItem=function(e){var i=document.createElement("li");i.value=this.dataValue(e);var n=this.dataImage(e),o="javascript:void(0);";return e.url&&(o=e.url),mw.$(i).append('<a  onclick="return false;" href="'+o+'">'+this.dataTitle(e)+"</a>").on("click",(function(i){t.select(e)})),n&&mw.$("a",i).prepend(n),i},this.uniqueValue=function(){var e=[],i=[];this.selected.forEach((function(n){var o=t.dataValue(n);-1===e.indexOf(o)&&(e.push(o),i.push(n))})),this.selected=i},this.select=function(e,t=!0){this.options.multiple?this.selected.push(e):this.selected=[e],this.rendSelected(),this.options.multiple||(this.listHolder.style.display="none"),t&&mw.$(this).trigger("change",[this.selected])},this.rendSingle=function(){var e=this.selected[0];this.inputField.value=e?e[this.map.title]:"",this.valueHolder.innerHTML="";var t=this.dataImage(e);t&&this.valueHolder.appendChild(t)},this.rendSelected=function(){this.options.multiple?(this.uniqueValue(),this.chips.setData(this.selected)):this.rendSingle()},this.rendResults=function(){mw.$(this.listHolder).empty().show(),"string"!=typeof this.results&&this.results&&void 0!==this.results.length||console.warn("results object must be array"),$.each(this.results,(function(){t.listHolder.appendChild(t.createListItem(this))}))},this.dataValue=function(e){if(e)return"string"==typeof e?e:e[this.map.value]},this.dataImage=function(e){if(e&&(e.picture&&(e.image=e.picture),e.image)){var t=document.createElement("span");return t.className="mw-autocomplete-img",t.style.backgroundImage="url("+e.image+")",t}},this.dataTitle=function(e){var t;if(e)return t="string"==typeof e?e:e[this.map.title],this.options.titleDecorator(t,e)},this.searchRemote=function(e){var i=mw.tools.cloneObject(this.options.ajaxConfig);i.data&&("string"==typeof i.data?i.data=i.data.replace("${val}",e):$.each(i.data,(function(t,n){n.indexOf&&-1!==n.indexOf("${val}")&&(i.data[t]=n.replace("${val}",e))}))),i.url&&(i.url=i.url.replace("${val}",e)),mw.spinner({element:this.element,decorate:!0,size:22}),this.element.classList.add("mw-autocomplete-loading"),$.ajax(i).done((function(e){e.data?t.data=e.data:t.data=e,t.results=t.data||[],t.rendResults()})).always((function(){t.searching=!1,mw.spinner({element:t.element}).remove(),t.element.classList.remove("mw-autocomplete-loading")}))},this.searchLocal=function(e){this.results=[],$.each(this.data,(function(){-1!==("string"==typeof this?this.toLowerCase():this[t.map.title].toLowerCase()).indexOf(e)&&t.results.push(this)})),this.rendResults(),t.searching=!1},this.search=function(e){t.searching||(e=(e=e||"").trim().toLowerCase(),this.options.data?this.searchLocal(e):(clearTimeout(this.searchTime),setTimeout((function(){t.searching=!0,t.searchRemote(e)}),this.searchTimeout)))},this.init=function(){this.prepare(e),this.buildUI(),this.options.multiple&&(this.chips=new mw.chips({element:this.valueHolder,data:[]})),this.rendSelected(),this.handleEvents()},this.handleEvents=function(){mw.$(document.body).on("click",(function(e){mw.tools.hasParentsWithClass(e.target,"mw-autocomplete")||(t.listHolder.style.display="none")})),mw.top().app&&mw.top().app.canvas&&mw.top().app.canvas.on("canvasDocumentClick",(function(){t.listHolder.style.display="none"}))},this.init()},mw.Select=function(e){var t={data:[],skin:"default",multiple:!1,autocomplete:!1,mobileAutocomplete:!1,showSelected:!1,document,size:"normal",color:"default",dropMode:"over",placeholder:mw.lang("Select"),tags:!1,ajaxMode:{paginationParam:"page",searchParam:"keyword",endpoint:null,method:"get"}};e=e||{},this.settings=$.extend({},t,e);var i={};if(this.on=function(e,t){return i[e]?i[e].push(t):i[e]=[t],this},this.dispatch=function(e,t){return i[e]&&i[e].forEach((function(e){e.call(this,t)})),this},this.settings.ajaxMode&&!this.settings.ajaxMode.endpoint&&(this.settings.ajaxMode=!1),this.$element=$(this.settings.element).eq(0),this.element=this.$element[0],this.element){if(this._rootInputMode="INPUT"===this.element.nodeName,this.element._mwSelect)return this.element._mwSelect;var n=this;this.document=this.settings.document,this._value=null,this.getLabel=function(e){return e.title||e.name||e.label||e.value},this._loading=!1,this._page=1,this.nextPage=function(){this._page++},this.page=function(e){if(void 0===e)return this._page;this._page=e},this.loading=function(e){if(void 0===e)return this._state;this._state=e,mw.tools.classNamespaceDelete(this.root,"mw-select-loading-"),mw.tools.addClass(this.root,"mw-select-loading-"+e)},this.xhr=null,this.ajaxFilter=function(e,t){this.xhr&&this.xhr.abort(),e=(e||"").trim().toLowerCase();var i={};i[this.settings.ajaxMode.searchParam]=e,i=(-1===this.settings.ajaxMode.endpoint.indexOf("?")?"?":"&")+$.param(i),this.xhr=$[this.settings.ajaxMode.method](this.settings.ajaxMode.endpoint+i,(function(e){t.call(this,e),n.xhr=null}))},this._disabled=!1,this.disable=()=>{this._disabled=!0,this.root.classList.add("disabled")},this.enable=()=>{this._disabled=!1,this.root.classList.remove("disabled")},this.disabled=e=>{if(void 0===e)return this._disabled;!0===e?this.disable():!1===e&&this.enable()},this.enabled=e=>{if(void 0===e)return!this._disabled;!1===e?this.disable():!0===e&&this.enable()},this.filter=function(e){if(e=(e||"").trim().toLowerCase(),this.settings.ajaxMode)this.loading(!0),this.ajaxFilter(e,(function(e){n.setData(e.data),e.data&&e.data.length?n.open():n.close(),n.loading(!1)}));else{var t=this.root.querySelectorAll(".mw-select-option"),i=0;if(e)for(;i<t.length;i++)t[i].style.display=-1!==this.getLabel(t[i].$value).toLowerCase().indexOf(e)?"":"none";else for(;i<t.length;i++)t[i].style.display=""}},this.setPlaceholder=function(e){return this.displayValue(e)},this.displayValue=function(e){void 0===e&&!this.settings.multiple&&this.value()&&(e=n.getLabel(this.value())),e=void 0===e?this.settings.placeholder:e,n._displayValue||(n._displayValue=n.document.createElement("span"),n._displayValue.className="mw-select-display-value mw-ui-size-"+this.settings.size,$(".mw-select-value",this.root).append(n._displayValue)),this._rootInputMode?(n._displayValue.innerHTML="&nbsp",$("input.mw-ui-invisible-field",this.root).val(e)):n._displayValue.innerHTML=e+this.__indicateNumber()},this.__indicateNumber=function(){return this.settings.multiple&&this.value()&&this.value().length?"<span class='mw-select-indicate-number'>"+this.value().length+"</span>":"<span class='mw-select-indicate-number mw-select-indicate-number-empty'>0</span>"},this.rend={option:function(e){var t=n.document.createElement("label");return t.$value=e,t.className="mw-select-option",n.settings.multiple?(t.className="mw-ui-check mw-select-option",t.innerHTML='<input type="checkbox"><span></span><span>'+n.getLabel(e)+"</span>",$("input",t).on("change",(function(){this.checked?n.valueAdd(t.$value):n.valueRemove(t.$value)}))):(t.innerHTML=n.getLabel(e),t.onclick=function(){n.value(t.$value)}),t},value:function(){var e="span",t="btn form-select";n.settings.autocomplete&&(e="span",t="mw-ui-field");var i=n.document.createElement(e);return i.className=t+"btn-"+n.settings.size+" mw-ui-bg-"+n.settings.color+" mw-select-value",n.settings.autocomplete?i.innerHTML='<input type="text" class="mw-ui-invisible-field mw-ui-field-'+n.settings.size+'">':i.innerHTML='<span class="mw-ui-btn-content"></span>',n.settings.autocomplete?$("input",i).on("input focus",(function(e){n.filter(this.value),n._rootInputMode&&(n.element.value=this.value)})).on("keydown",(function(e){(mw.event.is.enter(e)||mw.event.is.comma(e))&&(e.preventDefault(),$(n).trigger("enterOrComma",[this,e]),$(this).val("adsadasd"))})).on("focus",(function(){n.settings.data&&n.settings.data.length&&n.open()})).on("focus blur input",(function(){var e=!!this.value.trim();mw.tools[e?"addClass":"removeClass"](n.root,"mw-select-has-value")})):i.onclick=function(){n.toggle()},i},options:function(){n.optionsHolder=n.document.createElement("div"),n.holder=n.document.createElement("div"),n.optionsHolder.className="mw-select-options";var e=[];return $.each(n.settings.data,(function(){var t=n.rend.option(this);e.push(t),n.holder.appendChild(t)})),n.optionsHolder.appendChild(n.holder),setTimeout((function(){n.dispatch("optionsReady",e)}),10),n.optionsHolder},root:function(){return n.root=n.document.createElement("div"),n.root.className="mw-select mw-select-dropmode-"+n.settings.dropMode+" mw-select-multiple-"+n.settings.multiple,n.root}},this.state="closed",this.open=function(){this.state="opened",mw.tools.addClass(n.root,"active"),mw.Select._register.forEach((function(e){e!==n&&e.close()}))},this.close=function(){this.state="closed",mw.tools.removeClass(n.root,"active")},this.tags=function(){if(this._tags)this._tags.setData(n._value);else if(this.settings.multiple&&this.settings.tags){var e=n.document.createElement("div");e.className="mw-select-tags",this._tags=new mw.tags({element:e,data:n._value||[],color:this.settings.tagsColor,size:this.settings.tagsSize||"small"}),$(this.optionsHolder).prepend(e),mw.$(this._tags).on("tagRemoved",(function(e,t){n.valueRemove(t)}))}this.displayValue()},this.toggle=function(){"closed"===this.state?this.open():this.close()},this._valueGet=function(e){return"number"==typeof e&&(e=this.settings.data.find((function(t){return t.id===e}))),e},this.valueAdd=function(e){e&&(e=this._valueGet(e))&&(this._value||(this._value=[]),this._value.find((function(t){return t.id===e.id}))||(this._value.push(e),$(this.root.querySelectorAll(".mw-select-option")).each((function(){this.$value===e&&(this.querySelector("input").checked=!0)}))),this.afterChange())},this.afterChange=function(){this.tags(),this.displayValue(),$.isArray(this._value)&&($.each(this._value,(function(){})),$(this.root.querySelectorAll(".mw-select-option")).each((function(){-1!==n._value.indexOf(this.$value)?mw.tools.addClass(this,"active"):mw.tools.removeClass(this,"active")}))),$(this).trigger("change",[this._value]),this.dispatch("change",[this._value])},this.valueRemove=function(e){if(e&&(e=this._valueGet(e))){this._value||(this._value=[]);var t=this._value.find((function(t){return t.id===e.id}));t&&this._value.splice(this._value.indexOf(t),1),$(this.root.querySelectorAll(".mw-select-option")).each((function(){this.$value===e&&(this.querySelector("input").checked=!1)})),this.afterChange()}},this._valueToggle=function(e){if(e){this._value||(this._value=[]);var t=this._value.find((function(t){return t.id===e.id}));t?this._value.splice(this._value.indexOf(t),1):this._value.push(e),this.afterChange()}},this.value=function(e){if(!e)return this._value;(e=this._valueGet(e))&&(this.settings.multiple?this._valueToggle(e):(this._value=e,$(".mw-ui-invisible-field",this.root).val(this.getLabel(e)),this.close()),this.afterChange())},this.setData=function(e){$(n.holder).empty(),n.settings.data=e;var t=[];return $.each(n.settings.data,(function(){var e=n.rend.option(this);t.push(e),n.holder.appendChild(e)})),setTimeout((function(){n.dispatch("optionsReady",t)}),10),n.holder},this.addData=function(e){return $.each(e,(function(){n.settings.data.push(this),n.holder.appendChild(n.rend.option(this))})),n.holder},this.build=function(){this.rend.root(),this.root.appendChild(this.rend.value()),this.root.appendChild(this.rend.options()),this._rootInputMode?(this.element.type="hidden",this.$element.before(this.root)):this.$element.html(this.root),this.setPlaceholder(),mw.Select._register.push(this)},this.init=function(){this.build(),this.element._mwSelect=this},this.init()}},mw.Select._register=[],$(document).ready((function(){$(document).on("mousedown touchstart",(function(e){mw.tools.firstParentOrCurrentWithClass(e.target,"mw-select")||mw.Select._register.forEach((function(e){e.close()}))}))})),mw.select=function(e){return new mw.Select(e)},mw.IconClassResolver=function(e){if(!e)return"";switch(e){case"shop":case"page":case"static":case"product":e="mdi mdi-shopping";break;case"website":e="mdi mdi-earth";break;case"module":e="mdi mdi-view-grid-plus";break;case"marketplace":e="mdi mdi-fruit-cherries";break;case"users":e="mdi mdi-account-multiple";break;case"post":e="mdi mdi-text";break;case"category":e="mdi mdi-folder";break;default:e=""}return e},mw.controlFields={__id:(new Date).getTime(),_id:function(){return this.__id++,"le-"+this.__id},_label:function(e){var t=e.id||this._id(),i=document.createElement("label");return i.className=e.className||"live-edit-label",i.innerHTML=e.label||e.content||"",i.htmlFor=t,i},_button:function(e){e.id||this._id();var t=document.createElement("button");t.type=e.type||"button";var i="mw-admin-action-links mw-adm-liveedit-tabs mw-liveedit-button-animation-component";return t.className=i,e.size&&t.classList.add(`${i}-${e.size}`),e.color&&t.classList.add(`${i}-${e.color}`),t.innerHTML=e.label||e.content,t},_wrap:function(){var e=document.createElement("div");return e.className="",[].forEach.call(arguments,(function(t){"string"==typeof t?e.innerHTML+=t:e.append(t)})),e},_description:function(e){return e.description?'<small class="text-muted d-block mb-2">'+e.description+"</small>":""},field:function(e){var t=(e=e||{}).placeholder?'placeholder="'+e.placeholder+'"':"",i=e.id||this._id();i=' id="'+i+'" ';var n=e.name?'name="'+e.name+'"':"";e.type=e.type||"text";var o=e.required?"required":"";return this._wrap(this._label(e),'<div class="form-control-live-edit-label-wrapper"><input type="'+e.type+'" '+t+"  "+i+" "+n+" "+o+' class="form-control-live-edit-input"><span class="form-control-live-edit-bottom-effect"></span></div>')},checkbox:function(e){(e=e||{}).className=e.className||"custom-control-label";var t=e.id||this._id();e.id=t,t=' id="'+t+'" ';var i=e.name?'name="'+e.name+'"':"",n=e.required?"required":"";return this._wrap('<div class="form-control-live-edit-label-wrapper mt-3"><label class="form-check form-check-inline"><input class="form-check-input" type="checkbox" '+t+" "+i+" "+n+'><span class="form-check-label">'+(e.label||e.content||"")+"</span></label></div>")},radio:function(e){var t=(e=e||{}).id||this._id();t=' id="'+t+'" ';var i=' value="'+e.value+'" ',n=e.name?'name="'+e.name+'"':"";return e.required,this._wrap(`\n            <label class="form-check">\n                <input class="form-check-input" type="radio" ${t} ${n} ${i}>\n                <span class="form-check-label">${e.label||e.content||""}</span>\n            </label>\n            `)},select:function(e){var t=(e=e||{}).id||this._id();t=' id="'+t+'" ';var i=e.name?'name="'+e.name+'"':"",n=e.required?"required":"",o=e.multiple?"multiple":"",s=(e.options||[]).map((function(e){return'<option value="'+e.value+'">'+(e.title||e.name||e.label||e.value)+"</option>"})).join("");return this._wrap(this._label(e)+'<select class="form-select" '+o+"  "+t+" "+i+" "+n+">"+s+"</select>")}},mw.emitter={_events:{},_onNative:function(e,t,i){t.trim().split(" ").forEach((function(t){e.addEventListener(t,i)}))},on:function(e,t,i){if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++)this.on(e[n],t,i);else{if(e.nodeName)return this._onNative(e,t,i);this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},dispatch:function(e,t){this._events[e]&&this._events[e].forEach((function(e){e(t)}))}},UIFormControllers={_title:function(e,t){var i=mw.element({tag:"label",props:{className:"form-label font-weight-bold mt-2",innerHTML:e.title}});mw.element(t).append(i)},footer:function(){var e={};return e.ok=mw.controlFields._button({content:mw.lang("OK"),color:""}),e.cancel=mw.controlFields._button({content:mw.lang("Cancel"),color:""}),e.root=mw.controlFields._wrap(e.cancel,e.ok),e.root.className="modal-footer mw-ui-form-controllers-footer border-0 px-2 pb-3",e},title:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},icon:"d-none",title:"Page title"};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.link&&(e.link=i.link),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root";var o="";e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"})),UIFormControllers._title(this.settings,n);var s=[];this.url="";var a=document.createElement("div");a.className="mw-ui-box mw-ui-box-content";var r=mw.controlFields._id();mw.top().$("h1,h12,h3,h4,h5,h6",mw.top().win.document.body).each((function(){if(this.id||mw.tools.isEditable(this)){this.id||(this.id=mw.id("mw-title-element-")),s.push({id:this.id,text:this.textContent});var e=mw.controlFields.radio({label:"<strong>"+this.nodeName+"</strong> - "+this.textContent,name:r,id:mw.controlFields._id(),value:"#"+this.id});mw.element(a).append(e),e.querySelector("input").oninput=function(){t.url=this.value,t.valid()}}}));var l=document.createElement("div");l.append(o),l.append(a);var c=l.querySelector('[name="text"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(c&&!c.value||!this.url)};var d=UIFormControllers.footer();this.setValue=function(e){e=e||{},c&&(c.value=e.text||"")},this.getValue=function(){var e={};return c&&(e.text=c.value),e.url=this.url,e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},mw.emitter.on([c],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(d.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(d.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(l),n.append(d.root),this.valid(),this.root=n},layout:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},icon:"d-none",icon:"d-none",title:"Page section"};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.link&&(e.link=i.link),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root";var o="";e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"})),UIFormControllers._title(this.settings,n);var s=[];(mw.top().app&&mw.top().app.canvas&&mw.top().app.canvas.getWindow()||window).$('.module[data-type="layouts"]').each((function(){s.push({name:(this.getAttribute("template")||this.dataset.template||"").split(".")[0],element:this,id:this.id})}));var a=$('<div class="mw-ui-form-controller--radio-list" />');0===s.length&&a.append('<label class="form-label font-weight-bold mt-2" style="text-align: center;padding: 50px 0;">Current page has no sections in it</label>'),this.link="";var r=mw.id();$.each(s,(function(){var e=mw.controlFields.radio({label:this.name,name:r,id:mw.controlFields._id(),value:this.id}),i=this.element;$(e).find("input").on("click",(function(){mw.top().app.canvas.getWindow().mw.tools.scrollTo(i);var e=mw.top().app.canvas.getWindow().location.href,n=mw.top().app.canvas.getLiveEditData();void 0!==n&&void 0!==n.content_link&&(e=n.content_link);var o=e.split("#")[0]+"#mw@"+i.id;t.link=o,t.url=o,t.src=o,t.valid()})),a.append(e)})),s.length>0&&$(".page-layout-btn").show();var l=document.createElement("div");l.append(o),l.append(a[0]);var c=l.querySelector('[name="text"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(c&&!c.value||!this.link)};var d=UIFormControllers.footer();this.setValue=function(e){e=e||{},c&&(c.value=e.text||"")},this.getValue=function(){var e={};return c&&(e.text=c.value),e.url=t.link,e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},mw.emitter.on([c],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(d.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(d.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(l),n.append(d.root),this.valid(),this.root=n},email:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},link:{label:mw.lang("Email"),description:mw.lang("Type email address in the field"),placeholder:"hello@example.com"},target:{label:mw.lang("Open the link in a new window")},icon:"d-none",title:"Email"};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.link&&(e.link=i.link),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root";var o="",s="",a="";UIFormControllers._title(this.settings,n),e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"})),e.link&&(s=mw.controlFields.field({label:e.link.label,description:e.link.description,placeholder:e.link.placeholder,name:"url"})),e.target&&(a=mw.controlFields.checkbox({label:e.target.label,name:"target"}));var r=document.createElement("div");r.append(o),r.append(s),r.append(a);var l=r.querySelector('[name="text"]'),c=r.querySelector('[name="url"]'),d=r.querySelector('[name="target"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(l&&!l.value)&&!(c&&!c.value)&&c.validity};var m=UIFormControllers.footer();this.setValue=function(e){e=e||{},l&&(l.value=e.text||""),c&&(c.value=e.url||""),d&&(d.checked=e.target)},this.getValue=function(){var e={};return l&&(e.text=l.value),c&&(e.url="mailto:"+c.value),d&&(e.target=d.checked),e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},mw.emitter.on([l,c,d],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(r),n.append(m.root),this.valid(),this.root=n},post:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},target:{label:mw.lang("Open the link in a new window")},url:{label:mw.lang("Search for content")},icon:"d-none",title:mw.lang("All content"),dataUrl:function(){try{return mw.settings.site_url+"api/get_content_admin"}catch(e){return null}}};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root",n.style="min-height: 400px;";var o="",s="";UIFormControllers._title(this.settings,n);var a=document.createElement("input");a.className="form-group mw-link-editor-posts-search",a.autocomplete="off",e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"}));var r=this.settings.dataUrl;r="function"==typeof r?r():r;var l=mw.controlFields._label({content:e.url.label});setTimeout((async()=>{mw.element(a).before(l),await(async()=>{const e=await new Promise((e=>{var t={method:"POST",url:r,body:JSON.stringify({limit:"5",keyword:"",order_by:"updated_at desc",search_in_fields:"title"})};fetch(r,t).then((e=>e.json())).then((t=>{e(t)})).catch((()=>{e()}))}));t.autoComplete=new TomSelect(a,{valueField:"id",labelField:"title",searchField:"title",copyClassesToDropdown:!1,dropdownClass:"dropdown-menu ts-dropdown",optionClass:"dropdown-item",controlInput:"<input>",mode:"single",closeAfterSelect:!0,preload:!0,options:e,onChange:function(e,i){t.valid()},load:function(e,t){$.ajax({url:r,type:"POST",data:{limit:"5",keyword:e||a.value,order_by:"updated_at desc",search_in_fields:"title"},success:function(e){t(e)},error:function(){t()}})},render:{option:function(e,t){return`<div class="py-2 d-flex">\n                            ${e.image?`<div class="icon me-3">\n                            <img class="img-fluid" src="${e.image}" />\n                        </div>`:""}\n\n                                        <div>\n                                            <div class="mb-1">\n                                                <span class="h4">\n                                                    ${t(e.title)}\n                                                </span>\n                                                <span class="text-muted"> - ${t(e.content_type)}</span>\n                                            </div>\n                                             ${e.description?`<div class="description">${t(e.description.substring(0,e.description.indexOf(" ",100)))}</div>`:""}\n                                        </div>\n                                    </div>`},item:function(e,t){return`<div class="d-flex">\n                            ${e.image?`<div class="icon me-3">\n                            <img class="img-fluid" src="${e.image}" />\n                        </div>`:""}\n                                        <div>\n                                            <div class="mb-1">\n                                                <span class="h4">\n                                                    ${t(e.title)}\n                                                </span>\n                                                <span class="text-muted"> - ${t(e.content_type)}</span>\n                                            </div>\n                                            ${e.description?`<div class="description">${t(e.description.substring(0,e.description.indexOf(" ",100)))}</div>`:""}\n                                        </div>\n                                    </div>`}}}),console.log})();var e=mw.dialog.get(a);t.autoComplete.focus_node.addEventListener("click",(e=>{e.stopPropagation(),e.target.focus()})),e&&e.dialogContainer.addEventListener("click",(function(e){mw.tools.hasParentsWithClass(e.target,"ts-wrapper")||t.autoComplete.close()}))}),10),e.target&&(s=mw.controlFields.checkbox({label:e.target.label,name:"target"}));var c=document.createElement("div");c.append(o),c.append(a),c.append(s);var d=c.querySelector('[name="text"]'),m=c.querySelector('[name="target"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(!t.autoComplete||!t.autoComplete.getValue().trim()||d&&!d.value)};var h=UIFormControllers.footer();this.getValue=function(){var e={};d&&(e.text=d.value);var i,n=t.autoComplete.getValue();for(let e in t.autoComplete.options)if(n==t.autoComplete.options[e].id){i=t.autoComplete.options[e];break}return e.url=i?i.url:"",e.data=i,m&&(e.target=m.checked),e},this.setValue=function(e){return e=e||{},d&&(d.value=e.text||""),m&&(m.checked=!!e.target),e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},$(this.autoComplete).on("change",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on([d,m],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(h.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(h.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(c),n.append(h.root),this.valid(),this.root=n},page:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},target:{label:mw.lang("Open the link in a new window")},icon:"d-none",title:"Pages ",dataUrl:function(){try{return mw.top().settings.api_url+"content/get_admin_js_tree_json"}catch(e){return null}}};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="tab-content mw-ui-form-controller-root";var o="",s="";UIFormControllers._title(this.settings,n);var a=document.createElement("div");a.className="form-group",a.style.marginInline="15px;",e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"}),setTimeout((function(){o.querySelector("input").addEventListener("keyup",(function(){t.shouldChange=!1})),o.querySelector("input").addEventListener("paste",(function(){t.shouldChange=!1}))}),78));var r="function"==typeof this.settings.dataUrl?this.settings.dataUrl():this.settings.dataUrl;o&&(t.shouldChange=!o.querySelector("input").value.trim());var l={};$.getJSON(r,(function(e){t.tree=new mw.tree({data:e,element:a,sortable:!1,selectable:!0,singleSelect:!0,searchInputClassName:"form-control-live-edit-input",searchInput:!0}),t.tree.select(l);var i=mw.dialog.get(a);i&&i.center(),t.tree.on("selectionChange",(function(e){d&&e&&e[0]&&t.shouldChange&&(d.value=e[0].title),t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))}))})),e.target&&(s=mw.controlFields.checkbox({label:e.target.label,name:"target"}));var c=document.createElement("div");c.append(o),c.append(a),c.append(s);var d=c.querySelector('[name="text"]'),m=c.querySelector('[name="target"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(d&&!d.value)};var h=UIFormControllers.footer();this.getValue=function(){var e={};d&&(e.text=d.value);var t=this.tree.getSelected()[0];return e.url=t?t.url:"",e.data=t,m&&(e.target=m.checked),e},this.setValue=function(e){return l=e=e||{},e.id&&e.type&&t.tree&&t.tree.select({id:e.id,type:e.type}),d&&(d.value=e.text||""),m&&(m.checked=e.target),e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},mw.emitter.on([d,m],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(h.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(h.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(c),n.append(h.root),this.valid(),this.root=n,setTimeout((function(){o&&(t.shouldChange=!o.querySelector("input").value.trim())}),10)},file:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link.")},target:{label:mw.lang("Open the link in a new window")},icon:"d-none",title:"File",dataUrl:function(){try{return mw.settings.api_url+"content/get_admin_js_tree_json"}catch(e){return null}}};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root";var o="",s="";UIFormControllers._title(this.settings,n);var a=document.createElement("div");a.className="form-group",e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"})),a.append(mw.controlFields._label({content:"Select file"}));var r=this.settings.dataUrl;r="function"==typeof r?r():r,t.filepicker=new mw.filePicker({element:a,nav:"tabs",label:!1}),e.target&&(s=mw.controlFields.checkbox({label:e.target.label,name:"target"}));var l=document.createElement("div");l.append(o),l.append(a),l.append(s);var c=l.querySelector('[name="text"]'),d=l.querySelector('[name="target"]');this.valid=function(){return this.isValid()},this.isValid=function(){return!(c&&!c.value||!this.filepicker.getValue())};var m=UIFormControllers.footer();this.getValue=function(){var e={};c&&(e.text=c.value);var t=this.filepicker.getValue();return Array.isArray(t)&&(t=t[0]),e.url="object"==typeof t?t.src||t.url:t,e.data=t.src||t.url||null,d&&(e.target=d.checked),e},this.setValue=function(e){return e=e||{},c&&(c.value=e.text||""),d&&(d.checked=!!e.target),e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},$(this.filepicker).on("Result",(function(e,i){if(c&&!c.value){var n=i;Array.isArray(n)&&(n=n[0]),"object"==typeof n&&(n=n.name||n.src),c.value=n}t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on([c,d],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(l),n.append(m.root),this.valid(),this.root=n},url:function(e){var t=this,i={text:{label:mw.lang("Link text"),description:mw.lang("Selected text for the link")},link:{label:mw.lang("Website URL"),description:mw.lang("Type the website URL to link it"),placeholder:"http://example.com"},target:{label:mw.lang("Open the link in a new window")},icon:"d-none",title:"URL"};e=mw.object.extend(!0,{},i,e||{}),this.settings=e,!0===e.text&&(e.text=i.text),!0===e.link&&(e.link=i.link),!0===e.target&&(e.target=i.target);var n=document.createElement("div");n.className="mw-ui-form-controller-root";var o="",s="",a="";UIFormControllers._title(this.settings,n),e.text&&(o=mw.controlFields.field({label:e.text.label,description:e.text.description,name:"text"})),e.link&&(s=mw.controlFields.field({label:e.link.label,description:e.link.description,placeholder:e.link.placeholder,name:"url"})),e.target&&(a=mw.controlFields.checkbox({label:e.target.label,name:"target"}));var r=document.createElement("div");r.append(o),r.append(s),r.append(a);var l=r.querySelector('[name="text"]'),c=r.querySelector('[name="url"]'),d=r.querySelector('[name="target"]');c.value=location.protocol+"//",this.valid=function(){return this.isValid()},this.isValid=function(){return!(l&&!l.value||c&&!c.value)};var m=UIFormControllers.footer();this.setValue=function(e){e=e||{},l&&(l.value=e.text||""),c&&(c.value=e.url||""),d&&(d.checked=e.target)},this.getValue=function(){var e={};return l&&(e.text=l.value),c&&(e.url=c.value),d&&(e.target=d.checked),e},this._onChange=[],this.onChange=function(e){this._onChange.push(e)},this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},mw.emitter.on([l,c,d],"input",(function(e){t.valid()&&t._onChange.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.ok,"click",(function(e){t._confirm.forEach((function(e){e(t.getValue())}))})),mw.emitter.on(m.cancel,"click",(function(e){t._cancel.forEach((function(e){e()}))})),n.append(r),n.append(m.root),this.valid(),this.root=n}},mw.UIFormControllers=UIFormControllers,Uploader=function(e){(e=e||{}).accept=e.accept||e.filetypes||e.type;var t,i={multiple:!1,progress:null,element:null,url:e.url||mw.settings.site_url+"plupload",urlParams:{},on:{},autostart:!0,async:!0,accept:"*",chunkSize:15e5},n=this;this.settings=$.extend({},i,e),this.settings.accept=(t=((t=this.settings.accept)||"").trim().toLowerCase())?"image"===t||"images"===t?".png,.gif,.jpg,.jpeg,.bmp,.svg,.ico,.avif,.webp":"video"===t||"videos"===t?".mp4,.webm,.ogg,.wma,.mov,.wmv":"document"===t||"documents"===t?".doc,.docx,.log,.pdf,.msg,.odt,.pages,.rtf,.tex,.txt,.wpd,.wps,.pps,.ppt,.pptx,.xml,.htm,.html,.xlr,.xls,.xlsx":"*":"*";var o={};this.on=function(e,t){o[e]?o[e].push(t):o[e]=[t]},this.dispatch=function(e,t){o[e]&&o[e].forEach((function(e){e.call(this,t)}))},this.getUrl=function(){var e=this.urlParams(),t=mw.tools.isEmptyObject(e);return this.url()+(t?"":"?"+$.param(e))},this.urlParam=function(e,t){if(void 0===t)return this.settings.urlParams[e];this.settings.urlParams[e]=t},this.urlParams=function(e){if(!e)return this.settings.urlParams;this.settings.urlParams=e},this.url=function(e){if(!e)return this.settings.url;this.settings.url=e},this.create=function(){this.input=document.createElement("input"),this.input.multiple=this.settings.multiple,this.input.accept=this.settings.accept,this.input.type="file",this.input.className="mw-uploader-input",this.input.oninput=function(){n.addFiles(this.files)}},this.files=[],this._uploading=!1,this.uploading=function(e){if(void 0===e)return this._uploading;this._uploading=e},this._validateAccept=this.settings.accept.toLowerCase().replace(/\*/g,"").replace(/ /g,"").split(",").filter((function(e){return!!e})),this.validate=function(e){if(!e)return!1;var t="."+e.name.split(".").pop().toLowerCase();if(0===this._validateAccept.length)return!0;for(var i=0;i<this._validateAccept.length;i++){var n=this._validateAccept[i];if(n===t)return!0;if(0===e.type.indexOf(n))return!0}return!1},this.addFile=function(e){this.validate(e)&&(!this.files.length||this.settings.multiple?(this.files.push(e),this.settings.on.fileAdded&&this.settings.on.fileAdded(e),$(n).trigger("FileAdded",e)):(this.files=[e],$(n).trigger("FileAdded",e),this.settings.on.fileAdded&&this.settings.on.fileAdded(e)))},this.addFiles=function(e){if(e&&e.length&&(this.settings.multiple||(e=[e[0]]),e&&e.length)){for(var t=0;t<e.length;t++)n.addFile(e[t]);if(this.settings.on.filesAdded&&!1===this.settings.on.filesAdded(e))return;$(n).trigger("FilesAdded",[e]),this.dispatch("filesAdded",[e]),this.settings.autostart&&this.uploadFiles()}},this.remove=function(){this.input.parentNode&&this.input.parentNode.removeChild(this.input)},this.build=function(){this.settings.element&&(this.$element=$(this.settings.element),this.element=this.$element[0],this.element&&(this.$element.append(this.input),"static"===getComputedStyle(this.element).position&&(this.element.style.position="relative"),this.element.style.overflow="hidden"))},this.show=function(){this.$element.show()},this.hide=function(){this.$element.hide()},this.initDropZone=function(){this.settings.dropZone&&mw.$(this.settings.dropZone).each((function(){$(this).on("dragleave",(function(e){$(this).removeClass("mw-dropzone--drag-over")})).on("dragover",(function(e){$(this).addClass("mw-dropzone--drag-over"),e.preventDefault()})).on("drop",(function(e){$(this).removeClass("mw-dropzone--drag-over");var t=e.dataTransfer||e.originalEvent.dataTransfer;if(e.preventDefault(),t&&t.items){for(var i=[],o=0;o<t.items.length;o++)if("file"===t.items[o].kind){var s=t.items[o].getAsFile();i.push(s)}n.addFiles(i)}else t&&t.files&&n.addFiles(t.files)}))}))},this.init=function(){this.create(),this.build(),this.initDropZone()},this.init(),this.removeFile=function(e){var t=this.files.indexOf(e);t>-1&&this.files.splice(t,1)},this.uploadFile=function(e,t,i,o,s){return new Promise((function(a,r){(function(){return n.settings.on.beforeFileUpload?n.settings.on.beforeFileUpload(this):new Promise((function(e){e()}))})().then((function(){i=i||n.sliceFile(e),o=o||i.length,s=s||0;var l=i.shift(),c={name:e.name,chunk:s,chunks:o,file:l};s++,$(n).trigger("uploadStart",[c]),n.upload(c,(function(r){var l;i.length?(n.uploadFile(e,t,i,o,s).then((function(){t&&t.call(e,r),a(e)}),(function(e){n.settings.on.fileUploadError&&n.settings.on.fileUploadError(e)})),l={percent:(100*s/o).toFixed()},$(n).trigger("progress",[l,r]),n.settings.on.progress&&n.settings.on.progress(l,r)):(l={percent:"100"},$(n).trigger("progress",[l,r]),n.settings.on.progress&&n.settings.on.progress(l,r),$(n).trigger("FileUploaded",[r]),n.dispatch("fileUploaded",r),n.settings.on.fileUploaded&&n.settings.on.fileUploaded(r),t&&t.call(e,r),a(e))}),(function(t){t&&400===t.status&&void 0!==mw.cookie&&mw.cookie.delete("XSRF-TOKEN");var i=!1;t.responseJSON&&t.responseJSON.error&&t.responseJSON.error.message?i=t.responseJSON.error.message:t.responseJSON&&t.responseJSON.error&&t.responseJSON.message&&(i=t.responseJSON.message),i&&mw.notification.warning(i,1e4),n.removeFile(e),r(t)}))}))}))},this.sliceFile=function(e){for(var t=0,i=[],n=e.size<=this.settings.chunkSize?1:1+(e.size/this.settings.chunkSize|0),o=0;o<n;o++){var s=Math.ceil(e.size/n*(o+1));i.push(e.slice(t,s)),t+=s-t}return i},this.uploadFiles=function(){if(this.settings.async)if(this.files.length){this.uploading(!0);var e=this.files[0];n.uploadFile(e).then((function(){n.files.shift(),n.uploadFiles()}),(function(t){n.removeFile(e),n.settings.on.fileUploadError&&n.settings.on.fileUploadError(t)}))}else this.uploading(!1),n.input.value="",n.settings.on.filesUploaded&&n.settings.on.filesUploaded(),this.dispatch("filesUploaded"),$(n).trigger("FilesUploaded");else{var t=0,i=this.files.length;this.uploading(!0),this.files.forEach((function(e){n.uploadFile(e).then((function(e){t++,n.uploading(!1),i===t&&(n.input.value="",n.settings.on.filesUploaded&&n.settings.on.filesUploaded(),$(n).trigger("FilesUploaded"))}),(function(e){n.settings.on.fileUploadError&&n.settings.on.fileUploadError(e)}))}))}},this.upload=function(e,t,i){if(this.settings.url){var o=new FormData;if($.each(e,(function(e,t){o.append(e,t)})),!n.settings.on.uploadStart||!1!==n.settings.on.uploadStart(o)){var s={url:this.getUrl(),type:"post",processData:!1,contentType:!1,data:o,success:function(e,i,o){200===o.status&&(e&&(e.form_data_required||e.form_data_module)?mw.extradataForm(s,e,jQuery.ajax):(n.removeFile(e.file),t&&t.call(e,e)))},error:function(t,o,s){n.removeFile(e.file),i&&i.call(t,t)},dataType:"json",xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;n.settings.on.progressNative&&n.settings.on.progressNative(t,e),$(n).trigger("progressNative",[t,e])}})),e}};return jQuery.ajax(s)}}}},mw.uploadGlobalSettings||(mw.uploadGlobalSettings={}),mw.upload=function(e){return e||(e={}),new Uploader($.extend(!0,{},mw.uploadGlobalSettings,e))},mw.dropZone=(e,t={})=>{e.dropZone&&(t=e,e=e.dropZone),t.dropZone=e,jQuery(e).each(((e,t)=>t.classList.add("mw-dropzone")));const i=mw.upload(t);return i.on("filesAdded",(function(t){mw.spinner({element:e,decorate:!0}).show()})),i.on("filesUploaded",(function(t){mw.spinner({element:e}).remove()})),i},FileManager=function(e){var t=this;e=e||{};var i=function(e,t){return e||(e="white"),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 472 472" style="width: 14px; margin-inline-end:'+t+'px;" xml:space="preserve"><path fill="'+e+'" d="M472 185H287V0H185v185H0v102h185v185h102V287h185V185z"/></svg>'};this.uploadFile=function(e){return this.settings.addFile(e).then((function(){t.refresh(!0)}))},this.methods={pc:function(e){var i=document.createElement("span");i.innerHTML=e.title;var n=mw.upload({multiple:!0,accept:t.settings.type,element:i,on:{fileAdded:function(){t.progress(5)},filesUploaded:function(){t.refresh(!0)},progress:function(e){t.progress(e.percent)},fileUploadError:function(){t.progress(!1)}}});return t.on("pathChanged",(function(e){n.urlParam("path",e)})),i},createFolder:function(e){var i=document.createElement("span");return i.innerHTML=e.title,i.addEventListener("click",(function(){mw.prompt("Folder name",(function(e){var i=new XMLHttpRequest;t.loading(!0),i.onreadystatechange=function(e){4===this.readyState&&200===this.status?t.refresh(!0):this.status,t.loading(!1)},i.addEventListener("error",(function(e){t.loading(!1)}));var n={path:t.settings.query.path,name:e,new_folder:1},o=route("api.file-manager.create-folder")+"?"+new URLSearchParams(n).toString();i.open("POST",o,!0),i.send()}))})),i}};var n={multiselect:!0,selectable:!0,selectableRow:!1,canSelectFolder:!1,selectableFilter:null,options:!1,element:null,query:{order:"desc",orderBy:"filemtime",path:"/"},backgroundColor:"var(--tblr-bg-surface)",stickyHeader:!1,requestData:function(e,i,n){var o=new XMLHttpRequest;e||(e={}),e.limit||(e.limit=50),e.limit=parseFloat(e.limit),e.limit>1e3&&(e.limit=50),t.settings.accept&&(e.filetypes=t.originalAccept,e.extensions=t.settings.accept),t.dispatch("beforeRequest",{xhr:o,params:e}),o.onreadystatechange=function(e){4===this.readyState&&200===this.status?i.call(t,JSON.parse(this.responseText),o):200!==this.status&&4===this.readyState&&n&&n.call(t,e)},o.addEventListener("error",(function(e){n&&n.call(t,e)}));var s=t.settings.url+"?"+new URLSearchParams(e||{}).toString();o.open("GET",s,!0),o.send()},addFile:function(e){return new Promise((function(i,n){var o=new XMLHttpRequest;t.dispatch("beforeAddFile",{xhr:o,input}),o.onreadystatechange=function(e){4===this.readyState&&200===this.status?i(JSON.parse(this.responseText)):200!==this.status&&n(e)},o.addEventListener("error",(function(e){n(e)}));var s=t.settings.url+"?path="+t.settings.query.path;o.open("PUT",s,!0);var a=new FormData;a.append("file",e),o.send(a)}))},methods:[{title:"Upload file",method:"pc"},{title:"Create folder",method:"createFolder"}],url:mw.settings.site_url+"api/file-manager/list",viewType:"list"},o={};this.on=function(e,t){o[e]?o[e].push(t):o[e]=[t]},this.dispatch=function(e,t){o[e]&&o[e].forEach((function(e){e.call(this,t)}))};var s,a,r,l=function(e){return t.originalAccept=e,(e=(e||"").trim().toLowerCase())?"image"===e||"images"===e?".png,.gif,.jpg,.jpeg,.bmp,.svg,.ico,.webp,.avif":"video"===e||"videos"===e?".mp4,.webm,.ogg,.wma,.mov,.wmv":"document"===e||"documents"===e?".doc,.docx,.log,.pdf,.msg,.odt,.pages,.rtf,.tex,.txt,.wpd,.wps,.pps,.ppt,.pptx,.xml,.htm,.html,.xlr,.xls,.xlsx":"*":"*"};this.settings=mw.object.extend({},n,e),this.settings.accept?this.settings.accept=l(this.settings.accept):this.settings.type&&(this.settings.accept=l(this.settings.type));var c,d,m,h,u,p,f,g="select-fm-"+(new Date).getTime(),w=function(e){var i=document.createElement("input");i.type=t.settings.multiselect?"checkbox":"radio",i.name=e||g,i.className="form-check-input";var n=mw.element('<label class="form-check"><span></span></label>');return n.prepend(i),["click","mousedown","mouseup","touchstart","touchend"].forEach((function(e){n.get(0).addEventListener(e,(function(e){e.stopImmediatePropagation(),e.stopPropagation()}))})),{root:n,input:mw.element(i)}},v=function(e,t){var i=e.size;if(null==i)return"";if(0===i)return"0 Bytes";var n=void 0===t?2:t,o=Math.floor(Math.log(i)/Math.log(1e3));return parseFloat((i/Math.pow(1e3,o)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]},y=function(e,i,n){i||(i=e);var o=mw.element('<li class="page-item"><a class="page-link">'+i+"</a></li>");return o.find("a").on("click",(function(){t.setPage(e)})),e===n&&o.addClass("active"),o},b=function(e){if("folder"===e.type)return'<span class="mw-file-manager-list-item-thumb mw-file-manager-list-item-thumb-folder"><svg xmlns="http://www.w3.org/2000/svg" height="48" fill="currentColor" viewBox="0 96 960 960" width="48"><path d="M141 896q-24 0-42-18.5T81 836V316q0-23 18-41.5t42-18.5h280l60 60h340q23 0 41.5 18.5T881 376v460q0 23-18.5 41.5T821 896H141Zm0-580v520h680V376H456l-60-60H141Zm0 0v520-520Z"/></svg></span>';if(e.thumbnail)return'<span class="mw-file-manager-list-item-thumb mw-file-manager-list-item-thumb-image" style="background-image: url('+e.thumbnail+')"></span>';var t=e.name.split(".").pop();return t||(t=e.mimeType),'<span class="mw-file-manager-list-item-thumb mw-file-manager-list-item-thumb-file">'+t+"</span>"},_=function(e){var t=document.createElement("a");t.href=e.url,t.setAttribute("download",e.name),t.click()},C=function(e){mw.tools.copy(e.url)},x=function(e){e&&!e.length&&(e=[e]),e=e.map((e=>e.path?e.path:e)),mw.confirm(mw.lang("Are you sure")+"?",(function(){var i=new XMLHttpRequest;t.loading(!0),i.onreadystatechange=function(e){4===this.readyState&&200===this.status?t.refresh(!0):this.status,t.loading(!1)},i.addEventListener("error",(function(e){t.loading(!1)}));var n={paths:[...e]},o=route("api.file-manager.delete");i.open("DELETE",o,!0);var s=mw.cookie.get("XSRF-TOKEN");s&&i.setRequestHeader("X-XSRF-TOKEN",s),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(n))}))},$=function(){if(t.settings.selectable)if(t.root.removeClass("mw-fm-all-selected","mw-fm-none-selected","mw-fm-part-selected"),t.settings.multiselect)if(t.areAllSelected())t.root.addClass("mw-fm-all-selected"),c.input.prop("checked",!0),c.input.prop("indeterminate",!1);else if(t.areNoneSelected())t.root.addClass("mw-fm-none-selected"),c.input.prop("checked",!1),c.input.prop("indeterminate",!1);else{t.root.addClass("mw-fm-part-selected"),c.input.prop("checked",!1),c.input.prop("indeterminate",!0);var e=t.getSelected().length;e>0?(t.root.get(0).querySelector(".mw-file-manager--multiselect--selected-actions").style.display="block",t.root.get(0).querySelector(".mw-file-manager--multiselect--count").innerHTML=e):t.root.get(0).querySelector(".mw-file-manager--multiselect--selected-actions").style.display="none"}else t.areNoneSelected()?t.root.addClass("mw-fm-none-selected"):t.root.addClass("mw-fm-part-selected")},k=function(e){var i=[{label:"Download",action:_,match:function(e){return"file"===e.type}},{label:"Copy url",action:C,match:function(e){return!0}},{label:"Delete",action:x,match:function(e){return!0}}],n=mw.element().addClass("mw-file-manager-list-item-options");n.append(mw.element({tag:"span",content:' <svg xmlns="http://www.w3.org/2000/svg" height="22" viewBox="0 96 960 960" width="22" fill="currentColor"><path d="M207.858 624Q188 624 174 609.858q-14-14.141-14-34Q160 556 174.142 542q14.141-14 34-14Q228 528 242 542.142q14 14.141 14 34Q256 596 241.858 610q-14.141 14-34 14Zm272 0Q460 624 446 609.858q-14-14.141-14-34Q432 556 446.142 542q14.141-14 34-14Q500 528 514 542.142q14 14.141 14 34Q528 596 513.858 610q-14.141 14-34 14Zm272 0Q732 624 718 609.858q-14-14.141-14-34Q704 556 718.142 542q14.141-14 34-14Q772 528 786 542.142q14 14.141 14 34Q800 596 785.858 610q-14.141 14-34 14Z"/></svg>',props:{tooltip:"options"}}).addClass("btn btn-sm mw-file-manager-list-item-options-button"));var o=mw.element().addClass("dropdown-menu mw-file-manager-list-item-options-list");return n.on("click",(function(e){e.stopPropagation();for(var i=t.root.get(0).querySelectorAll(".mw-file-manager-list-item-options.active"),o=0;o<i.length;o++)i[o]!==this&&i[o].classList.remove("active");n.toggleClass("active")})),i.forEach((function(t){o.append(function(e,t){if(!t.match(e))return"";var i=mw.element({content:t.label,props:{className:"dropdown-item"}});return i.on("click",(function(i){i.stopPropagation(),t.action(e)})),i}(e,t))})),this.__bodyOptionsClick||(this.__bodyOptionsClick=!0,document.body.addEventListener("mousedown",(function(e){for(var i=e.target,n=!1;i&&i!==document.body;){if(i.classList.contains("mw-file-manager-list-item-options")){n=!0;break}i=i.parentNode}if(!n)for(var o=t.root.get(0).querySelectorAll(".mw-file-manager-list-item-options.active"),s=0;s<o.length;s++)o[s]!==this&&o[s].classList.remove("active")}),!1)),n.append(o),n},S={data:[]};this.setData=function(e){S=e},this.updateData=function(e){this.setData(e),setTimeout((function(){$()}),100),this.dispatch("dataUpdated",e)},this.getSelectableItems=function(){return this.getItems().filter((function(e){return("folder"!==e.type||t.settings.canSelectFolder)&&t.canSelect(e)}))},this.getItems=function(){return this.getData().data},this.getData=function(){return S},this.progress=function(e){"string"==typeof e&&(e=Number(e)),h&&h.get(0).parentNode||(h=mw.element({props:{className:"mw-file-manager-progress"}}),t.root.prepend(h)),e?mw.progress({element:h.get(0),action:"Uploading..."}).set(e):mw.progress({element:h.get(0)}).hide(),100===e&&setTimeout((function(){mw.progress({element:h.get(0)}).hide()}),300)},this.loading=function(e){u&&u.get(0).parentNode||(u=mw.element({props:{className:"mw-file-manager-spinner"}}),t.root.prepend(u)),e?mw.spinner({element:u.get(0),size:32,decorate:!1}).show():mw.spinner({element:u.get(0)}).remove()},this.isSearch=function(){return!!this.settings.query.keyword},this.setPage=function(e){this.settings.query.page=e,this.requestRender(this.settings.query)},this.requestData=function(e,i){this.settings.query=e,t.loading(!0),this.settings.requestData(e,(function(e){i.call(void 0,e),function(e){t.pagingNavigations||(t.pagingNavigations={top:mw.element('<div class="mw-file-manager-paging mw-file-manager-paging-top" />'),bottom:mw.element('<div class="mw-file-manager-paging mw-file-manager-paging-bottom" />')},t.tableWrapper.append(t.pagingNavigations.bottom));var i,n=e.pagination,o=n.currentPage;i=1===o||2===o||3===o?[1,2,3,4,5]:[o-2,o-1,o,o+1,o+2],t.pagingNavigations.bottom.empty().append(function(e,t,i){var n=mw.element('<div class="pagination" />');return t>1&&(n.append(y(1,"&laquo;",t)),n.append(y(t-1,"&lsaquo;",t))),e.forEach((function(e){e<=i&&n.append(y(e,e,t))})),t<i&&(n.append(y(t+1,"&rsaquo;")),n.append(y(i,"&raquo;"))),n}(i,o,n.totalPages))}(e),e.data&&0!==e.data.length?(t.root.removeClass("no-results"),t.root.removeClass("no-results-search")):(t.root.addClass("no-results"),t.isSearch()?(T(mw.lang("Nothing found")),t.root.addClass("no-results-search")):(T(mw.lang("This folder is empty")),t.root.removeClass("no-results-search"))),t.loading(!1,1)}),(function(e){t.loading(!1,2)}))};var T=function(e){p.html(e)};this.find=function(e){};var E={orderBy:this.settings.query.orderBy||"filemtime",order:this.settings.query.order||"desc"};this.requestRender=function(e){this.requestData(e,(function(e){t.setData(e),t.renderData()}))},this.refresh=function(e){e?this.requestRender(this.settings.query):t.renderData()},this.sort=function(e,i,n){void 0===n&&(n=!0),i||(i=e===E.orderBy&&"asc"===E.order?"desc":"asc"),E.orderBy=e,E.order=i,this.settings.query.orderBy=E.orderBy,this.settings.query.order=E.order,mw.element("[data-sortable]",t.root).each((function(){this.classList.remove("asc","desc"),this.dataset.sortable===E.orderBy&&this.classList.add(E.order)})),n&&this.requestData(this.settings.query,(function(e){t.setData(e),t.renderData()}))},this.search=function(e,i){void 0===i&&(i=!0),(e=(e||"").trim())?(this.settings.query.keyword=e,this.sort("keyword","desc",!1)):(mw.element("input",t.root).val(""),mw.element(".has-value",t.root).removeClass("has-value"),delete this.settings.query.keyword,this.sort("filemtime","desc",!1)),mw.element("[data-sortable]",t.root).each((function(){this.classList.remove("asc","desc"),this.dataset.sortable===E.orderBy&&this.classList.add(E.order)})),i&&this.requestData(this.settings.query,(function(e){t.setData(e),t.renderData()}))},this.canSelect=function(e){return"function"!=typeof this.settings.selectableFilter||this.settings.selectableFilter(e)},this.acceptMatches=function(e){if("folder"===e.type||!this.settings.accept||"*"===this.settings.accept)return!0;const t=this.settings.accept.split(","),i=`.${e.name.split(".").pop()}`;return-1!==t.indexOf(i)||-1!==t.indexOf(e.mimeType)},this.singleListView=function(e){var i,n=mw.element({tag:"tr",props:{className:`mw-file-manager-list-item-type--${e.type} mw-file-manager-list-item-matches--${this.acceptMatches(e)}`}}),o=mw.element({tag:"td",content:b(e),props:{className:"mw-file-manager-list-item-thumb-image-cell"}}),s=mw.element({tag:"td",content:e.name,props:{className:"mw-file-manager-list-item-name-cell",title:e.name}}),a=mw.element({tag:"td",content:v(e),props:{className:"mw-file-manager-list-item-size-cell"}}),r=mw.element({tag:"td",content:(i=e.modified,new Date(i).toLocaleString()),props:{className:"mw-file-manager-list-item-modified-cell"}});if("folder"===e.type&&n.on("click",(function(){t.path(t.path()+"/"+e.name)})),this.settings.selectable)if((this.settings.canSelectFolder||"file"===e.type)&&this.canSelect(e)){var l=w();t.settings.selectableRow&&(n.on("click",(function(i){t[l.input.get(0).checked?"unselect":"select"](e),$(),t.dispatch("selectionChanged",t.getSelected())})),n.on("dblclick",(function(i){t.select(e),t.getSelected(),t.dispatch("insertByValue",t.getSelected()),i.stopPropagation(),i.preventDefault()}))),l.input.on("change",(function(){t[this.checked?"select":"unselect"](e),$(),t.dispatch("selectionChanged",t.getSelected())})),n.append(mw.element({tag:"td",content:l.root,props:{className:"mw-file-manager-list-item-check-cell"}}))}else n.append(mw.element({tag:"td"}));if(n.append(o).append(s).append(a).append(r),this.settings.options){var c=mw.element({tag:"td",content:k(e)}).addClass("mw-file-manager-options-cell");n.append(c)}return n};var L=[];this.renderData=function(){r.empty(),L=[],this._selected=[],c&&(c.input.prop("indeterminate",!1),c.input.prop("checked",!1));let e=!1;t.getItems().forEach((function(i){var n=t.singleListView(i);L.push({data:i,row:n}),r.append(n),e||"file"!==i.type||(n.before('<hr class="mw-file-manager-list-item-type--types-delimitter">'),e=!0)}));var i=r.find(".mw-file-manager-list-item-type--folder");i.nodes.length&&(i.nodes[i.nodes.length-1].classList.add("mw-file-manager-list-item-type--folder-last"),mw.element(i.nodes[i.nodes.length-1]).after)},this._selected=[];var H=function(e,i){!1===t.settings.multiselect&&L.forEach((function(e){e.row.removeClass("selected")}));var n=L.find((function(t){return t.data===e}));n&&(n.row[i?"addClass":"removeClass"]("selected"),n.row.find("input").prop("checked",i)),$()};this.getSelected=function(){return this._selected},this.areNoneSelected=function(){return 0===this.getSelected().length},this.areAllSelected=function(){return this.getSelectableItems().length===this.getSelected().length},this.selectAll=function(){L.forEach((function(e){t.select(e.data)}))},this.selectNone=function(){L.forEach((function(e){t.unselect(e.data)}))},this.selectAllToggle=function(){this.areAllSelected()?this.selectNone():this.selectAll()},this.select=function(e){("folder"!==e.type||this.settings.canSelectFolder)&&(this.settings.multiselect?function(e){-1===t._selected.indexOf(e)&&t._selected.push(e)}(e):this._selected=[e],H(e,!0))},this.unselect=function(e){this._selected.splice(this._selected.indexOf(e),1),H(e,!1)},this.back=function(){var e=this.settings.query.path;e&&"/"!==e&&((e=e.split("/")).pop(),this.settings.query.path=e.join("/"),this.path(this.settings.query.path))},this.creteSearchNode=function(e){var i=mw.element('<div class="row g-2 mw-file-manager-search form-control-live-edit-label-wrapper">\n              <div class="col">\n                <input type="text" class="form-control-live-edit-input form-select" placeholder="Search">\n              </div>\n              <div class="col-auto">\n                <button class="btn-icon mw-file-manager-search-button" aria-label="Button">\n\n                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg>\n                </button>\n              </div>\n            </div>');return e&&e.appendChild(i.get(0)),mw.element("input",i).on("input",(function(){this.parentNode.classList[this.value.trim()?"add":"remove"]("has-value")})),mw.element(".mw-file-manager-search-clear",i).on("click",(function(){t.search("",!0),mw.element("input",i).focus()})),mw.element(".mw-file-manager-search-button",i).on("click",(function(){t.search(mw.element("input",i).val().trim(),!0)})),mw.element("input",i).on("keydown",(function(e){"Enter"!==e.key&&13!==e.keyCode||t.search(mw.element("input",i).val().trim(),!0)})),i.get(0)},this.creteMethodsNode=function(e,n){if(this.settings.methods){e=e||document.createElement("div");var o=mw.element({props:{className:"mw-file-manager-create-methods-dropdown"}}),s=mw.element({props:{className:"btn btn-success mw-file-manager-create-methods-dropdown-add",innerHTML:n||i("white")}});s.on("click",(function(){this.parentElement.classList.toggle("active")})),s.get(0).ownerDocument.body.addEventListener("click",(function(e){s.get(0).includes(e.target)||s.get(0).parentElement.classList.remove("active")}));var a=mw.element({props:{className:"mw-file-manager-top-bar-actions-content"}});return this.settings.methods.forEach((function(e){var i=mw.element({props:{className:"mw-file-manager-add-node"}});i.append(t.methods[e.method](e)),a.append(i)})),e.appendChild(o.get(0)),o.append(s),o.append(a),e}};this.view=function(){this.root.empty().append(function(){var e=mw.element({props:{className:"mw-file-manager-top-bar"}}),i=mw.element({props:{className:"mw-file-manager-top-bar-actions"}});t.creteMethodsNode(i.get(0)),t.creteSearchNode(i.get(0));var n=mw.element({props:{className:"mw-file-manager-bar-view-type-selector"}}),o=mw.element('\n            <div class="btn-group">\n                <span class="btn  btn-icon" data-view-type="grid" data-bs-toggle="tooltip" data-bs-placement="top" title="Grid">\n                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="currentColor" class="icon icon-tabler"><path d="M120 536V216h320v320H120Zm0 400V616h320v320H120Zm400-400V216h320v320H520Zm0 400V616h320v320H520ZM200 456h160V296H200v160Zm400 0h160V296H600v160Zm0 400h160V696H600v160Zm-400 0h160V696H200v160Zm400-400Zm0 240Zm-240 0Zm0-240Z"/></svg>\n                </span>\n\n                <span class="btn btn-icon " data-view-type="list" data-bs-toggle="tooltip" data-bs-placement="top" title="List">\n                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="currentColor" class="icon icon-tabler"><path d="M360 856v-80h480v80H360Zm0-240v-80h480v80H360Zm0-240v-80h480v80H360ZM200 896q-33 0-56.5-23.5T120 816q0-33 23.5-56.5T200 736q33 0 56.5 23.5T280 816q0 33-23.5 56.5T200 896Zm0-240q-33 0-56.5-23.5T120 576q0-33 23.5-56.5T200 496q33 0 56.5 23.5T280 576q0 33-23.5 56.5T200 656Zm0-240q-33 0-56.5-23.5T120 336q0-33 23.5-56.5T200 256q33 0 56.5 23.5T280 336q0 33-23.5 56.5T200 416Z"/></svg>\n                </span>\n            </div>');return n.append(o),o.find(".btn").on("click",(function(e){t.viewType(this.dataset.viewType),mw.storage.set("mw-file-manager-view-type",this.dataset.viewType)})),e.append(i),i.append(n),e.get(0)}()).append(function(){(m=mw.element({tag:"button",props:{className:"btn btn-link btn-sm",innerHTML:`\n                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n   <path d="M5 12l14 0"></path>\n   <path d="M5 12l6 6"></path>\n   <path d="M5 12l6 -6"></path>\n</svg>\n                    ${mw.lang("Back")}`}})).on("click",(function(){t.back()})),d=mw.element({tag:"ol",props:{className:"breadcrumb mw-file-manager-bar-path"}});var e=mw.element({props:{className:"mw-file-manager-bar-path-root"}});e.append(d);var i=mw.element({props:{className:"mw-file-manager-bar"}}),n=mw.element('\n                <div class="mw-file-manager--multiselect--context-actions">\n                    <div>\n                        <button type="button" class="btn btn-icon btn-sm" data-action="multiSelectDownloadAll" data-bs-toggle="tooltip" data-bs-placement="top" title="Download">\n    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="currentColor"><path d="M240 896q-33 0-56.5-23.5T160 816V696h80v120h480V696h80v120q0 33-23.5 56.5T720 896H240Zm240-160L280 536l56-58 104 104V256h80v326l104-104 56 58-200 200Z"/></svg>\n                        </button>\n                        <button type="button" class="btn btn-icon btn-danger btn-sm" data-action="multiSelectDeleteAll"  data-bs-toggle="tooltip" data-bs-placement="top" title="Delete">\n                            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="currentColor"><path d="M280 936q-33 0-56.5-23.5T200 856V336h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680 936H280Zm400-600H280v520h400V336ZM360 776h80V416h-80v360Zm160 0h80V416h-80v360ZM280 336v520-520Z"/></svg>\n                        </button>\n                    </div>\n\n                    <div class="mw-file-manager--multiselect--selected-actions">\n                        <span class="mw-file-manager--multiselect--count">0</span> files are marked.\n                        <button type="button" class="btn btn-outline-info btn-sm" data-action="multiSelectRemoveSelection">Cancel</button>\n                        <button type="button" class="btn btn-outline-success btn-sm" data-action="multiSelectInsert">Insert</button>\n                    </div>\n                </div>\n            ');return t.multiSelectDeleteAll=function(){const e=t.getSelected();x(e)},t.multiSelectRemoveSelection=function(){t.selectNone()},t.multiSelectInsert=function(){t.dispatch("insert")},t.multiSelectDownloadAll=function(){t.getSelected().filter((e=>"file"===e.type)).forEach((e=>{_(e)}))},i.append(n).append(m).append(e),n.get(0).querySelectorAll(".btn").forEach((e=>{e.addEventListener("click",(t=>{this[e.dataset.action]()}))})),i}()).append(function(){s?t.renderData():((s=mw.element('<table class="mw-file-manager-view-table" />')).css("backgroundColor",t.settings.backgroundColor),s.append(function(){var e;t.settings.selectable&&t.settings.multiselect?((c=w("select-fm-global-"+(new Date).getTime())).root.addClass("mw-file-manager-select-all-check"),c.input.on("input",(function(){t.selectAllToggle()})),e=mw.element({tag:"th",content:c.root}).addClass("mw-file-manager-select-all-heading")):e=mw.element({tag:"th"}).addClass("mw-file-manager-select-all-heading");var i=mw.element({tag:"th",content:""}),n=mw.element({tag:"th",content:"<span>Name</span>"}).addClass("mw-file-manager-sortable-table-header"),o=mw.element({tag:"th",content:"<span>Size</span>"}).addClass("mw-file-manager-sortable-table-header"),s=mw.element({tag:"th",content:"<span>Last modified</span>"}).addClass("mw-file-manager-sortable-table-header"),r=[e,i,n,o,s];t.settings.options&&r.push(mw.element({tag:"th",content:""}).addClass("mw-file-manager-options-cell")),r.forEach((function(e){e.css("backgroundColor",t.settings.backgroundColor),"number"==typeof t.settings.stickyHeader&&e.css("top",t.settings.stickyHeader)}));var l=mw.element({tag:"tr",content:r});return(a=mw.element({tag:"thead",content:l})).addClass("sticky-"+(!1!==t.settings.stickyHeader&&void 0!==t.settings.stickyHeader)),a.css("backgroundColor",t.settings.backgroundColor),n.dataset("sortable","basename").on("click",(function(){t.sort(this.dataset.sortable)})),o.dataset("sortable","filesize").on("click",(function(){t.sort(this.dataset.sortable)})),s.dataset("sortable","filemtime").on("click",(function(){t.sort(this.dataset.sortable)})),a}()).append((L=[],r&&r.remove(),r=mw.element({tag:"tbody"}),t.renderData(),r)));var e=mw.element('<div class="mw-file-manager-view-table-wrap" />');return e.append(s),t.tableWrapper=e,e}()).append(function(){p=mw.element({tag:"h2",props:{className:"mw-file-manager-no-results-label"}}),f=mw.element({tag:"div",props:{className:"mw-file-manager-no-results-content"},content:p});var e=mw.element({props:{className:"mw-file-manager-no-results"},content:f});return t.creteMethodsNode(f.get(0),i("white",10)+" "+mw.lang("Add")),e}())},this.viewType=function(e,t){if(!e)return this.settings.viewType;(e!==this.settings.viewType||t)&&(this.settings.viewType=e,this.root.dataset("view",this.settings.viewType),Array.from(this.root.get(0).querySelectorAll("[data-view-type]")).forEach((function(t){t.classList[t.dataset.viewType===e?"add":"remove"]("active")})),this.dispatch("viewTypeChange",this.settings.viewType))};var N=function(e,i){var n=document.createElement("li");return n.className="breadcrumb-item",n.innerHTML=i||e.split("/").pop(),n.addEventListener("click",(function(i){i.preventDefault(),t.path(e)})),n};this.path=function(e,i){if(void 0===i&&(i=!0),void 0===e)return this.settings.query.path;e=(e||"").trim(),this.settings.query.page=1,this.settings.query.path=e,delete this.settings.query.keyword,mw.element("input",t.root).val(""),mw.element(".has-value",t.root).removeClass("has-value"),t.dispatch("pathChanged",this.settings.query.path),e=e.split("/").map((function(e){return e.trim()})).filter((function(e){return!!e})),d.empty();for(var n=e.length>0;e.length;){var o=N(e.join("/"));d.prepend(o),e.pop()}n?(d.prepend(N("","Home")),m&&m.show()):m&&m.hide(),i&&(t.sort(t.settings.query.orderBy,t.settings.query.order,!1),this.requestData(this.settings.query,(function(e){t.setData(e),t.renderData()}))),d.find(".acttive").removeClass("active"),d.find(".breadcrumb-item:last-child").addClass("active")},this.init=function(){t.root=mw.element({props:{className:"mw-file-manager-root"}}),this.requestData(this.settings.query,(e=>{let i=t.settings.viewType,n=mw.storage.get("mw-file-manager-view-type");n&&(i=n),t.updateData(e),t.view(),t.path(t.settings.query.path,!1),t.sort(t.settings.query.orderBy,t.settings.query.order,!1),t.viewType(i,!0),t.dispatch("ready")})),this.settings.element&&mw.element(this.settings.element).empty().append(this.root)},this.init()},mw.FileManager=function(e){return new FileManager(e)};var fileUploadProgress=function(e,t,i){i||(i=document.body);var n=i.querySelector('[data-file="'+e+'"]');n||((n=document.createElement("div")).dataset.file=e,i.appendChild(n)),mw.progress({element:n,action:e}).set(t)};mw.filePickerDialog=(e={pickerOptions:{},dialogOptions:{}},t)=>{"function"==typeof e&&(t=e,e={pickerOptions:{},dialogOptions:{}}),e.pickerOptions||(e.pickerOptions={}),e.dialogOptions||(e.dialogOptions={});const{pickerOptions:i,dialogOptions:n}=e;let o,s,a,r=Object.assign({},{type:"images",label:!1,autoSelect:!1,footer:!0,_frameMaxHeight:!0},i);s=new mw.filePicker({...r,onResult:function(e){a=e.src?e.src:e,a?(a=a.toString(),m=a,o.remove()):o.remove()}});var l={content:s.root,title:mw.lang("Select image"),footer:!1,width:860},c=Object.assign({},l,n);let d,m=null;const h=new Promise((e=>{d=e}));return o=mw.top().dialog(c),s.$cancel.on("click",(function(){o.remove()})),mw.top().$(o).on("Remove",(function(){d(a),"function"==typeof t&&t.call(void 0,a)})),{picker:s,dialog:o,promise:()=>h}},mw.filePicker=function(e){e=e||{};var t=this,i={components:[{type:"desktop",label:mw.lang("My computer")},{type:"url",label:mw.lang("URL")},{type:"server",label:mw.lang("Uploaded")},{type:"library",label:mw.lang("Media library")}],nav:"tabs",hideHeader:!1,dropDownTargetMode:"self",element:null,footer:!0,okLabel:mw.lang("OK"),cancelLabel:mw.lang("Cancel"),uploaderType:"big",confirm:function(e){},cancel:function(){},label:mw.lang("Media"),autoSelect:!0,boxed:!1,multiple:!1};this.settings=$.extend(!0,{},i,e),this.settings.type=this.settings.type||this.settings.accept,this.$root=$('<div class="'+(this.settings.boxed?"card mb-3":"")+' mw-filepicker-root form-control-live-edit-label-wrapper"></div>'),this.root=this.$root[0],$.each(this.settings.components,(function(e){this.index=e})),this.components={_$inputWrapper:function(e){return mw.$('<div class="form-control-live-edit-label-wrapper"></div>')},url:function(){var e=$('<input class="form-control-live-edit-input" placeholder="http://example.com/image.jpg">');t.$urlInput=e;var i=this._$inputWrapper(t._getComponentObject("url").label);return i.append(e),e.before('<label class="live-edit-label">'+mw.lang("Insert file url")+"</label>"),e.after('<span class="form-control-live-edit-bottom-effect"></span>'),e.on("input",(function(){var e=this.value.trim();t.setSectionValue(e||null,!1)})),i[0]},desktop:function(){var e=this._$inputWrapper(t._getComponentObject("desktop").label);return t.uploaderHolder=mw.$('<div class="mw-uploader-type-holder"></div>'),function(){var e;"big"===t.settings.uploaderType?e=$('<div class="mw-file-drop-zone"><div class="mw-file-drop-zone-holder"><div class="mw-file-drop-zone-img"></div><div class="mw-ui-progress-small"><div class="mw-ui-progress-bar" style="width: 0%"></div></div><span class="btn btn-pill  btn-primary">'+mw.lang("Add file")+"</span> <p>"+mw.lang("or drop files to upload")+"</p></div></div>"):"small"===t.settings.uploaderType&&(e=$('<div class="mw-file-drop-zone mw-file-drop-zone-small mw-file-drop-square-zone"> <div class="mw-file-drop-zone-holder"> <span class="mw-ui-link">'+mw.lang("Add file")+"</span> <p>"+mw.lang("or drop files to upload")+"</p></div></div>"));var i=$(t.settings.element).eq(0);i.removeClass("mw-filepicker-desktop-type-big mw-filepicker-desktop-type-small"),i.addClass("mw-filepicker-desktop-type-"+t.settings.uploaderType),t.uploaderHolder.empty().append(e)}(),e.append(t.uploaderHolder),t.uploader=mw.upload({element:e[0],multiple:t.settings.multiple,type:t.settings.type,on:{progress:function(e,i,n){t.uploaderHolder.find(".mw-ui-progress-bar").stop().animate({width:e.percent+"%"},"fast")},fileUploadError:function(e){$(t).trigger("FileUploadError",[e])},fileAdded:function(e){$(t).trigger("FileAdded",[e])},fileUploaded:function(e){t.setSectionValue(e),$(t).trigger("FileUploaded",[e]),t.settings.disableFileAutoSelect||t.result(),t.settings.fileUploaded&&t.settings.fileUploaded(e),t.settings.multiple||(mw.notification.success("File uploaded"),t.uploaderHolder.find(".mw-file-drop-zone-img").css("backgroundImage","url("+e.src+")"))}}}),e[0]},server:function(){var e=this._$inputWrapper(t._getComponentObject("server").label);return $(t).on("$firstOpen",(function(i,n,o){if("server"===o){var s=mw.FileManager({element:e[0],canSelectFolder:!1,selectable:!0,multiselect:t.settings.multiple,stickyHeader:!0,selectableRow:!0,type:t.settings.type});s.on("insert",(function(){t.result()})),s.on("insertByValue",(function(e){t.setSectionValue(e.map((e=>e.url))),t.result()})),s.on("selectionChanged",(function(e){t.setSectionValue(e.map((e=>e.url))),t.settings.autoSelect&&t.result()}))}})),e[0]},library:function(){var e=this._$inputWrapper(t._getComponentObject("library").label);return $(t).on("$firstOpen",(function(i,n,o){if(t._getComponentObject("library"),"library"===o){mw.tools.loading(n,!0);var s=mw.top().tools.moduleFrame("pictures/media_library");e.append(s),t.settings._frameMaxHeight&&(s.style.maxHeight="60vh",s.scrolling="yes"),s.onload=function(){mw.tools.loading(n,!1),this.contentWindow.mw.on.hashParam("select-file",(function(e){var i=e.toString();t.setSectionValue(i),t.settings.autoSelect&&t.result()}))}}})),e[0]}},this.hideUploaders=function(e){mw.$(".mw-filepicker-component-section",this.$root).hide()},this.showUploaders=function(e){mw.$(".mw-filepicker-component-section",this.$root).show()},this.settings.components=this.settings.components.filter((function(e){return!!t.components[e.type]})),this._navigation=null,this.__navigation_first=[],this.navigation=function(){if(this._navigationHeader=document.createElement("div"),this._navigationHeader.className="mw-filepicker-component-navigation-header mb-3"+(this.settings.boxed?"card-header no-border":""),this.settings.hideHeader&&(this._navigationHeader.style.display="none"),this.settings.label&&(this._navigationHeader.innerHTML="<h6><strong>"+this.settings.label+"</strong></h6>"),this._navigationHolder=document.createElement("div"),!1===this.settings.nav);else if("tabs"===this.settings.nav){var e=$('<div class="form-control-live-edit-label-wrapper d-flex mw-live-edit-resolutions-wrapper mx-0 w-100" />');this.settings.components.forEach((function(t){e.append('<a href="javascript:;" class="js-filepicker-pick-type-tab-'+t.type+' tblr-body-color live-edit-toolbar-buttons w-100" data-type="'+t.type+'">'+t.label+"</a>")})),this._navigationHolder.appendChild(this._navigationHeader),this._navigationHeader.appendChild(e[0]),setTimeout((function(){t._tabs=mw.tabs({nav:$("a",e),tabs:$(".mw-filepicker-component-section",t.$root),activeClass:"active",onclick:function(e,i,n){-1===t.__navigation_first.indexOf(n)&&(t.__navigation_first.push(n),$(t).trigger("$firstOpen",[e,this.dataset.type])),t.manageActiveSectionState(),setTimeout((function(){var e=mw.top().dialog.get();e&&e.center()}),50)}})}),78)}else if("dropdown"===this.settings.nav){var i=$('<select class="form-select btn-as-link" data-style="btn-sm" data-width="auto" data-title="'+mw.lang("Add file")+'"/>');t._select=i,this.settings.components.forEach((function(e){i.append('<option class="nav-item" value="'+e.type+'">'+e.label+"</option>")})),this._navigationHolder.appendChild(this._navigationHeader),this._navigationHeader.appendChild(i[0]),i.on("changed.bs.select",(function(e,n){var o=i.selectpicker("val"),s=t._getComponentObject(o),a=t.settings.components.indexOf(s),r=$(".mw-filepicker-component-section",t.$root);if(-1===t.__navigation_first.indexOf(o)&&(t.__navigation_first.push(o),$(t).trigger("$firstOpen",[r.eq(a)[0],o])),"dialog"===t.settings.dropDownTargetMode){var l=document.createElement("div"),c=r.eq(a);c.before(l),c.show();var d=!1;if(t._getComponentObject("url").index===a){d=document.createElement("div");var m=$('<button type="button" class=" btn btn-primary">'+t.settings.okLabel+"</button>"),h=$('<button type="button" class=" btn">'+t.settings.cancelLabel+"</button>");m.disabled=!0,d.appendChild(h[0]),d.appendChild(m[0]),d.appendChild(h[0]),h.on("click",(function(){t.__pickDialog.remove()})),m.on("click",(function(){t.setSectionValue(t.$urlInput.val().trim()||null),t.settings.autoSelect&&t.result()}))}t.__pickDialog=mw.top().dialog({overlay:!0,content:c,beforeRemove:function(){$(l).replaceWith(c),c.hide(),t.__pickDialog=null},footer:d})}else r.hide().eq(a).show()}))}this.$root.prepend(this._navigationHolder)},this.__displayControllerByTypeTime=null,this.displayControllerByType=function(e){e=(e||"").trim(),this._getComponentObject(e),clearTimeout(this.__displayControllerByTypeTime),this.__displayControllerByTypeTime=setTimeout((function(){"tabs"===t.settings.nav?mw.$('[data-type="'+e+'"]',t.$root).click():"dropdown"===t.settings.nav&&$(t._select).selectpicker("val",e)}),10)},this.footer=function(){this.settings.footer&&!this.settings.autoSelect&&(this._navigationFooter=document.createElement("div"),this._navigationFooter.className="modal-footer mw-ui-form-controllers-footer mw-filepicker-footer "+(this.settings.boxed?"card-footer":""),this.$ok=$('<button type="button" class="mw-admin-action-links mw-adm-liveedit-tabs mw-liveedit-button-animation-component">'+this.settings.okLabel+"</button>"),this.$cancel=$('<button type="button" class="mw-admin-action-links mw-adm-liveedit-tabs mw-liveedit-button-animation-component">'+this.settings.cancelLabel+"</button>"),this._navigationFooter.appendChild(this.$cancel[0]),this._navigationFooter.appendChild(this.$ok[0]),this.$root.append(this._navigationFooter),this.$ok[0].disabled=!0,this.$ok.on("click",(function(){t.result()})),this.$cancel.on("click",(function(){t.settings.cancel()})))},this.result=function(){var e=this.activeSection();this.settings.onResult&&this.settings.onResult.call(this,e._filePickerValue),$(t).trigger("Result",[e._filePickerValue])},this.getValue=function(){return this.activeSection()._filePickerValue},this._getComponentObject=function(e){return this.settings.components.find((function(t){return t.type&&t.type===e}))},this._sections=[],this.buildComponentSection=function(){var e=mw.$('<div class="'+(this.settings.boxed?"card-body":"")+' mw-filepicker-component-section"></div>');return this.$root.append(e),this._sections.push(e[0]),e},this.buildComponent=function(e){if(this.components[e.type])return this.components[e.type]()},this.buildComponents=function(){$.each(this.settings.components,(function(){var e=t.buildComponent(this);e&&t.buildComponentSection().append(e)}))},this.build=function(){this.navigation(),this.buildComponents(),"dropdown"===this.settings.nav&&$(".mw-filepicker-component-section",t.$root).hide().eq(0).show(),this.footer()},this.init=function(){this.build(),this.settings.element&&$(this.settings.element).eq(0).append(this.$root),$.fn.selectpicker&&$("select",t.$root).selectpicker()},this.hide=function(){this.$root.hide()},this.show=function(){this.$root.show()},this.activeSection=function(){return $(this._sections).filter((function(){return"none"!==$(this).css("display")}))[0]},this.setSectionValue=function(e,i){i=void 0===i||i;var n=this.activeSection();n&&(n._filePickerValue=e),i&&t.__pickDialog&&t.__pickDialog.remove(),this.manageActiveSectionState()},this.manageActiveSectionState=function(){var e=this.activeSection();this.$ok&&this.$ok[0]&&(this.$ok[0].disabled=!(e&&e._filePickerValue))},this.init()},mw.LinkEditor=function(e){var t=this,i={mode:"dialog",controllers:[{type:"url"},{type:"page"},{type:"post"},{type:"file"},{type:"email"},{type:"layout"}],title:'<i class="mdi mdi-link mw-link-editor-icon"></i> '+mw.lang("Link Settings"),nav:"tabs",safeMode:!0};if(this._confirm=[],this.onConfirm=function(e){this._confirm.push(e)},this._cancel=[],this.onCancel=function(e){this._cancel.push(e)},this.setValue=function(e,t){return e=this.cleanData(e),"auto"===(t=t||"auto")?this.controllers.forEach((function(t){t.controller.setValue(e)})):this.controllers.find((function(e){return e.type===t})).controller.setValue(e),this},this.settings=mw.object.extend({},i,e||{}),this.settings.hideTextFied)for(var n=0;n<this.settings.controllers.length;n++)this.settings.controllers[n].config||(this.settings.controllers[n].config={}),this.settings.controllers[n].config.text=!1;this.cleanData=function(e){var i;return t.settings.safeMode&&((e=Object.assign({},e)).url&&(e.url=(i=e.url,filterXSS(i,{}))),e.text),e};var o=function(e,i){[].forEach.call(t.nav.querySelectorAll("li a"),(function(t){t.__for===e?t.classList.add("active"):t.classList.remove("active")})),t.controllers.forEach((function(e){e.controller.root.classList.remove("active")})),i&&i.classList&&i.classList.add("active"),e.controller.root.classList.add("active"),t.dialog&&t.dialog.center()};this.selectController=function(e){var i=t.controllers.find((t=>t.type===e));i&&o(i)},this.buildNavigation=function(){if("tabs"===this.settings.nav){this.nav=document.createElement("ul"),this.nav.className="nav nav-tabs mw-ac-editor-nav border-0 col-4 gap-3 d-flex flex-column";var e=t.controllers,i=[],n=document.createElement("li");n.innerHTML=`<label class="form-label font-weight-bold mt-2 p-0">${mw.lang("Choose from")}</label>`,t.nav.appendChild(n),e.forEach((function(e,i){t.nav.appendChild(function(e,t){var i=document.createElement("li");i.className="pe-3";var n=document.createElement("a");return n.className="mw-admin-action-links mw-adm-liveedit-tabs"+(0===t?" active":""),n.innerHTML='<i class="'+e.controller.settings.icon+'"></i> '+e.controller.settings.title,n.__for=e,n.onclick=function(){o(this.__for,this)},i.appendChild(n),i}(e,i))})),this.settings.selectedIndex=this.settings.selectedIndex||0;let s=-1;for(let e=0;e<this.nav.children.length;e++){const t=this.nav.children[e].querySelector("a");t&&(s++,s===this.settings.selectedIndex&&t.click())}if(this.root.prepend(this.nav),i.length){const e=mw.element(`\n                        <li class="pe-3 dropdown admin-action-links-dropdown">\n\n                                <a class="mw-admin-action-links mw-adm-liveedit-tabs " data-bs-toggle="dropdown">${mw.lang("More")}</a>\n                                <div class="dropdown-menu">\n\n                                </div>\n\n                        </li>\n\n                    `);i.forEach((function(t,i){mw.element(".dropdown-menu",e).append(mw.element({tag:"span",props:{className:"dropdown-item",__for:t,innerHTML:'<i class="'+t.controller.settings.icon+'"></i> '+t.controller.settings.title,onclick:function(){o(this.__for),mw.element(e).hide()}}}))})),this.nav.append(e.get(0))}}},this.buildControllers=function(){this.controllers=[],this.settings.controllers.forEach((function(e){if(mw.UIFormControllers[e.type]){var i=new mw.UIFormControllers[e.type](e.config);t.root.appendChild(i.root),t.controllers.push({type:e.type,controller:i}),i.onConfirm((function(e){e=t.cleanData(e),t._confirm.forEach((function(t){t(e)}))})),i.onCancel((function(){t._cancel.forEach((function(e){e()}))}))}}))},this.build=function(){this.root=document.createElement("div"),this.root.setAttribute("x-data","{}"),this.root.setAttribute("x-trap","true"),this.root.onclick=function(e){mw.tools.firstParentOrCurrentWithAnyOfClasses(e.target,["mw-link-editor-nav-drop-box","mw-link-editor-more-button"])||mw.element(".mw-link-editor-nav-drop-box").hide()},this.root.className="mw-link-editor-root position-relative mw-link-editor-root-inIframe-"+(window.self!==window.top),$(this.root).append('<span onclick="mw.dialog.get(this).remove()" class="x-close-modal-link"> <i class="mdi mdi-close"></i>  </span>'),this.buildControllers(),"dialog"===this.settings.mode?(this.dialog=mw.top().dialog({content:this.root,width:860,skin:"default mw_modal_live_edit_link_editor_settings",height:"auto",minHeight:400,title:this.settings.title,overflowMode:"visible",shadow:!1}),this.dialog.center(),this.onConfirm((function(){t.dialog.remove()})),this.onCancel((function(){t.dialog.remove()}))):"element"===this.settings.mode&&this.settings.element.append(this.root)},this.init=function(e){this.build(),this.buildNavigation()},this.init(),this.promise=function(){return new Promise((function(e){t.onConfirm((function(t){e(t)})),t.onCancel((function(){e()}))}))}},mw.color={rgbaToHex:function(e){var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),i=(t&&t[4]||"").trim();return"#"+((t?(256|t[1]).toString(16).slice(1)+(256|t[2]).toString(16).slice(1)+(256|t[3]).toString(16).slice(1):e)+(255*(""!==i?i:"01")|256).toString(16).slice(1))},rgbToHex:function(e){return"object"==typeof e&&(e=e.r+","+e.g+","+e.b),e.includes("rgb")&&(e=e.replace(/rgba/g,"").replace(/rgb/g,"").replace(/\(|\)/g,"").replace(/\s/g,"")),"transparent"!==(e=e.split(","))?"#"+((1<<24)+(parseInt(e[0])<<16)+(parseInt(e[1])<<8)+parseInt(e[2])).toString(16).slice(1):"transparent"},rgbOrRgbaToHex:function(e){return e?-1!==e.indexOf("#")?e:0===e.indexOf("rgb(")?this.rgbToHex(e):this.rgbaToHex(e):""},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},colorParse:function(e){var t={r:0,g:0,b:0,alpha:0};if((e=e||"rgb(0,0,0,0)").includes("rgb")){var i=e.replace(/rgba/g,"").replace(/rgb/g,"").replace(/\(|\)/g,"").replace(/\s/g,"").split(",");return t.r=parseInt(i[0],10),t.g=parseInt(i[1],10),t.b=parseInt(i[2],10),t.alpha=Number(i[3]||1),t}return(t=mw.color.hexToRgb(e)).alpha=1,t},getBrightness:function(e){var t=this.colorParse(e);return{color:(299*t.r+587*t.g+114*t.b)/1e3,alpha:100*t.alpha}},isDark:function(e){var t=this.getBrightness(e);return t.color<128&&t.alpha>22},isLight:function(e){return!this.isDark(e)},hexToRgbaCSS:function(e,t){t=t||1;var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+","+t+")":""},random:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},decimalToHex:function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},hexToDecimal:function(e){return parseInt(e,16)},oppositeColor:function(e){return e=e.includes("#")?e.replace("#",""):e,mw.color.decimalToHex(255-mw.color.hexToDecimal(e.substr(0,2)))+mw.color.decimalToHex(255-mw.color.hexToDecimal(e.substr(2,2)))+mw.color.decimalToHex(255-mw.color.hexToDecimal(e.substr(4,2)))}},function(){mw._colorPickerDefaults={skin:"mw-tooltip-default",position:"bottom-center",onchange:!1};var e=new Option,t=[];mw._colorPicker=function(i){if(!mw.tools.colorPickerColors)if(mw.tools.colorPickerColors=[],void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager)(r=mw.top().app.templateSettings.colorPaletteManager.getColors()).length>0&&r.forEach((function(e){-1===mw.tools.colorPickerColors.indexOf(e)&&mw.tools.colorPickerColors.push(e)}));else if(void 0!==mw.color&&void 0!==mw.color.rgbToHex){var n=mw.top().$(".btn,h1,h2,h3,h4,h5");n.length>0&&n.each((function(){var e=parent.getComputedStyle(this,null);null!==e&&(-1===mw.tools.colorPickerColors.indexOf(e.color)&&mw.tools.colorPickerColors.push(mw.color.rgbToHex(e.color)),-1===mw.tools.colorPickerColors.indexOf(e.backgroundColor)&&mw.tools.colorPickerColors.push(mw.color.rgbToHex(e.backgroundColor)))}))}var o=this;if(!i)return!1;var s=$.extend({},mw._colorPickerDefaults,i);if(void 0===s.element||null===s.element)return!1;var a=mw.$(s.element);if(void 0===a[0])return!1;if(a[0].mwcolorPicker)return a[0].mwcolorPicker;if(a[0].mwcolorPicker=this,this.element=a[0],void 0!==a[0].mwToolTipBinded)return!1;s.method||"DIV"===this.element.nodeName&&(s.method="inline"),this.settings=s,a[0].mwToolTipBinded=!0;var r,l,c={showAlpha:!0,showHSL:!1,showRGB:!1,showHEX:!0,palette:mw.tools.colorPickerColors};if(void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&((r=mw.top().app.templateSettings.colorPaletteManager.getColors()).length>0&&r.forEach((function(e){-1===mw.tools.colorPickerColors.indexOf(e)&&mw.tools.colorPickerColors.push(e)})),c.palette=mw.tools.colorPickerColors,c.paletteEditable=!0),s.value&&(c.color=s.value),void 0!==s.showRGB&&(c.showRGB=s.showRGB),void 0!==s.showHEX&&(c.showHEX=s.showHEX),void 0!==s.showHSL&&(c.showHSL=s.showHSL),this.setColor=function(e){l.setColor(e)},"inline"===s.method)c.attachTo=a[0],(l=c.attachTo.ownerDocument.defaultView.AColorPicker.createPicker(c)).on("coloradd",((e,t)=>{void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&mw.top().app.templateSettings.colorPaletteManager.addToPaletteMemory(t)})),l.on("colorremove",((e,t)=>{void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&mw.top().app.templateSettings.colorPaletteManager.removeFromPaletteMemory(t)})),l.onchange=function(e){if(o.settings.onchange&&o.settings.onchange(e.color),"INPUT"===a[0].nodeName){var t="transparent"===t?t:"#"+t;a.val(t);var i=a[0].previousElementSibling;if(i&&i.classList.contains("mw-field-color-indicator")){var n=i.querySelector(".mw-field-color-indicator-display");n&&(n.style.backgroundColor=t)}}};else{var d=mw.tooltip(s);mw.$(d).hide(),t.push(d),this.tip=d,mw.$(".mw-tooltip-content",d).empty().css({padding:0}),c.attachTo=mw.$(".mw-tooltip-content",d)[0],(l=AColorPicker.createPicker(c)).on("coloradd",((e,t)=>{void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&mw.top().app.templateSettings.colorPaletteManager.addToPaletteMemory(t)})),l.on("colorremove",((e,t)=>{void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&mw.top().app.templateSettings.colorPaletteManager.removeFromPaletteMemory(t)})),l.onchange=function(e){if(!l.pause&&(o.settings.onchange&&o.settings.onchange(e.color),"INPUT"===a[0].nodeName)){a.val(e.color);var t=a[0].previousElementSibling;if(t&&t.classList.contains("mw-field-color-indicator")){var i=t.querySelector(".mw-field-color-indicator-display");i&&(i.style.backgroundColor=e.color)}}},"INPUT"===a[0].nodeName?(a.on("input",(function(t){var i,n=this.value.trim();if(n||(n="transparent"),i=n,e.style.color="",e.style.color=i,""!==e.style.color){var s=a[0].previousElementSibling;if(s&&s.classList.contains("mw-field-color-indicator")){var r=s.querySelector(".mw-field-color-indicator-display");r&&(r.style.backgroundColor=n)}o.settings.onchange&&o.settings.onchange(n)}})),a.on("focus",(function(e){this.value.trim()&&(l.pause=!0,l.color=this.value,setTimeout((function(){l.pause=!1}))),t.forEach((function(e){e!==d&&mw.$(e).hide()})),mw.$(d).show(),mw.tools.tooltip.setPosition(d,a[0],s.position)}))):a.on("click",(function(e){t.forEach((function(e){e!==d&&mw.$(e).hide()})),mw.$(d).toggle(),mw.tools.tooltip.setPosition(d,a[0],s.position)}));var m=[document];self!==mw.top().win&&m.push(mw.top().win.document),a.addClass("mw-color-picker-field")}if(l&&l.element){var h=$(l.element).find(".a-color-picker-palette").first()[0],u=mw.element('<div class="a-color-picker-palette-color color-picker-palette-color-transparent"  style="background-image: repeating-conic-gradient(silver 0 25%, transparent 0 50%);background-size: 9px 9px;"></div>');u.on("click",(function(e){e.stopPropagation(),o.settings.onchange&&o.settings.onchange("rgb(0 0 0 / 0%)")}));var p=mw.element('\n                <div\n                    class="a-color-picker-palette-color color-picker-palette-color-reset"></div>\n                    ');if(p.on("click",(function(e){e.stopPropagation(),o.settings.onchange&&o.settings.onchange("revert-layer")})),h.append(u.get(0)),h.append(p.get(0)),void 0!==mw.top().app&&void 0!==mw.top().app.templateSettings&&void 0!==mw.top().app.templateSettings.colorPaletteManager&&o.settings.value&&mw.top().app.templateSettings.colorPaletteManager.isInPaletteMemory(o.settings.value)){var f=mw.element('\n                                                            <div\n                                                                class="a-color-picker-palette-color color-picker-palette-color-remove-from-palette"></div>\n                                                                ');f.on("click",(function(e){if(e.stopPropagation(),o.settings.value){var t=o.settings.value;mw.top().app.templateSettings.colorPaletteManager.removeFromPaletteMemory(t),o.settings.onchange&&o.settings.onchange("revert-layer")}})),h.append(f.get(0))}}this.tip&&(this.show=function(){mw.$(this.tip).show(),mw.tools.tooltip.setPosition(this.tip,this.settings.element,this.settings.position)},this.hide=function(){mw.$(this.tip).hide()},this.toggle=function(){mw.$(this.tip).is(":visible")?this.hide():(a.focus(),this.show())});var g=a[0].previousElementSibling;if(g&&g.classList.contains("mw-field-color-indicator")){var w=g.querySelector(".mw-field-color-indicator-display");w&&(w.style.backgroundColor=a[0].value)}},mw.colorPicker=function(e){return new mw._colorPicker(e)},$(document).ready((function(){$(document).on("click",(function(e){mw.tools.hasParentsWithClass(e.target,"a-color-picker")||mw.tools.hasClass(e.target,"mw-color-picker-field")||t.forEach((function(e){mw.$(e).hide()}))}))}))}();var components=__webpack_require__(4839),defaultTimeout,targetDocument,errorsHandlePrev;defaultTimeout=5e3,window.top,targetDocument=window.top.document,errorsHandlePrev=[],mw.errorsHandle=function(e){for(;errorsHandlePrev.length;)errorsHandlePrev[errorsHandlePrev.length-1].remove(),errorsHandlePrev.pop();if(e){if(401===e.status&&(mw.session.checkPause=!1,mw.session.checkPauseExplicitly=!1,mw.session.logRequest()),e.errors=e.errors||e.form_errors,e.errors||($(".invalid-feedback",targetDocument).hide(),$(".valid-feedback",targetDocument).hide()),e.errors){var t=[];for(var i in e.errors){var n=$('.custom-file-input[name="'+i+'"], .form-control[name="'+i+'"]').last()[0];if(n){if(n){var o=n.nextElementSibling;o&&o.classList.contains("invalid-feedback")||((o=targetDocument.createElement("div")).classList.add("invalid-feedback"),n.parentNode.insertBefore(o,n.nextSibling),errorsHandlePrev.push(o)),o.style.display="block",$(o,targetDocument).css("display","block"),o.innerHTML=e.errors[i]}}else{var s=e.errors[i].map?e.errors[i][0]:e.errors[i];t.push(s)}}t.length&&mw.notification.warning(t.join("<br>"))}e.errors&&e.message&&mw.notification.warning(e.message)}},mw.notification={msg:function(e,t,i){if(t=t||defaultTimeout,i=i||!1,e)if(e.status){if(e.responseJSON&&e.responseJSON.message){var n={};200===e.status?n.success=e.responseJSON.message||e.statusText:n.warning=e.responseJSON.message||e.statusText,mw.notification.msg(n,t,i)}}else e.success?i?mw.notification.success(e.success,t):mw.alert(e.success):e.error?mw.notification.error(e.error,t):e.warning&&mw.notification.warning(e.warning,t)},build:function(e,t,i){var n=targetDocument.createElement("div");return n.id=i,n.className="mw-notification mw-"+e,n.innerHTML="<div>"+t+"</div>",n},append:function(e,t,i,n){"object"==typeof e&&(t=e.text,i=e.timeout,e.name,e=e.type);var o=`\n\n        <div class="mw-notification">\n            <div class="  align-items-center text-bg-${e} border-0" role="alert" aria-live="assertive" aria-atomic="true">\n                <div class="flex items-center justify-between">\n                    <div>\n                        ${t}\n                    </div>\n                    \n            <button style="--c-300:var(--gray-300);--c-400:var(--gray-400);--c-500:var(--gray-500);--c-600:var(--gray-600);" class="fi-icon-btn relative flex items-center justify-center rounded-lg outline-none transition duration-75 focus-visible:ring-2 -m-2 h-9 w-9 text-gray-400 hover:text-gray-500 focus-visible:ring-primary-600 dark:text-gray-500 dark:hover:text-gray-400 dark:focus-visible:ring-primary-500 fi-color-gray fi-no-notification-close-btn" type="button"  >\n                <svg class="fi-icon-btn-icon h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">\n                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path>\n                </svg>\n            </button>\n        \n                </div>\n            </div>\n        </div>\n\n        `,s=$(".mw-notification",targetDocument).last();if(s.length){var a=parseFloat(s.css("top"));isNaN(a)&&(a=0),a+=s.outerHeight()}(o=$(o,targetDocument).appendTo(targetDocument.body)).css("top",a),o.find("button").on("click",(function(){o.remove()})),setTimeout((function(){o.remove()}),i)},success:function(e,t,i){"object"==typeof e&&(t=e.timeout,i=e.name,e=e.text),t=t||defaultTimeout,mw.notification.append("success",e,t,i)},error:function(e,t,i){"object"==typeof e&&(t=e.timeout,i=e.name,e=e.text),t=t||defaultTimeout,mw.notification.append("danger",e,t,i)},warning:function(e,t,i){"object"==typeof e&&(t=e.timeout,i=e.name,e=e.text),t=t||defaultTimeout,mw.notification.append("warning",e,t,i)}},mw.widget.tree=function(e,t,i){if("string"==typeof e&&(e=document.querySelector(e)),e){var n;i||(i="treeTags"),t||(t={}),mw.spinner({element:e,size:32,decorate:!0});var o,s=t.params,a=t.options||{},r=mw.settings.api_url+"content/get_admin_js_tree_json",l=document.createElement("div");if(l.className="mw--global-admin-tree",a.id&&(l.id="mw--parent-"+a.id),s||(s={}),a||(a={}),"tree"===i)o={element:l,sortable:!1,selectable:!0,singleSelect:!0,searchInput:!0};else if("treeTags"===i){var c=mw.element();o={selectable:!0,multiPageSelect:!1,tagsHolder:c.get(0),treeHolder:l,color:"primary",size:"sm",outline:!0,saveState:!1,searchInput:!0,on:{selectionChange:function(){}}},e.appendChild(c.get(0))}e.appendChild(l);var d=Object.assign({},o,a);return r=r+"?"+function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}(s),new Promise((function(t){$.get(r,(function(o){d.data=o,n=new mw[i](d);var s={tree:"tree"===i?n:n.tree,tags:"tree"===i?null:n.tags,treeTags:"tree"===i?null:n};t(s),mw.spinner({element:e}).remove()}))}))}};class CategoriesAdminListBulkService{constructor(e){this.instance=e,this.tree=this.instance.tree,this.selectedPages=[],this.selectedCategories=[],this.syncSelected(),this.tree.on("selectionChange",(()=>this.syncSelected()))}syncSelected(){const e=[],t=[],i=this.tree.getSelected();for(let n=0;n<i.length;n++){const o=i[n];"category"===o.type?t.push(o.id):"page"===o.type&&e.push(o.id)}this.selectedPages=e,this.selectedCategories=t}dropdown(e,t={}){const i={data:[{id:"moveToCategory",title:mw.lang("Move To Category")},{id:"hide",title:mw.lang("Make Hidden")},{id:"show",title:mw.lang("Make Visible")},{id:"delete",title:mw.lang("Delete")}]},n=mw.select({element:e,...Object.assign({},i,t)});return n.on("change",(e=>{const t=e[0]&&e[0].id;t&&this[t]&&this[t]()})),n}categoryBulkMoveExec(){mw.confirm(mw.lang("Are you sure you want to move the selected data"),(function(){var e=mw.dialog.get("#pick-categories"),t=mw.tree.get("#pick-categories").getSelected(),i={categories:[]};t.forEach((function(e){"category"===e.type?i.categories.push(e.id):"page"===e.type&&(i.rel_id=e.id)})),mw.spinner({element:e.dialogContainer}),$.ajax({url:route("api.category.move-bulk"),type:"POST",data:{ids:this.selectedCategories,moveToParentIds:i.categories,moveToRelId:i.rel_id},success:function(t){mw.reload_module("categories/manage"),mw.notification.success(mw.lang("Categories are moved")),mw.top().trigger("pagesTreeRefresh"),e.remove()}})}))}async moveToCategory(){const e={};this.instance.settings.params&&this.instance.settings.params.is_shop?e.is_shop=1:e.is_blog=1;var t=document.createElement("button");t.disabled=!0,t.className="mw-ui-btn",t.innerHTML=mw.lang("Move categories"),t.addEventListener("click",(e=>this.categoryBulkMoveExec()));var i=mw.dialog({height:"auto",autoHeight:!0,id:"pick-categories",footer:t,title:mw.lang("Move to selected category")}),n={element:i.dialogContainer,sortable:!1,selectable:!0,singleSelect:!0,searchInput:!0};const o=(await mw.widget.tree(i.dialogContainer,{options:n,params:e})).tree;o.on("selectionChange",(function(){t.disabled=0===o.getSelected().length;var e=o.getSelected();if(!1===o.options.singleSelect&&n.selected.length&&void 0===e.find((function(e){return"page"===e.type}))){var i=e[0];o.select(i.parent_id,"page",!0)}}))}delete(){mw.confirm(mw.lang("Are you sure you want to delete the selected categories"),(function(){$.ajax({url:route("api.category.delete-bulk"),type:"DELETE",data:{ids:this.selectedCategories},success:function(e){mw.reload_module("categories/manage"),mw.notification.success(mw.lang("Categories are deleted")),mw.top().trigger("pagesTreeRefresh")}})}))}makeHidden(){mw.confirm(mw.lang("Are you sure you want to make hidden the selected categories?"),(function(){$.ajax({url:route("api.category.hidden-bulk"),type:"POST",data:{ids:this.selectedCategories},success:function(e){mw.reload_module("categories/manage"),mw.notification.success(mw.lang("Categories are hidden")),mw.top().trigger("pagesTreeRefresh")}})}))}makeVisible(){mw.confirm(mw.lang("Are you sure you want to make visible the selected categories"),(()=>{$.ajax({url:route("api.category.visible-bulk"),type:"POST",data:{ids:this.selectedCategories},success:function(e){mw.reload_module("categories/manage"),mw.notification.success(mw.lang("Categories are visible")),mw.top().trigger("pagesTreeRefresh")}})}))}}class CategoriesAdminListService{}class CategoriesAdminListComponent extends containers_base_class{constructor(e,t,i="tree"){if(super(),"string"==typeof e&&(e=document.querySelector(e)),e)return this.target=e,this.settings=this.config(t),this.init()}#d(e,t){return mw.object.extend(!0,{},e,t)}config(e){const t={params:{show_hidden:!0,no_limit:!0,is_shop:0,is_blog:0},options:{sortable:!0,selectable:!0,rowSelect:!1,singleSelect:!1,multiPageSelect:!1,disableSelectTypes:["page"],saveState:!1,searchInput:document.getElementById("category-tree-search"),skin:"category-manager",contextMenu:[{title:"Add category",icon:"add-subcategory-icon-tree",action:function(e,t,i){var n=mw.settings.adminUrl+"category/create?parent_page_id="+t.id;"page"===t.type&&1===t.is_shop&&(n=mw.settings.adminUrl+"shop/category/create?parent_page_id="+t.id),window.location.href=n},filter:function(e,t){return"page"===e.type},className:""},{title:"View",icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"/></svg>',action:function(e,t,i){top.location.href=t.url},filter:function(e,t){return"category"===e.type},className:""},{title:"Edit",icon:'<svg class="tblr-body-color" fill="currentColor" data-bs-toggle="tooltip" aria-label="Edit" data-bs-original-title="Edit" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="18px" viewBox="0 0 24 24" width="18px"><g><rect fill="none" height="24" width="24"></rect></g><g><g><g><path d="M3,21l3.75,0L17.81,9.94l-3.75-3.75L3,17.25L3,21z M5,18.08l9.06-9.06l0.92,0.92L5.92,19L5,19L5,18.08z"></path></g><g><path d="M18.37,3.29c-0.39-0.39-1.02-0.39-1.41,0l-1.83,1.83l3.75,3.75l1.83-1.83c0.39-0.39,0.39-1.02,0-1.41L18.37,3.29z"></path></g></g></g></svg>',action:function(e,t,i){self.location.href=t.admin_edit_url},filter:function(e,t){return"category"===e.type},className:""},{title:"Delete",icon:'<svg class="  text-danger" fill="currentColor" data-bs-toggle="tooltip" aria-label="Delete" data-bs-original-title="Delete" xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 0 24 24" width="18px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"></path></svg>',action:function(e,t,i){"category"===t.type&&mw.content.deleteCategory(t.id,(function(){$(e).fadeOut((function(){$(e).remove()}))}),!1)},filter:function(e,t){return"category"===e.type},className:""}]}};return this.#d({...t},e)}init(){return new Promise((e=>{mw.widget.tree(this.target,this.settings,"tree").then((t=>{this.instance=t,this.tree=this.instance.tree,this.tags=this.instance.tags,this.treeTags=this.instance.treeTags,this.bulkService=new CategoriesAdminListBulkService(this);const i=document.createElement("div");this.dropdown=this.bulkService.dropdown(i,this.settings.dropdown),this.dropdown.disabled(0===this.bulkService.selectedCategories.length),this.tree.on("selectionChange",(e=>this.dropdown.disabled(0===this.bulkService.selectedCategories.length))),this.tree.list.parentNode.insertBefore(i,this.tree.list),e(this.instance),this.dispatch("ready",this.instance)}))}))}}class IconPicker extends base_class{selectIcon(e){var t=$(e)[0];mw.iconLoader().init();var i=mw.iconPicker({iconOptions:!1});i.target=document.createElement("i"),i.on("select",(function(e){e.render(),t.value=i.target.outerHTML;var n=new Event("input");t.dispatchEvent(n),i.dialog("hide")})),i.dialog()}pickIcon(e,t={}){var i=$(e)[0];const n=Object.assign({},{iconOptions:{color:!0,size:!0,reset:!0,imageReplace:!0}},t,{target:i});mw.iconLoader().init();var o=mw.iconPicker(n);return{promise:()=>new Promise((e=>{o.target=i,o.on("select",(function(t){t.render(),o.dialog("hide"),e(t)})),o.dialog()})),target:i,picker:o}}removeIcon(e){var t=$(e)[0];t.value="";var i=new Event("input");t.dispatchEvent(i)}}class AdminPackageManager{constructor(){}set_loading(e){mw.tools.loading(document.querySelector(".js-install-package-loading-container-confirm"),e,"slow"),mw.tools.loading(document.querySelector("#mw-packages-browser-nav-tabs-nav"),e,"slow"),mw.tools.loading(document.querySelector(".admin-toolbar"),e,"slow"),mw.tools.loading(document.querySelector("#update_queue_set_modal"),e,"slow")}reload_packages_list(){this.set_loading(!0),mw.notification.success("Reloading packages",15e3),mw.clear_cache(),window.location.reload()}show_licenses_modal(){licensesModal=mw.tools.open_module_modal("settings/group/licenses",{},{overlay:!0,height:"auto",width:960,title:"Licenses",skin:"simple"})}install_composer_package_by_package_name(e,t,i){mw.notification.success("Loading...",25e3),mw.dialog({content:'<div   id="update_queue_process_alert"></div>',overlay:!1,height:"300px",id:"update_queue_set_modal",title:"Preparing"}),this.set_loading(50);var n={require_name:e,require_version:t};this.install_composer_package_by_package_name_do_ajax(n,i)}#m=null;install_composer_package_by_package_name_do_ajax(e,t){$.ajax({url:mw.settings.api_url+"mw_composer_install_package_by_name",type:"post",data:e,success:i=>{if(this.set_loading(!0),"object"==typeof i&&i.try_again&&i.unzip_cache_key){if(i.try_again)return e.try_again_step=!0,e.unzip_cache_key=i.unzip_cache_key,this.#m=e,void setTimeout((()=>{this.install_composer_package_by_package_name_do_ajax(e,t)}),500)}else{if("function"==typeof t)return t(i);mw.notification.msg(i),this.set_loading(!1),this.reload_packages_list(),this.set_loading(!1),mw.$("#update_queue_set_modal").remove()}},error:(e,t,i)=>{this.set_loading(!1),setTimeout((()=>{this.install_composer_package_by_package_name_do_ajax(this.#m)}),500)}}).always(((e,i)=>{if("function"==typeof t)return t(e);mw.$("#update_queue_set_modal").remove(),this.set_loading(!1)}))}}class ColorPicker extends services_containers_base_class{constructor(){super(),this.colorPickerInstances=[],this.positionToElement=!1}setPositionToElement(e){this.positionToElement=e}openColorPicker(e,t=!1,i=!1){if(this.colorPickerInstances.length>0)for(let e=0;e<this.colorPickerInstances.length;e++)this.colorPickerInstances[e].remove();let n=this.generateRandId(10),o=mw.top().dialog({content:'<div id="color-picker-'+n+'" style="width:232px;min-height:325px;"></div>',title:"Color Picker",footer:!1,width:240,overlayClose:!0});i&&o.positionToElement(i),o.dialogContainer&&(o.dialogContainer.style.padding="0px"),o.overlay&&(o.overlay.style.backgroundColor="transparent"),this.colorPickerInstances.push(o);var s={element:"#color-picker-"+n,onchange:function(e){t&&t(e)}};return"rgba(0, 0, 0, 0)"==e&&(e=""),e&&(s.value=e),mw.colorPicker(s),o}selectColor(e,t=!1){if(this.colorPickerInstances.length>0)for(let e=0;e<this.colorPickerInstances.length;e++)this.colorPickerInstances[e].remove();var i=$(e)[0];let n=this.generateRandId(10),o=mw.top().dialog({content:'<div id="color-picker-'+n+'" style="width:232px;min-height:325px;"></div>',title:"Color Picker",footer:!1,width:240,overlayClose:!0});o.positionToElement(this.positionToElement),o.dialogContainer&&(o.dialogContainer.style.padding="0px"),o.overlay&&(o.overlay.style.backgroundColor="transparent"),this.colorPickerInstances.push(o),mw.colorPicker({element:o.dialogContainer.querySelector("#color-picker-"+n),value:i.value,onchange:function(e){i.value=e,i.dispatchEvent(new Event("input")),t&&t(e)}})}generateRandId(e){let t="";let i=0;for(;i<e;)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),i+=1;return t}}mw.tools=new AdminTools(mw.app),mw.pause=e=>new Promise((t=>setTimeout(t,e||0))),mw.app.singleFilePickerComponent=e=>new SingleFilePickerComponent(e),mw.tools.progress=Progress,mw.progress=Progress,mw.tools.loading=Loading;for(let e in Helpers)mw.tools[e]=Helpers[e];mw.app.editImageDialog=new live_edit_image_dialog,mw.app.adminModules=new AdminModules,mw.alert=Alert,mw.controlBox=ControlBox,mw.confirm=Confirm,mw.prompt=Prompt,mw.app.normalizeBase64Image=normalizeBase64Image,mw.app.normalizeBase64Images=normalizeBase64Images,mw.app.register("colorPicker",ColorPicker),mw.schemaForm=e=>new SchemaForm(e),mw.templatePreview=TemplatePreview;for(let e in SystemDialogsService)mw.tools[e]=SystemDialogsService[e];mw.systemDialogsService=SystemDialogsService,mw.app.register("iconPicker",IconPicker),mw.admin||(mw.admin=mw.app),mw.admin.admin_package_manager=new AdminPackageManager,mw.admin.filament=new AdminFilament,mw.admin.categoriesTree=(e,t)=>new CategoriesAdminListComponent(e,t),mw.admin.dispatch("init"),mw.admin.dispatch("ready")})();